{"version":3,"file":"unit.js","sources":["../../src/polyfills/custom-elements-native-shim.ts","../../src/polyfills/form-request-submit-polyfill.js","../../src/polyfills/submit-event.ts","../../src/elements/frame_element.ts","../../src/core/url.ts","../../src/http/fetch_response.ts","../../src/core/types.ts","../../src/util.ts","../../src/http/fetch_request.ts","../../src/observers/appearance_observer.ts","../../src/core/streams/stream_message.ts","../../src/core/drive/form_submission.ts","../../src/core/snapshot.ts","../../src/observers/form_submit_observer.ts","../../src/core/view.ts","../../src/core/frames/frame_view.ts","../../src/core/frames/link_interceptor.ts","../../src/observers/form_link_interceptor.ts","../../src/core/bardo.ts","../../src/core/renderer.ts","../../src/core/frames/frame_renderer.ts","../../src/core/drive/progress_bar.ts","../../src/core/drive/head_snapshot.ts","../../src/core/drive/page_snapshot.ts","../../src/core/drive/visit.ts","../../src/core/native/browser_adapter.ts","../../src/observers/cache_observer.ts","../../src/core/frames/frame_redirector.ts","../../src/core/drive/history.ts","../../src/observers/link_click_observer.ts","../../src/core/drive/navigator.ts","../../src/observers/page_observer.ts","../../src/observers/scroll_observer.ts","../../src/observers/stream_observer.ts","../../src/core/drive/error_renderer.ts","../../src/core/drive/page_renderer.ts","../../src/core/drive/snapshot_cache.ts","../../src/core/drive/page_view.ts","../../src/core/drive/preloader.ts","../../src/core/session.ts","../../src/core/cache.ts","../../src/core/streams/stream_actions.ts","../../src/core/index.ts","../../src/core/frames/frame_controller.ts","../../src/elements/stream_element.ts","../../src/elements/stream_source_element.ts","../../src/elements/index.ts","../../src/script_warning.ts","../../src/index.ts","../../src/tests/helpers/intern_test_case.ts","../../src/tests/helpers/dom_test_case.ts","../../src/tests/unit/deprecated_adapter_support_test.ts","../../src/tests/unit/stream_element_tests.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This shim allows elements written in, or compiled to, ES5 to work on native\n * implementations of Custom Elements v1. It sets new.target to the value of\n * this.constructor so that the native HTMLElement constructor can access the\n * current under-construction element's definition.\n */\n;(function () {\n  if (\n    // No Reflect, no classes, no need for shim because native custom elements\n    // require ES2015 classes or Reflect.\n    window.Reflect === undefined ||\n    window.customElements === undefined ||\n    // The webcomponentsjs custom elements polyfill doesn't require\n    // ES2015-compatible construction (`super()` or `Reflect.construct`).\n    (window.customElements as any).polyfillWrapFlushCallback\n  ) {\n    return\n  }\n  const BuiltInHTMLElement = HTMLElement\n\n  /**\n   * With jscompiler's RECOMMENDED_FLAGS the function name will be optimized away.\n   * However, if we declare the function as a property on an object literal, and\n   * use quotes for the property name, then closure will leave that much intact,\n   * which is enough for the JS VM to correctly set Function.prototype.name.\n   */\n  const wrapperForTheName = {\n    HTMLElement: function HTMLElement(this: HTMLElement) {\n      return Reflect.construct(BuiltInHTMLElement, [], this.constructor)\n    },\n  }\n  window.HTMLElement = wrapperForTheName[\"HTMLElement\"] as unknown as typeof HTMLElement\n  HTMLElement.prototype = BuiltInHTMLElement.prototype\n  HTMLElement.prototype.constructor = HTMLElement\n  Object.setPrototypeOf(HTMLElement, BuiltInHTMLElement)\n})()\n","/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2019 Javan Makhmali\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n(function(prototype) {\n  if (typeof prototype.requestSubmit == \"function\") return\n\n  prototype.requestSubmit = function(submitter) {\n    if (submitter) {\n      validateSubmitter(submitter, this)\n      submitter.click()\n    } else {\n      submitter = document.createElement(\"input\")\n      submitter.type = \"submit\"\n      submitter.hidden = true\n      this.appendChild(submitter)\n      submitter.click()\n      this.removeChild(submitter)\n    }\n  }\n\n  function validateSubmitter(submitter, form) {\n    submitter instanceof HTMLElement || raise(TypeError, \"parameter 1 is not of type 'HTMLElement'\")\n    submitter.type == \"submit\" || raise(TypeError, \"The specified element is not a submit button\")\n    submitter.form == form || raise(DOMException, \"The specified element is not owned by this form element\", \"NotFoundError\")\n  }\n\n  function raise(errorConstructor, message, name) {\n    throw new errorConstructor(\"Failed to execute 'requestSubmit' on 'HTMLFormElement': \" + message + \".\", name)\n  }\n})(HTMLFormElement.prototype);\n","type FormSubmitter = HTMLElement & { form?: HTMLFormElement; type?: string }\n\nconst submittersByForm: WeakMap<HTMLFormElement, HTMLElement> = new WeakMap()\n\nfunction findSubmitterFromClickTarget(target: EventTarget | null): FormSubmitter | null {\n  const element = target instanceof Element ? target : target instanceof Node ? target.parentElement : null\n  const candidate = element ? (element.closest(\"input, button\") as FormSubmitter | null) : null\n  return candidate?.type == \"submit\" ? candidate : null\n}\n\nfunction clickCaptured(event: Event) {\n  const submitter = findSubmitterFromClickTarget(event.target)\n\n  if (submitter && submitter.form) {\n    submittersByForm.set(submitter.form, submitter)\n  }\n}\n\n;(function () {\n  if (\"submitter\" in Event.prototype) return\n\n  let prototype\n  // Certain versions of Safari 15 have a bug where they won't\n  // populate the submitter. This hurts TurboDrive's enable/disable detection.\n  // See https://bugs.webkit.org/show_bug.cgi?id=229660\n  if (\"SubmitEvent\" in window && /Apple Computer/.test(navigator.vendor)) {\n    prototype = window.SubmitEvent.prototype\n  } else if (\"SubmitEvent\" in window) {\n    return // polyfill not needed\n  } else {\n    prototype = window.Event.prototype\n  }\n\n  addEventListener(\"click\", clickCaptured, true)\n\n  Object.defineProperty(prototype, \"submitter\", {\n    get(): HTMLElement | undefined {\n      if (this.type == \"submit\" && this.target instanceof HTMLFormElement) {\n        return submittersByForm.get(this.target)\n      }\n    },\n  })\n})()\n\n// Ensure TypeScript parses this file as a module\nexport {}\n","import { FetchResponse } from \"../http/fetch_response\"\nimport { Snapshot } from \"../core/snapshot\"\nimport { LinkInterceptorDelegate } from \"../core/frames/link_interceptor\"\nimport { FormSubmitObserverDelegate } from \"../observers/form_submit_observer\"\n\nexport enum FrameLoadingStyle {\n  eager = \"eager\",\n  lazy = \"lazy\",\n}\n\nexport type FrameElementObservedAttribute = keyof FrameElement & (\"disabled\" | \"complete\" | \"loading\" | \"src\")\n\nexport interface FrameElementDelegate extends LinkInterceptorDelegate, FormSubmitObserverDelegate {\n  connect(): void\n  disconnect(): void\n  completeChanged(): void\n  loadingStyleChanged(): void\n  sourceURLChanged(): void\n  disabledChanged(): void\n  loadResponse(response: FetchResponse): void\n  fetchResponseLoaded: (fetchResponse: FetchResponse) => void\n  visitCachedSnapshot: (snapshot: Snapshot) => void\n  isLoading: boolean\n}\n\n/**\n * Contains a fragment of HTML which is updated based on navigation within\n * it (e.g. via links or form submissions).\n *\n * @customElement turbo-frame\n * @example\n *   <turbo-frame id=\"messages\">\n *     <a href=\"/messages/expanded\">\n *       Show all expanded messages in this frame.\n *     </a>\n *\n *     <form action=\"/messages\">\n *       Show response from this form within this frame.\n *     </form>\n *   </turbo-frame>\n */\nexport class FrameElement extends HTMLElement {\n  static delegateConstructor: new (element: FrameElement) => FrameElementDelegate\n\n  loaded: Promise<FetchResponse | void> = Promise.resolve()\n  readonly delegate: FrameElementDelegate\n\n  static get observedAttributes(): FrameElementObservedAttribute[] {\n    return [\"disabled\", \"complete\", \"loading\", \"src\"]\n  }\n\n  constructor() {\n    super()\n    this.delegate = new FrameElement.delegateConstructor(this)\n  }\n\n  connectedCallback() {\n    this.delegate.connect()\n  }\n\n  disconnectedCallback() {\n    this.delegate.disconnect()\n  }\n\n  reload() {\n    const { src } = this\n    this.removeAttribute(\"complete\")\n    this.src = null\n    this.src = src\n  }\n\n  attributeChangedCallback(name: string) {\n    if (name == \"loading\") {\n      this.delegate.loadingStyleChanged()\n    } else if (name == \"complete\") {\n      this.delegate.completeChanged()\n    } else if (name == \"src\") {\n      this.delegate.sourceURLChanged()\n    } else {\n      this.delegate.disabledChanged()\n    }\n  }\n\n  /**\n   * Gets the URL to lazily load source HTML from\n   */\n  get src() {\n    return this.getAttribute(\"src\")\n  }\n\n  /**\n   * Sets the URL to lazily load source HTML from\n   */\n  set src(value: string | null) {\n    if (value) {\n      this.setAttribute(\"src\", value)\n    } else {\n      this.removeAttribute(\"src\")\n    }\n  }\n\n  /**\n   * Determines if the element is loading\n   */\n  get loading(): FrameLoadingStyle {\n    return frameLoadingStyleFromString(this.getAttribute(\"loading\") || \"\")\n  }\n\n  /**\n   * Sets the value of if the element is loading\n   */\n  set loading(value: FrameLoadingStyle) {\n    if (value) {\n      this.setAttribute(\"loading\", value)\n    } else {\n      this.removeAttribute(\"loading\")\n    }\n  }\n\n  /**\n   * Gets the disabled state of the frame.\n   *\n   * If disabled, no requests will be intercepted by the frame.\n   */\n  get disabled() {\n    return this.hasAttribute(\"disabled\")\n  }\n\n  /**\n   * Sets the disabled state of the frame.\n   *\n   * If disabled, no requests will be intercepted by the frame.\n   */\n  set disabled(value: boolean) {\n    if (value) {\n      this.setAttribute(\"disabled\", \"\")\n    } else {\n      this.removeAttribute(\"disabled\")\n    }\n  }\n\n  /**\n   * Gets the autoscroll state of the frame.\n   *\n   * If true, the frame will be scrolled into view automatically on update.\n   */\n  get autoscroll() {\n    return this.hasAttribute(\"autoscroll\")\n  }\n\n  /**\n   * Sets the autoscroll state of the frame.\n   *\n   * If true, the frame will be scrolled into view automatically on update.\n   */\n  set autoscroll(value: boolean) {\n    if (value) {\n      this.setAttribute(\"autoscroll\", \"\")\n    } else {\n      this.removeAttribute(\"autoscroll\")\n    }\n  }\n\n  /**\n   * Determines if the element has finished loading\n   */\n  get complete() {\n    return !this.delegate.isLoading\n  }\n\n  /**\n   * Gets the active state of the frame.\n   *\n   * If inactive, source changes will not be observed.\n   */\n  get isActive() {\n    return this.ownerDocument === document && !this.isPreview\n  }\n\n  /**\n   * Sets the active state of the frame.\n   *\n   * If inactive, source changes will not be observed.\n   */\n  get isPreview() {\n    return this.ownerDocument?.documentElement?.hasAttribute(\"data-turbo-preview\")\n  }\n}\n\nfunction frameLoadingStyleFromString(style: string) {\n  switch (style.toLowerCase()) {\n    case \"lazy\":\n      return FrameLoadingStyle.lazy\n    default:\n      return FrameLoadingStyle.eager\n  }\n}\n","export type Locatable = URL | string\n\nexport function expandURL(locatable: Locatable) {\n  return new URL(locatable.toString(), document.baseURI)\n}\n\nexport function getAnchor(url: URL) {\n  let anchorMatch\n  if (url.hash) {\n    return url.hash.slice(1)\n    // eslint-disable-next-line no-cond-assign\n  } else if ((anchorMatch = url.href.match(/#(.*)$/))) {\n    return anchorMatch[1]\n  }\n}\n\nexport function getAction(form: HTMLFormElement, submitter?: HTMLElement) {\n  const action = submitter?.getAttribute(\"formaction\") || form.getAttribute(\"action\") || form.action\n\n  return expandURL(action)\n}\n\nexport function getExtension(url: URL) {\n  return (getLastPathComponent(url).match(/\\.[^.]*$/) || [])[0] || \"\"\n}\n\nexport function isHTML(url: URL) {\n  return !!getExtension(url).match(/^(?:|\\.(?:htm|html|xhtml|php))$/)\n}\n\nexport function isPrefixedBy(baseURL: URL, url: URL) {\n  const prefix = getPrefix(url)\n  return baseURL.href === expandURL(prefix).href || baseURL.href.startsWith(prefix)\n}\n\nexport function locationIsVisitable(location: URL, rootLocation: URL) {\n  return isPrefixedBy(location, rootLocation) && isHTML(location)\n}\n\nexport function getRequestURL(url: URL) {\n  const anchor = getAnchor(url)\n  return anchor != null ? url.href.slice(0, -(anchor.length + 1)) : url.href\n}\n\nexport function toCacheKey(url: URL) {\n  return getRequestURL(url)\n}\n\nexport function urlsAreEqual(left: string, right: string) {\n  return expandURL(left).href == expandURL(right).href\n}\n\nfunction getPathComponents(url: URL) {\n  return url.pathname.split(\"/\").slice(1)\n}\n\nfunction getLastPathComponent(url: URL) {\n  return getPathComponents(url).slice(-1)[0]\n}\n\nfunction getPrefix(url: URL) {\n  return addTrailingSlash(url.origin + url.pathname)\n}\n\nfunction addTrailingSlash(value: string) {\n  return value.endsWith(\"/\") ? value : value + \"/\"\n}\n","import { expandURL } from \"../core/url\"\n\nexport class FetchResponse {\n  readonly response: Response\n\n  constructor(response: Response) {\n    this.response = response\n  }\n\n  get succeeded() {\n    return this.response.ok\n  }\n\n  get failed() {\n    return !this.succeeded\n  }\n\n  get clientError() {\n    return this.statusCode >= 400 && this.statusCode <= 499\n  }\n\n  get serverError() {\n    return this.statusCode >= 500 && this.statusCode <= 599\n  }\n\n  get redirected() {\n    return this.response.redirected\n  }\n\n  get location(): URL {\n    return expandURL(this.response.url)\n  }\n\n  get isHTML() {\n    return this.contentType && this.contentType.match(/^(?:text\\/([^\\s;,]+\\b)?html|application\\/xhtml\\+xml)\\b/)\n  }\n\n  get statusCode() {\n    return this.response.status\n  }\n\n  get contentType() {\n    return this.header(\"Content-Type\")\n  }\n\n  get responseText(): Promise<string> {\n    return this.response.clone().text()\n  }\n\n  get responseHTML(): Promise<string | undefined> {\n    if (this.isHTML) {\n      return this.response.clone().text()\n    } else {\n      return Promise.resolve(undefined)\n    }\n  }\n\n  header(name: string) {\n    return this.response.headers.get(name)\n  }\n}\n","export type Action = \"advance\" | \"replace\" | \"restore\"\n\nexport function isAction(action: any): action is Action {\n  return action == \"advance\" || action == \"replace\" || action == \"restore\"\n}\n\nexport type Position = { x: number; y: number }\n\nexport type StreamSource = {\n  addEventListener(\n    type: \"message\",\n    listener: (event: MessageEvent) => void,\n    options?: boolean | AddEventListenerOptions\n  ): void\n  removeEventListener(\n    type: \"message\",\n    listener: (event: MessageEvent) => void,\n    options?: boolean | EventListenerOptions\n  ): void\n}\n","import { Action, isAction } from \"./core/types\"\n\nexport type DispatchOptions<T extends CustomEvent> = {\n  target: EventTarget\n  cancelable: boolean\n  detail: T[\"detail\"]\n}\n\nexport function dispatch<T extends CustomEvent>(\n  eventName: string,\n  { target, cancelable, detail }: Partial<DispatchOptions<T>> = {}\n) {\n  const event = new CustomEvent<T[\"detail\"]>(eventName, {\n    cancelable,\n    bubbles: true,\n    detail,\n  })\n\n  if (target && (target as Element).isConnected) {\n    target.dispatchEvent(event)\n  } else {\n    document.documentElement.dispatchEvent(event)\n  }\n\n  return event\n}\n\nexport function nextAnimationFrame() {\n  return new Promise<void>((resolve) => requestAnimationFrame(() => resolve()))\n}\n\nexport function nextEventLoopTick() {\n  return new Promise<void>((resolve) => setTimeout(() => resolve(), 0))\n}\n\nexport function nextMicrotask() {\n  return Promise.resolve()\n}\n\nexport function parseHTMLDocument(html = \"\") {\n  return new DOMParser().parseFromString(html, \"text/html\")\n}\n\nexport function unindent(strings: TemplateStringsArray, ...values: any[]): string {\n  const lines = interpolate(strings, values).replace(/^\\n/, \"\").split(\"\\n\")\n  const match = lines[0].match(/^\\s+/)\n  const indent = match ? match[0].length : 0\n  return lines.map((line) => line.slice(indent)).join(\"\\n\")\n}\n\nfunction interpolate(strings: TemplateStringsArray, values: any[]) {\n  return strings.reduce((result, string, i) => {\n    const value = values[i] == undefined ? \"\" : values[i]\n    return result + string + value\n  }, \"\")\n}\n\nexport function uuid() {\n  return Array.from({ length: 36 })\n    .map((_, i) => {\n      if (i == 8 || i == 13 || i == 18 || i == 23) {\n        return \"-\"\n      } else if (i == 14) {\n        return \"4\"\n      } else if (i == 19) {\n        return (Math.floor(Math.random() * 4) + 8).toString(16)\n      } else {\n        return Math.floor(Math.random() * 15).toString(16)\n      }\n    })\n    .join(\"\")\n}\n\nexport function getAttribute(attributeName: string, ...elements: (Element | undefined)[]): string | null {\n  for (const value of elements.map((element) => element?.getAttribute(attributeName))) {\n    if (typeof value == \"string\") return value\n  }\n\n  return null\n}\n\nexport function markAsBusy(...elements: Element[]) {\n  for (const element of elements) {\n    if (element.localName == \"turbo-frame\") {\n      element.setAttribute(\"busy\", \"\")\n    }\n    element.setAttribute(\"aria-busy\", \"true\")\n  }\n}\n\nexport function clearBusyState(...elements: Element[]) {\n  for (const element of elements) {\n    if (element.localName == \"turbo-frame\") {\n      element.removeAttribute(\"busy\")\n    }\n\n    element.removeAttribute(\"aria-busy\")\n  }\n}\n\nexport function getHistoryMethodForAction(action: Action) {\n  switch (action) {\n    case \"replace\":\n      return history.replaceState\n    case \"advance\":\n    case \"restore\":\n      return history.pushState\n  }\n}\n\nexport function getVisitAction(...elements: (Element | undefined)[]): Action | null {\n  const action = getAttribute(\"data-turbo-action\", ...elements)\n\n  return isAction(action) ? action : null\n}\n\nexport function getMetaElement(name: string): HTMLMetaElement | null {\n  return document.querySelector(`meta[name=\"${name}\"]`)\n}\n\nexport function getMetaContent(name: string) {\n  const element = getMetaElement(name)\n  return element && element.content\n}\n\nexport function setMetaContent(name: string, content: string) {\n  let element = getMetaElement(name)\n\n  if (!element) {\n    element = document.createElement(\"meta\")\n    element.setAttribute(\"name\", name)\n\n    document.head.appendChild(element)\n  }\n\n  element.setAttribute(\"content\", content)\n\n  return element\n}\n","import { FetchResponse } from \"./fetch_response\"\nimport { FrameElement } from \"../elements/frame_element\"\nimport { dispatch } from \"../util\"\n\nexport type TurboBeforeFetchRequestEvent = CustomEvent<{\n  fetchOptions: RequestInit\n  url: URL\n  resume: (value: any) => void\n}>\nexport type TurboBeforeFetchResponseEvent = CustomEvent<{\n  fetchResponse: FetchResponse\n}>\n\nexport interface FetchRequestDelegate {\n  referrer?: URL\n\n  prepareHeadersForRequest?(headers: FetchRequestHeaders, request: FetchRequest): void\n  requestStarted(request: FetchRequest): void\n  requestPreventedHandlingResponse(request: FetchRequest, response: FetchResponse): void\n  requestSucceededWithResponse(request: FetchRequest, response: FetchResponse): void\n  requestFailedWithResponse(request: FetchRequest, response: FetchResponse): void\n  requestErrored(request: FetchRequest, error: Error): void\n  requestFinished(request: FetchRequest): void\n}\n\nexport enum FetchMethod {\n  get,\n  post,\n  put,\n  patch,\n  delete,\n}\n\nexport function fetchMethodFromString(method: string) {\n  switch (method.toLowerCase()) {\n    case \"get\":\n      return FetchMethod.get\n    case \"post\":\n      return FetchMethod.post\n    case \"put\":\n      return FetchMethod.put\n    case \"patch\":\n      return FetchMethod.patch\n    case \"delete\":\n      return FetchMethod.delete\n  }\n}\n\nexport type FetchRequestBody = FormData | URLSearchParams\n\nexport type FetchRequestHeaders = { [header: string]: string }\n\nexport interface FetchRequestOptions {\n  headers: FetchRequestHeaders\n  body: FetchRequestBody\n  followRedirects: boolean\n}\n\nexport class FetchRequest {\n  readonly delegate: FetchRequestDelegate\n  readonly method: FetchMethod\n  readonly headers: FetchRequestHeaders\n  readonly url: URL\n  readonly body?: FetchRequestBody\n  readonly target?: FrameElement | HTMLFormElement | null\n  readonly abortController = new AbortController()\n  private resolveRequestPromise = (_value: any) => {}\n\n  constructor(\n    delegate: FetchRequestDelegate,\n    method: FetchMethod,\n    location: URL,\n    body: FetchRequestBody = new URLSearchParams(),\n    target: FrameElement | HTMLFormElement | null = null\n  ) {\n    this.delegate = delegate\n    this.method = method\n    this.headers = this.defaultHeaders\n    this.body = body\n    this.url = location\n    this.target = target\n  }\n\n  get location(): URL {\n    return this.url\n  }\n\n  get params(): URLSearchParams {\n    return this.url.searchParams\n  }\n\n  get entries() {\n    return this.body ? Array.from(this.body.entries()) : []\n  }\n\n  cancel() {\n    this.abortController.abort()\n  }\n\n  async perform(): Promise<FetchResponse | void> {\n    const { fetchOptions } = this\n    this.delegate.prepareHeadersForRequest?.(this.headers, this)\n    await this.allowRequestToBeIntercepted(fetchOptions)\n    try {\n      this.delegate.requestStarted(this)\n      const response = await fetch(this.url.href, fetchOptions)\n      return await this.receive(response)\n    } catch (error) {\n      if ((error as Error).name !== \"AbortError\") {\n        this.delegate.requestErrored(this, error as Error)\n        throw error\n      }\n    } finally {\n      this.delegate.requestFinished(this)\n    }\n  }\n\n  async receive(response: Response): Promise<FetchResponse> {\n    const fetchResponse = new FetchResponse(response)\n    const event = dispatch<TurboBeforeFetchResponseEvent>(\"turbo:before-fetch-response\", {\n      cancelable: true,\n      detail: { fetchResponse },\n      target: this.target as EventTarget,\n    })\n    if (event.defaultPrevented) {\n      this.delegate.requestPreventedHandlingResponse(this, fetchResponse)\n    } else if (fetchResponse.succeeded) {\n      this.delegate.requestSucceededWithResponse(this, fetchResponse)\n    } else {\n      this.delegate.requestFailedWithResponse(this, fetchResponse)\n    }\n    return fetchResponse\n  }\n\n  get fetchOptions(): RequestInit {\n    return {\n      method: FetchMethod[this.method].toUpperCase(),\n      credentials: \"same-origin\",\n      headers: this.headers,\n      redirect: \"follow\",\n      body: this.isIdempotent ? null : this.body,\n      signal: this.abortSignal,\n      referrer: this.delegate.referrer?.href,\n    }\n  }\n\n  get defaultHeaders() {\n    return {\n      Accept: \"text/html, application/xhtml+xml\",\n    }\n  }\n\n  get isIdempotent() {\n    return this.method == FetchMethod.get\n  }\n\n  get abortSignal() {\n    return this.abortController.signal\n  }\n\n  private async allowRequestToBeIntercepted(fetchOptions: RequestInit) {\n    const requestInterception = new Promise((resolve) => (this.resolveRequestPromise = resolve))\n    const event = dispatch<TurboBeforeFetchRequestEvent>(\"turbo:before-fetch-request\", {\n      cancelable: true,\n      detail: {\n        fetchOptions,\n        url: this.url,\n        resume: this.resolveRequestPromise,\n      },\n      target: this.target as EventTarget,\n    })\n    if (event.defaultPrevented) await requestInterception\n  }\n}\n","export interface AppearanceObserverDelegate {\n  elementAppearedInViewport(element: Element): void\n}\n\nexport class AppearanceObserver {\n  readonly delegate: AppearanceObserverDelegate\n  readonly element: Element\n  readonly intersectionObserver: IntersectionObserver\n  started = false\n\n  constructor(delegate: AppearanceObserverDelegate, element: Element) {\n    this.delegate = delegate\n    this.element = element\n    this.intersectionObserver = new IntersectionObserver(this.intersect)\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      this.intersectionObserver.observe(this.element)\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false\n      this.intersectionObserver.unobserve(this.element)\n    }\n  }\n\n  intersect: IntersectionObserverCallback = (entries) => {\n    const lastEntry = entries.slice(-1)[0]\n    if (lastEntry?.isIntersecting) {\n      this.delegate.elementAppearedInViewport(this.element)\n    }\n  }\n}\n","import { StreamElement } from \"../../elements/stream_element\"\n\nexport class StreamMessage {\n  static readonly contentType = \"text/vnd.turbo-stream.html\"\n  readonly templateElement = document.createElement(\"template\")\n\n  static wrap(message: StreamMessage | string) {\n    if (typeof message == \"string\") {\n      return new this(message)\n    } else {\n      return message\n    }\n  }\n\n  constructor(html: string) {\n    this.templateElement.innerHTML = html\n  }\n\n  get fragment() {\n    const fragment = document.createDocumentFragment()\n    for (const element of this.foreignElements) {\n      fragment.appendChild(document.importNode(element, true))\n    }\n    return fragment\n  }\n\n  get foreignElements() {\n    return this.templateChildren.reduce((streamElements, child) => {\n      if (child.tagName.toLowerCase() == \"turbo-stream\") {\n        return [...streamElements, child as StreamElement]\n      } else {\n        return streamElements\n      }\n    }, [] as StreamElement[])\n  }\n\n  get templateChildren() {\n    return Array.from(this.templateElement.content.children)\n  }\n}\n","import { FetchRequest, FetchMethod, fetchMethodFromString, FetchRequestHeaders } from \"../../http/fetch_request\"\nimport { FetchResponse } from \"../../http/fetch_response\"\nimport { expandURL } from \"../url\"\nimport { dispatch, getMetaContent } from \"../../util\"\nimport { StreamMessage } from \"../streams/stream_message\"\n\nexport interface FormSubmissionDelegate {\n  formSubmissionStarted(formSubmission: FormSubmission): void\n  formSubmissionSucceededWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse): void\n  formSubmissionFailedWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse): void\n  formSubmissionErrored(formSubmission: FormSubmission, error: Error): void\n  formSubmissionFinished(formSubmission: FormSubmission): void\n}\n\nexport type FormSubmissionResult = { success: boolean; fetchResponse: FetchResponse } | { success: false; error: Error }\n\nexport enum FormSubmissionState {\n  initialized,\n  requesting,\n  waiting,\n  receiving,\n  stopping,\n  stopped,\n}\n\nenum FormEnctype {\n  urlEncoded = \"application/x-www-form-urlencoded\",\n  multipart = \"multipart/form-data\",\n  plain = \"text/plain\",\n}\n\nexport type TurboSubmitStartEvent = CustomEvent<{ formSubmission: FormSubmission }>\nexport type TurboSubmitEndEvent = CustomEvent<\n  { formSubmission: FormSubmission } & { [K in keyof FormSubmissionResult]?: FormSubmissionResult[K] }\n>\n\nfunction formEnctypeFromString(encoding: string): FormEnctype {\n  switch (encoding.toLowerCase()) {\n    case FormEnctype.multipart:\n      return FormEnctype.multipart\n    case FormEnctype.plain:\n      return FormEnctype.plain\n    default:\n      return FormEnctype.urlEncoded\n  }\n}\n\nexport class FormSubmission {\n  readonly delegate: FormSubmissionDelegate\n  readonly formElement: HTMLFormElement\n  readonly submitter?: HTMLElement\n  readonly formData: FormData\n  readonly location: URL\n  readonly fetchRequest: FetchRequest\n  readonly mustRedirect: boolean\n  state = FormSubmissionState.initialized\n  result?: FormSubmissionResult\n\n  static confirmMethod(message: string, _element: HTMLFormElement): Promise<boolean> {\n    return Promise.resolve(confirm(message))\n  }\n\n  constructor(\n    delegate: FormSubmissionDelegate,\n    formElement: HTMLFormElement,\n    submitter?: HTMLElement,\n    mustRedirect = false\n  ) {\n    this.delegate = delegate\n    this.formElement = formElement\n    this.submitter = submitter\n    this.formData = buildFormData(formElement, submitter)\n    this.location = expandURL(this.action)\n    if (this.method == FetchMethod.get) {\n      mergeFormDataEntries(this.location, [...this.body.entries()])\n    }\n    this.fetchRequest = new FetchRequest(this, this.method, this.location, this.body, this.formElement)\n    this.mustRedirect = mustRedirect\n  }\n\n  get method(): FetchMethod {\n    const method = this.submitter?.getAttribute(\"formmethod\") || this.formElement.getAttribute(\"method\") || \"\"\n    return fetchMethodFromString(method.toLowerCase()) || FetchMethod.get\n  }\n\n  get action(): string {\n    const formElementAction = typeof this.formElement.action === \"string\" ? this.formElement.action : null\n\n    if (this.submitter?.hasAttribute(\"formaction\")) {\n      return this.submitter.getAttribute(\"formaction\") || \"\"\n    } else {\n      return this.formElement.getAttribute(\"action\") || formElementAction || \"\"\n    }\n  }\n\n  get body() {\n    if (this.enctype == FormEnctype.urlEncoded || this.method == FetchMethod.get) {\n      return new URLSearchParams(this.stringFormData)\n    } else {\n      return this.formData\n    }\n  }\n\n  get enctype(): FormEnctype {\n    return formEnctypeFromString(this.submitter?.getAttribute(\"formenctype\") || this.formElement.enctype)\n  }\n\n  get isIdempotent() {\n    return this.fetchRequest.isIdempotent\n  }\n\n  get stringFormData() {\n    return [...this.formData].reduce((entries, [name, value]) => {\n      return entries.concat(typeof value == \"string\" ? [[name, value]] : [])\n    }, [] as [string, string][])\n  }\n\n  get confirmationMessage() {\n    return this.submitter?.getAttribute(\"data-turbo-confirm\") || this.formElement.getAttribute(\"data-turbo-confirm\")\n  }\n\n  get needsConfirmation() {\n    return this.confirmationMessage !== null\n  }\n\n  // The submission process\n\n  async start() {\n    const { initialized, requesting } = FormSubmissionState\n\n    if (this.needsConfirmation) {\n      const answer = await FormSubmission.confirmMethod(this.confirmationMessage!, this.formElement)\n      if (!answer) {\n        return\n      }\n    }\n\n    if (this.state == initialized) {\n      this.state = requesting\n      return this.fetchRequest.perform()\n    }\n  }\n\n  stop() {\n    const { stopping, stopped } = FormSubmissionState\n    if (this.state != stopping && this.state != stopped) {\n      this.state = stopping\n      this.fetchRequest.cancel()\n      return true\n    }\n  }\n\n  // Fetch request delegate\n\n  prepareHeadersForRequest(headers: FetchRequestHeaders, request: FetchRequest) {\n    if (!request.isIdempotent) {\n      const token = getCookieValue(getMetaContent(\"csrf-param\")) || getMetaContent(\"csrf-token\")\n      if (token) {\n        headers[\"X-CSRF-Token\"] = token\n      }\n    }\n\n    if (this.requestAcceptsTurboStreamResponse(request)) {\n      headers[\"Accept\"] = [StreamMessage.contentType, headers[\"Accept\"]].join(\", \")\n    }\n  }\n\n  requestStarted(_request: FetchRequest) {\n    this.state = FormSubmissionState.waiting\n    this.submitter?.setAttribute(\"disabled\", \"\")\n    dispatch<TurboSubmitStartEvent>(\"turbo:submit-start\", {\n      target: this.formElement,\n      detail: { formSubmission: this },\n    })\n    this.delegate.formSubmissionStarted(this)\n  }\n\n  requestPreventedHandlingResponse(request: FetchRequest, response: FetchResponse) {\n    this.result = { success: response.succeeded, fetchResponse: response }\n  }\n\n  requestSucceededWithResponse(request: FetchRequest, response: FetchResponse) {\n    if (response.clientError || response.serverError) {\n      this.delegate.formSubmissionFailedWithResponse(this, response)\n    } else if (this.requestMustRedirect(request) && responseSucceededWithoutRedirect(response)) {\n      const error = new Error(\"Form responses must redirect to another location\")\n      this.delegate.formSubmissionErrored(this, error)\n    } else {\n      this.state = FormSubmissionState.receiving\n      this.result = { success: true, fetchResponse: response }\n      this.delegate.formSubmissionSucceededWithResponse(this, response)\n    }\n  }\n\n  requestFailedWithResponse(request: FetchRequest, response: FetchResponse) {\n    this.result = { success: false, fetchResponse: response }\n    this.delegate.formSubmissionFailedWithResponse(this, response)\n  }\n\n  requestErrored(request: FetchRequest, error: Error) {\n    this.result = { success: false, error }\n    this.delegate.formSubmissionErrored(this, error)\n  }\n\n  requestFinished(_request: FetchRequest) {\n    this.state = FormSubmissionState.stopped\n    this.submitter?.removeAttribute(\"disabled\")\n    dispatch<TurboSubmitEndEvent>(\"turbo:submit-end\", {\n      target: this.formElement,\n      detail: { formSubmission: this, ...this.result },\n    })\n    this.delegate.formSubmissionFinished(this)\n  }\n\n  // Private\n\n  requestMustRedirect(request: FetchRequest) {\n    return !request.isIdempotent && this.mustRedirect\n  }\n\n  requestAcceptsTurboStreamResponse(request: FetchRequest) {\n    return !request.isIdempotent || this.formElement.hasAttribute(\"data-turbo-stream\")\n  }\n}\n\nfunction buildFormData(formElement: HTMLFormElement, submitter?: HTMLElement): FormData {\n  const formData = new FormData(formElement)\n  const name = submitter?.getAttribute(\"name\")\n  const value = submitter?.getAttribute(\"value\")\n\n  if (name && value != null && formData.get(name) != value) {\n    formData.append(name, value)\n  }\n\n  return formData\n}\n\nfunction getCookieValue(cookieName: string | null) {\n  if (cookieName != null) {\n    const cookies = document.cookie ? document.cookie.split(\"; \") : []\n    const cookie = cookies.find((cookie) => cookie.startsWith(cookieName))\n    if (cookie) {\n      const value = cookie.split(\"=\").slice(1).join(\"=\")\n      return value ? decodeURIComponent(value) : undefined\n    }\n  }\n}\n\nfunction responseSucceededWithoutRedirect(response: FetchResponse) {\n  return response.statusCode == 200 && !response.redirected\n}\n\nfunction mergeFormDataEntries(url: URL, entries: [string, FormDataEntryValue][]): URL {\n  const searchParams = new URLSearchParams()\n\n  for (const [name, value] of entries) {\n    if (value instanceof File) continue\n\n    searchParams.append(name, value)\n  }\n\n  url.search = searchParams.toString()\n\n  return url\n}\n","export class Snapshot<E extends Element = Element> {\n  readonly element: E\n\n  constructor(element: E) {\n    this.element = element\n  }\n\n  get activeElement() {\n    return this.element.ownerDocument.activeElement\n  }\n\n  get children() {\n    return [...this.element.children]\n  }\n\n  hasAnchor(anchor: string | undefined) {\n    return this.getElementForAnchor(anchor) != null\n  }\n\n  getElementForAnchor(anchor: string | undefined) {\n    return anchor ? this.element.querySelector(`[id='${anchor}'], a[name='${anchor}']`) : null\n  }\n\n  get isConnected() {\n    return this.element.isConnected\n  }\n\n  get firstAutofocusableElement() {\n    return this.element.querySelector(\"[autofocus]\")\n  }\n\n  get permanentElements() {\n    return [...this.element.querySelectorAll(\"[id][data-turbo-permanent]\")]\n  }\n\n  getPermanentElementById(id: string) {\n    return this.element.querySelector(`#${id}[data-turbo-permanent]`)\n  }\n\n  getPermanentElementMapForSnapshot(snapshot: Snapshot) {\n    const permanentElementMap: PermanentElementMap = {}\n\n    for (const currentPermanentElement of this.permanentElements) {\n      const { id } = currentPermanentElement\n      const newPermanentElement = snapshot.getPermanentElementById(id)\n      if (newPermanentElement) {\n        permanentElementMap[id] = [currentPermanentElement, newPermanentElement]\n      }\n    }\n\n    return permanentElementMap\n  }\n}\n\nexport type PermanentElementMap = Record<string, [Element, Element]>\n","export interface FormSubmitObserverDelegate {\n  willSubmitForm(form: HTMLFormElement, submitter?: HTMLElement): boolean\n  formSubmitted(form: HTMLFormElement, submitter?: HTMLElement): void\n}\n\nexport class FormSubmitObserver {\n  readonly delegate: FormSubmitObserverDelegate\n  readonly eventTarget: EventTarget\n  started = false\n\n  constructor(delegate: FormSubmitObserverDelegate, eventTarget: EventTarget) {\n    this.delegate = delegate\n    this.eventTarget = eventTarget\n  }\n\n  start() {\n    if (!this.started) {\n      this.eventTarget.addEventListener(\"submit\", this.submitCaptured, true)\n      this.started = true\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.eventTarget.removeEventListener(\"submit\", this.submitCaptured, true)\n      this.started = false\n    }\n  }\n\n  submitCaptured = () => {\n    this.eventTarget.removeEventListener(\"submit\", this.submitBubbled, false)\n    this.eventTarget.addEventListener(\"submit\", this.submitBubbled, false)\n  }\n\n  submitBubbled = <EventListener>((event: SubmitEvent) => {\n    if (!event.defaultPrevented) {\n      const form = event.target instanceof HTMLFormElement ? event.target : undefined\n      const submitter = event.submitter || undefined\n\n      if (\n        form &&\n        submissionDoesNotDismissDialog(form, submitter) &&\n        submissionDoesNotTargetIFrame(form, submitter) &&\n        this.delegate.willSubmitForm(form, submitter)\n      ) {\n        event.preventDefault()\n        this.delegate.formSubmitted(form, submitter)\n      }\n    }\n  })\n}\n\nfunction submissionDoesNotDismissDialog(form: HTMLFormElement, submitter?: HTMLElement): boolean {\n  const method = submitter?.getAttribute(\"formmethod\") || form.getAttribute(\"method\")\n\n  return method != \"dialog\"\n}\n\nfunction submissionDoesNotTargetIFrame(form: HTMLFormElement, submitter?: HTMLElement): boolean {\n  const target = submitter?.getAttribute(\"formtarget\") || form.target\n\n  for (const element of document.getElementsByName(target)) {\n    if (element instanceof HTMLIFrameElement) return false\n  }\n\n  return true\n}\n","import { ReloadReason } from \"./native/browser_adapter\"\nimport { Renderer, Render } from \"./renderer\"\nimport { Snapshot } from \"./snapshot\"\nimport { Position } from \"./types\"\nimport { getAnchor } from \"./url\"\n\nexport interface ViewRenderOptions<E> {\n  resume: (value: any) => void\n  render: Render<E>\n}\n\nexport interface ViewDelegate<E extends Element, S extends Snapshot<E>> {\n  allowsImmediateRender(snapshot: S, options: ViewRenderOptions<E>): boolean\n  preloadOnLoadLinksForView(element: Element): void\n  viewRenderedSnapshot(snapshot: S, isPreview: boolean): void\n  viewInvalidated(reason: ReloadReason): void\n}\n\nexport abstract class View<\n  E extends Element,\n  S extends Snapshot<E> = Snapshot<E>,\n  R extends Renderer<E, S> = Renderer<E, S>,\n  D extends ViewDelegate<E, S> = ViewDelegate<E, S>\n> {\n  readonly delegate: D\n  readonly element: E\n  renderer?: R\n  abstract readonly snapshot: S\n  renderPromise?: Promise<void>\n  private resolveRenderPromise = (_value: any) => {}\n  private resolveInterceptionPromise = (_value: any) => {}\n\n  constructor(delegate: D, element: E) {\n    this.delegate = delegate\n    this.element = element\n  }\n\n  // Scrolling\n\n  scrollToAnchor(anchor: string | undefined) {\n    const element = this.snapshot.getElementForAnchor(anchor)\n    if (element) {\n      this.scrollToElement(element)\n      this.focusElement(element)\n    } else {\n      this.scrollToPosition({ x: 0, y: 0 })\n    }\n  }\n\n  scrollToAnchorFromLocation(location: URL) {\n    this.scrollToAnchor(getAnchor(location))\n  }\n\n  scrollToElement(element: Element) {\n    element.scrollIntoView()\n  }\n\n  focusElement(element: Element) {\n    if (element instanceof HTMLElement) {\n      if (element.hasAttribute(\"tabindex\")) {\n        element.focus()\n      } else {\n        element.setAttribute(\"tabindex\", \"-1\")\n        element.focus()\n        element.removeAttribute(\"tabindex\")\n      }\n    }\n  }\n\n  scrollToPosition({ x, y }: Position) {\n    this.scrollRoot.scrollTo(x, y)\n  }\n\n  scrollToTop() {\n    this.scrollToPosition({ x: 0, y: 0 })\n  }\n\n  get scrollRoot(): { scrollTo(x: number, y: number): void } {\n    return window\n  }\n\n  // Rendering\n\n  async render(renderer: R) {\n    const { isPreview, shouldRender, newSnapshot: snapshot } = renderer\n    if (shouldRender) {\n      try {\n        this.renderPromise = new Promise((resolve) => (this.resolveRenderPromise = resolve))\n        this.renderer = renderer\n        this.prepareToRenderSnapshot(renderer)\n\n        const renderInterception = new Promise((resolve) => (this.resolveInterceptionPromise = resolve))\n        const options = { resume: this.resolveInterceptionPromise, render: this.renderer.renderElement }\n        const immediateRender = this.delegate.allowsImmediateRender(snapshot, options)\n        if (!immediateRender) await renderInterception\n\n        await this.renderSnapshot(renderer)\n        this.delegate.viewRenderedSnapshot(snapshot, isPreview)\n        this.delegate.preloadOnLoadLinksForView(this.element)\n        this.finishRenderingSnapshot(renderer)\n      } finally {\n        delete this.renderer\n        this.resolveRenderPromise(undefined)\n        delete this.renderPromise\n      }\n    } else {\n      this.invalidate(renderer.reloadReason)\n    }\n  }\n\n  invalidate(reason: ReloadReason) {\n    this.delegate.viewInvalidated(reason)\n  }\n\n  prepareToRenderSnapshot(renderer: R) {\n    this.markAsPreview(renderer.isPreview)\n    renderer.prepareToRender()\n  }\n\n  markAsPreview(isPreview: boolean) {\n    if (isPreview) {\n      this.element.setAttribute(\"data-turbo-preview\", \"\")\n    } else {\n      this.element.removeAttribute(\"data-turbo-preview\")\n    }\n  }\n\n  async renderSnapshot(renderer: R) {\n    await renderer.render()\n  }\n\n  finishRenderingSnapshot(renderer: R) {\n    renderer.finishRendering()\n  }\n}\n","import { FrameElement } from \"../../elements\"\nimport { Snapshot } from \"../snapshot\"\nimport { View, ViewRenderOptions } from \"../view\"\n\nexport type FrameViewRenderOptions = ViewRenderOptions<FrameElement>\n\nexport class FrameView extends View<FrameElement> {\n  invalidate() {\n    this.element.innerHTML = \"\"\n  }\n\n  get snapshot() {\n    return new Snapshot(this.element)\n  }\n}\n","import { TurboClickEvent, TurboBeforeVisitEvent } from \"../session\"\n\nexport interface LinkInterceptorDelegate {\n  shouldInterceptLinkClick(element: Element, url: string): boolean\n  linkClickIntercepted(element: Element, url: string): void\n}\n\nexport class LinkInterceptor {\n  readonly delegate: LinkInterceptorDelegate\n  readonly element: Element\n  private clickEvent?: Event\n\n  constructor(delegate: LinkInterceptorDelegate, element: Element) {\n    this.delegate = delegate\n    this.element = element\n  }\n\n  start() {\n    this.element.addEventListener(\"click\", this.clickBubbled)\n    document.addEventListener(\"turbo:click\", this.linkClicked)\n    document.addEventListener(\"turbo:before-visit\", this.willVisit)\n  }\n\n  stop() {\n    this.element.removeEventListener(\"click\", this.clickBubbled)\n    document.removeEventListener(\"turbo:click\", this.linkClicked)\n    document.removeEventListener(\"turbo:before-visit\", this.willVisit)\n  }\n\n  clickBubbled = (event: Event) => {\n    if (this.respondsToEventTarget(event.target)) {\n      this.clickEvent = event\n    } else {\n      delete this.clickEvent\n    }\n  }\n\n  linkClicked = <EventListener>((event: TurboClickEvent) => {\n    if (this.clickEvent && this.respondsToEventTarget(event.target) && event.target instanceof Element) {\n      if (this.delegate.shouldInterceptLinkClick(event.target, event.detail.url)) {\n        this.clickEvent.preventDefault()\n        event.preventDefault()\n        this.delegate.linkClickIntercepted(event.target, event.detail.url)\n      }\n    }\n    delete this.clickEvent\n  })\n\n  willVisit = <EventListener>((_event: TurboBeforeVisitEvent) => {\n    delete this.clickEvent\n  })\n\n  respondsToEventTarget(target: EventTarget | null) {\n    const element = target instanceof Element ? target : target instanceof Node ? target.parentElement : null\n    return element && element.closest(\"turbo-frame, html\") == this.element\n  }\n}\n","import { LinkInterceptor, LinkInterceptorDelegate } from \"../core/frames/link_interceptor\"\n\nexport type FormLinkInterceptorDelegate = {\n  shouldInterceptFormLinkClick(link: Element): boolean\n  formLinkClickIntercepted(link: Element, form: HTMLFormElement): void\n}\n\nexport class FormLinkInterceptor implements LinkInterceptorDelegate {\n  readonly linkInterceptor: LinkInterceptor\n  readonly delegate: FormLinkInterceptorDelegate\n\n  constructor(delegate: FormLinkInterceptorDelegate, element: HTMLElement) {\n    this.delegate = delegate\n    this.linkInterceptor = new LinkInterceptor(this, element)\n  }\n\n  start() {\n    this.linkInterceptor.start()\n  }\n\n  stop() {\n    this.linkInterceptor.stop()\n  }\n\n  shouldInterceptLinkClick(link: Element): boolean {\n    return (\n      this.delegate.shouldInterceptFormLinkClick(link) &&\n      (link.hasAttribute(\"data-turbo-method\") || link.hasAttribute(\"data-turbo-stream\"))\n    )\n  }\n\n  linkClickIntercepted(link: Element, action: string): void {\n    const form = document.createElement(\"form\")\n    form.setAttribute(\"data-turbo\", \"true\")\n    form.setAttribute(\"action\", action)\n    form.setAttribute(\"hidden\", \"\")\n\n    const method = link.getAttribute(\"data-turbo-method\")\n    if (method) form.setAttribute(\"method\", method)\n\n    const turboFrame = link.getAttribute(\"data-turbo-frame\")\n    if (turboFrame) form.setAttribute(\"data-turbo-frame\", turboFrame)\n\n    const turboConfirm = link.getAttribute(\"data-turbo-confirm\")\n    if (turboConfirm) form.setAttribute(\"data-turbo-confirm\", turboConfirm)\n\n    const turboStream = link.hasAttribute(\"data-turbo-stream\")\n    if (turboStream) form.setAttribute(\"data-turbo-stream\", \"\")\n\n    this.delegate.formLinkClickIntercepted(link, form)\n\n    document.body.appendChild(form)\n    form.requestSubmit()\n    form.remove()\n  }\n}\n","import { PermanentElementMap } from \"./snapshot\"\n\nexport interface BardoDelegate {\n  enteringBardo(currentPermanentElement: Element, newPermanentElement: Element): void\n  leavingBardo(currentPermanentElement: Element): void\n}\n\nexport class Bardo {\n  readonly permanentElementMap: PermanentElementMap\n  readonly delegate: BardoDelegate\n\n  static preservingPermanentElements(\n    delegate: BardoDelegate,\n    permanentElementMap: PermanentElementMap,\n    callback: () => void\n  ) {\n    const bardo = new this(delegate, permanentElementMap)\n    bardo.enter()\n    callback()\n    bardo.leave()\n  }\n\n  constructor(delegate: BardoDelegate, permanentElementMap: PermanentElementMap) {\n    this.delegate = delegate\n    this.permanentElementMap = permanentElementMap\n  }\n\n  enter() {\n    for (const id in this.permanentElementMap) {\n      const [currentPermanentElement, newPermanentElement] = this.permanentElementMap[id]\n      this.delegate.enteringBardo(currentPermanentElement, newPermanentElement)\n      this.replaceNewPermanentElementWithPlaceholder(newPermanentElement)\n    }\n  }\n\n  leave() {\n    for (const id in this.permanentElementMap) {\n      const [currentPermanentElement] = this.permanentElementMap[id]\n      this.replaceCurrentPermanentElementWithClone(currentPermanentElement)\n      this.replacePlaceholderWithPermanentElement(currentPermanentElement)\n      this.delegate.leavingBardo(currentPermanentElement)\n    }\n  }\n\n  replaceNewPermanentElementWithPlaceholder(permanentElement: Element) {\n    const placeholder = createPlaceholderForPermanentElement(permanentElement)\n    permanentElement.replaceWith(placeholder)\n  }\n\n  replaceCurrentPermanentElementWithClone(permanentElement: Element) {\n    const clone = permanentElement.cloneNode(true)\n    permanentElement.replaceWith(clone)\n  }\n\n  replacePlaceholderWithPermanentElement(permanentElement: Element) {\n    const placeholder = this.getPlaceholderById(permanentElement.id)\n    placeholder?.replaceWith(permanentElement)\n  }\n\n  getPlaceholderById(id: string) {\n    return this.placeholders.find((element) => element.content == id)\n  }\n\n  get placeholders(): HTMLMetaElement[] {\n    return [...document.querySelectorAll<HTMLMetaElement>(\"meta[name=turbo-permanent-placeholder][content]\")]\n  }\n}\n\nfunction createPlaceholderForPermanentElement(permanentElement: Element) {\n  const element = document.createElement(\"meta\")\n  element.setAttribute(\"name\", \"turbo-permanent-placeholder\")\n  element.setAttribute(\"content\", permanentElement.id)\n  return element\n}\n","import { Bardo, BardoDelegate } from \"./bardo\"\nimport { Snapshot } from \"./snapshot\"\nimport { ReloadReason } from \"./native/browser_adapter\"\nimport { getMetaContent } from \"../util\"\n\ntype ResolvingFunctions<T = unknown> = {\n  resolve(value: T | PromiseLike<T>): void\n  reject(reason?: any): void\n}\n\nexport type Render<E> = (newElement: E, currentElement: E) => void\n\nexport abstract class Renderer<E extends Element, S extends Snapshot<E> = Snapshot<E>> implements BardoDelegate {\n  readonly currentSnapshot: S\n  readonly newSnapshot: S\n  readonly isPreview: boolean\n  readonly willRender: boolean\n  readonly promise: Promise<void>\n  renderElement: Render<E>\n  private resolvingFunctions?: ResolvingFunctions<void>\n  private activeElement: Element | null = null\n\n  constructor(currentSnapshot: S, newSnapshot: S, renderElement: Render<E>, isPreview: boolean, willRender = true) {\n    this.currentSnapshot = currentSnapshot\n    this.newSnapshot = newSnapshot\n    this.isPreview = isPreview\n    this.willRender = willRender\n    this.renderElement = renderElement\n    this.promise = new Promise((resolve, reject) => (this.resolvingFunctions = { resolve, reject }))\n  }\n\n  get shouldRender() {\n    return true\n  }\n\n  get reloadReason(): ReloadReason {\n    return\n  }\n\n  prepareToRender() {\n    return\n  }\n\n  abstract render(): Promise<void>\n\n  finishRendering() {\n    if (this.resolvingFunctions) {\n      this.resolvingFunctions.resolve()\n      delete this.resolvingFunctions\n    }\n  }\n\n  createScriptElement(element: Element) {\n    if (element.getAttribute(\"data-turbo-eval\") == \"false\") {\n      return element\n    } else {\n      const createdScriptElement = document.createElement(\"script\")\n      if (this.cspNonce) {\n        createdScriptElement.nonce = this.cspNonce\n      }\n      createdScriptElement.textContent = element.textContent\n      createdScriptElement.async = false\n      copyElementAttributes(createdScriptElement, element)\n      return createdScriptElement\n    }\n  }\n\n  preservingPermanentElements(callback: () => void) {\n    Bardo.preservingPermanentElements(this, this.permanentElementMap, callback)\n  }\n\n  focusFirstAutofocusableElement() {\n    const element = this.connectedSnapshot.firstAutofocusableElement\n    if (elementIsFocusable(element)) {\n      element.focus()\n    }\n  }\n\n  // Bardo delegate\n\n  enteringBardo(currentPermanentElement: Element) {\n    if (this.activeElement) return\n\n    if (currentPermanentElement.contains(this.currentSnapshot.activeElement)) {\n      this.activeElement = this.currentSnapshot.activeElement\n    }\n  }\n\n  leavingBardo(currentPermanentElement: Element) {\n    if (currentPermanentElement.contains(this.activeElement) && this.activeElement instanceof HTMLElement) {\n      this.activeElement.focus()\n\n      this.activeElement = null\n    }\n  }\n\n  get connectedSnapshot() {\n    return this.newSnapshot.isConnected ? this.newSnapshot : this.currentSnapshot\n  }\n\n  get currentElement() {\n    return this.currentSnapshot.element\n  }\n\n  get newElement() {\n    return this.newSnapshot.element\n  }\n\n  get permanentElementMap() {\n    return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)\n  }\n\n  get cspNonce() {\n    return getMetaContent(\"csp-nonce\")\n  }\n}\n\nfunction copyElementAttributes(destinationElement: Element, sourceElement: Element) {\n  for (const { name, value } of [...sourceElement.attributes]) {\n    destinationElement.setAttribute(name, value)\n  }\n}\n\nfunction elementIsFocusable(element: any): element is { focus: () => void } {\n  return element && typeof element.focus == \"function\"\n}\n","import { FrameElement } from \"../../elements/frame_element\"\nimport { nextAnimationFrame } from \"../../util\"\nimport { Render, Renderer } from \"../renderer\"\nimport { Snapshot } from \"../snapshot\"\n\nexport interface FrameRendererDelegate {\n  frameExtracted(element: FrameElement): void\n}\n\nexport class FrameRenderer extends Renderer<FrameElement> {\n  private readonly delegate: FrameRendererDelegate\n\n  static renderElement(currentElement: FrameElement, newElement: FrameElement) {\n    const destinationRange = document.createRange()\n    destinationRange.selectNodeContents(currentElement)\n    destinationRange.deleteContents()\n\n    const frameElement = newElement\n    const sourceRange = frameElement.ownerDocument?.createRange()\n    if (sourceRange) {\n      sourceRange.selectNodeContents(frameElement)\n      currentElement.appendChild(sourceRange.extractContents())\n    }\n  }\n\n  constructor(\n    delegate: FrameRendererDelegate,\n    currentSnapshot: Snapshot<FrameElement>,\n    newSnapshot: Snapshot<FrameElement>,\n    renderElement: Render<FrameElement>,\n    isPreview: boolean,\n    willRender = true\n  ) {\n    super(currentSnapshot, newSnapshot, renderElement, isPreview, willRender)\n    this.delegate = delegate\n  }\n\n  get shouldRender() {\n    return true\n  }\n\n  async render() {\n    await nextAnimationFrame()\n    this.preservingPermanentElements(() => {\n      this.loadFrameElement()\n    })\n    this.scrollFrameIntoView()\n    await nextAnimationFrame()\n    this.focusFirstAutofocusableElement()\n    await nextAnimationFrame()\n    this.activateScriptElements()\n  }\n\n  loadFrameElement() {\n    this.delegate.frameExtracted(this.newElement.cloneNode(true))\n    this.renderElement(this.currentElement, this.newElement)\n  }\n\n  scrollFrameIntoView() {\n    if (this.currentElement.autoscroll || this.newElement.autoscroll) {\n      const element = this.currentElement.firstElementChild\n      const block = readScrollLogicalPosition(this.currentElement.getAttribute(\"data-autoscroll-block\"), \"end\")\n      const behavior = readScrollBehavior(this.currentElement.getAttribute(\"data-autoscroll-behavior\"), \"auto\")\n\n      if (element) {\n        element.scrollIntoView({ block, behavior })\n        return true\n      }\n    }\n    return false\n  }\n\n  activateScriptElements() {\n    for (const inertScriptElement of this.newScriptElements) {\n      const activatedScriptElement = this.createScriptElement(inertScriptElement)\n      inertScriptElement.replaceWith(activatedScriptElement)\n    }\n  }\n\n  get newScriptElements() {\n    return this.currentElement.querySelectorAll(\"script\")\n  }\n}\n\nfunction readScrollLogicalPosition(value: string | null, defaultValue: ScrollLogicalPosition): ScrollLogicalPosition {\n  if (value == \"end\" || value == \"start\" || value == \"center\" || value == \"nearest\") {\n    return value\n  } else {\n    return defaultValue\n  }\n}\n\nfunction readScrollBehavior(value: string | null, defaultValue: ScrollBehavior): ScrollBehavior {\n  if (value == \"auto\" || value == \"smooth\") {\n    return value\n  } else {\n    return defaultValue\n  }\n}\n","import { unindent, getMetaContent } from \"../../util\"\n\nexport class ProgressBar {\n  static animationDuration = 300 /*ms*/\n\n  static get defaultCSS() {\n    return unindent`\n      .turbo-progress-bar {\n        position: fixed;\n        display: block;\n        top: 0;\n        left: 0;\n        height: 3px;\n        background: #0076ff;\n        z-index: 2147483647;\n        transition:\n          width ${ProgressBar.animationDuration}ms ease-out,\n          opacity ${ProgressBar.animationDuration / 2}ms ${ProgressBar.animationDuration / 2}ms ease-in;\n        transform: translate3d(0, 0, 0);\n      }\n    `\n  }\n\n  readonly stylesheetElement: HTMLStyleElement\n  readonly progressElement: HTMLDivElement\n\n  hiding = false\n  trickleInterval?: number\n  value = 0\n  visible = false\n\n  constructor() {\n    this.stylesheetElement = this.createStylesheetElement()\n    this.progressElement = this.createProgressElement()\n    this.installStylesheetElement()\n    this.setValue(0)\n  }\n\n  show() {\n    if (!this.visible) {\n      this.visible = true\n      this.installProgressElement()\n      this.startTrickling()\n    }\n  }\n\n  hide() {\n    if (this.visible && !this.hiding) {\n      this.hiding = true\n      this.fadeProgressElement(() => {\n        this.uninstallProgressElement()\n        this.stopTrickling()\n        this.visible = false\n        this.hiding = false\n      })\n    }\n  }\n\n  setValue(value: number) {\n    this.value = value\n    this.refresh()\n  }\n\n  // Private\n\n  installStylesheetElement() {\n    document.head.insertBefore(this.stylesheetElement, document.head.firstChild)\n  }\n\n  installProgressElement() {\n    this.progressElement.style.width = \"0\"\n    this.progressElement.style.opacity = \"1\"\n    document.documentElement.insertBefore(this.progressElement, document.body)\n    this.refresh()\n  }\n\n  fadeProgressElement(callback: () => void) {\n    this.progressElement.style.opacity = \"0\"\n    setTimeout(callback, ProgressBar.animationDuration * 1.5)\n  }\n\n  uninstallProgressElement() {\n    if (this.progressElement.parentNode) {\n      document.documentElement.removeChild(this.progressElement)\n    }\n  }\n\n  startTrickling() {\n    if (!this.trickleInterval) {\n      this.trickleInterval = window.setInterval(this.trickle, ProgressBar.animationDuration)\n    }\n  }\n\n  stopTrickling() {\n    window.clearInterval(this.trickleInterval)\n    delete this.trickleInterval\n  }\n\n  trickle = () => {\n    this.setValue(this.value + Math.random() / 100)\n  }\n\n  refresh() {\n    requestAnimationFrame(() => {\n      this.progressElement.style.width = `${10 + this.value * 90}%`\n    })\n  }\n\n  createStylesheetElement() {\n    const element = document.createElement(\"style\")\n    element.type = \"text/css\"\n    element.textContent = ProgressBar.defaultCSS\n    if (this.cspNonce) {\n      element.nonce = this.cspNonce\n    }\n    return element\n  }\n\n  createProgressElement() {\n    const element = document.createElement(\"div\")\n    element.className = \"turbo-progress-bar\"\n    return element\n  }\n\n  get cspNonce() {\n    return getMetaContent(\"csp-nonce\")\n  }\n}\n","import { Snapshot } from \"../snapshot\"\n\ntype ElementDetailMap = { [outerHTML: string]: ElementDetails }\n\ntype ElementDetails = {\n  type?: ElementType\n  tracked: boolean\n  elements: Element[]\n}\n\ntype ElementType = \"script\" | \"stylesheet\"\n\nexport class HeadSnapshot extends Snapshot<HTMLHeadElement> {\n  readonly detailsByOuterHTML = this.children\n    .filter((element) => !elementIsNoscript(element))\n    .map((element) => elementWithoutNonce(element))\n    .reduce((result, element) => {\n      const { outerHTML } = element\n      const details: ElementDetails =\n        outerHTML in result\n          ? result[outerHTML]\n          : {\n              type: elementType(element),\n              tracked: elementIsTracked(element),\n              elements: [],\n            }\n      return {\n        ...result,\n        [outerHTML]: {\n          ...details,\n          elements: [...details.elements, element],\n        },\n      }\n    }, {} as ElementDetailMap)\n\n  get trackedElementSignature(): string {\n    return Object.keys(this.detailsByOuterHTML)\n      .filter((outerHTML) => this.detailsByOuterHTML[outerHTML].tracked)\n      .join(\"\")\n  }\n\n  getScriptElementsNotInSnapshot(snapshot: HeadSnapshot) {\n    return this.getElementsMatchingTypeNotInSnapshot(\"script\", snapshot)\n  }\n\n  getStylesheetElementsNotInSnapshot(snapshot: HeadSnapshot) {\n    return this.getElementsMatchingTypeNotInSnapshot(\"stylesheet\", snapshot)\n  }\n\n  getElementsMatchingTypeNotInSnapshot(matchedType: ElementType, snapshot: HeadSnapshot) {\n    return Object.keys(this.detailsByOuterHTML)\n      .filter((outerHTML) => !(outerHTML in snapshot.detailsByOuterHTML))\n      .map((outerHTML) => this.detailsByOuterHTML[outerHTML])\n      .filter(({ type }) => type == matchedType)\n      .map(({ elements: [element] }) => element)\n  }\n\n  get provisionalElements(): Element[] {\n    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {\n      const { type, tracked, elements } = this.detailsByOuterHTML[outerHTML]\n      if (type == null && !tracked) {\n        return [...result, ...elements]\n      } else if (elements.length > 1) {\n        return [...result, ...elements.slice(1)]\n      } else {\n        return result\n      }\n    }, [] as Element[])\n  }\n\n  getMetaValue(name: string): string | null {\n    const element = this.findMetaElementByName(name)\n    return element ? element.getAttribute(\"content\") : null\n  }\n\n  findMetaElementByName(name: string) {\n    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {\n      const {\n        elements: [element],\n      } = this.detailsByOuterHTML[outerHTML]\n      return elementIsMetaElementWithName(element, name) ? element : result\n    }, undefined as Element | undefined)\n  }\n}\n\nfunction elementType(element: Element) {\n  if (elementIsScript(element)) {\n    return \"script\"\n  } else if (elementIsStylesheet(element)) {\n    return \"stylesheet\"\n  }\n}\n\nfunction elementIsTracked(element: Element) {\n  return element.getAttribute(\"data-turbo-track\") == \"reload\"\n}\n\nfunction elementIsScript(element: Element) {\n  const tagName = element.tagName.toLowerCase()\n  return tagName == \"script\"\n}\n\nfunction elementIsNoscript(element: Element) {\n  const tagName = element.tagName.toLowerCase()\n  return tagName == \"noscript\"\n}\n\nfunction elementIsStylesheet(element: Element) {\n  const tagName = element.tagName.toLowerCase()\n  return tagName == \"style\" || (tagName == \"link\" && element.getAttribute(\"rel\") == \"stylesheet\")\n}\n\nfunction elementIsMetaElementWithName(element: Element, name: string) {\n  const tagName = element.tagName.toLowerCase()\n  return tagName == \"meta\" && element.getAttribute(\"name\") == name\n}\n\nfunction elementWithoutNonce(element: Element) {\n  if (element.hasAttribute(\"nonce\")) {\n    element.setAttribute(\"nonce\", \"\")\n  }\n\n  return element\n}\n","import { parseHTMLDocument } from \"../../util\"\nimport { Snapshot } from \"../snapshot\"\nimport { expandURL } from \"../url\"\nimport { HeadSnapshot } from \"./head_snapshot\"\n\nexport class PageSnapshot extends Snapshot<HTMLBodyElement> {\n  static fromHTMLString(html = \"\") {\n    return this.fromDocument(parseHTMLDocument(html))\n  }\n\n  static fromElement(element: Element) {\n    return this.fromDocument(element.ownerDocument)\n  }\n\n  static fromDocument({ head, body }: Document) {\n    return new this(body as HTMLBodyElement, new HeadSnapshot(head))\n  }\n\n  readonly headSnapshot: HeadSnapshot\n\n  constructor(element: HTMLBodyElement, headSnapshot: HeadSnapshot) {\n    super(element)\n    this.headSnapshot = headSnapshot\n  }\n\n  clone() {\n    return new PageSnapshot(this.element.cloneNode(true), this.headSnapshot)\n  }\n\n  get headElement() {\n    return this.headSnapshot.element\n  }\n\n  get rootLocation() {\n    const root = this.getSetting(\"root\") ?? \"/\"\n    return expandURL(root)\n  }\n\n  get cacheControlValue() {\n    return this.getSetting(\"cache-control\")\n  }\n\n  get isPreviewable() {\n    return this.cacheControlValue != \"no-preview\"\n  }\n\n  get isCacheable() {\n    return this.cacheControlValue != \"no-cache\"\n  }\n\n  get isVisitable() {\n    return this.getSetting(\"visit-control\") != \"reload\"\n  }\n\n  // Private\n\n  getSetting(name: string) {\n    return this.headSnapshot.getMetaValue(`turbo-${name}`)\n  }\n}\n","import { Adapter } from \"../native/adapter\"\nimport { FetchMethod, FetchRequest, FetchRequestDelegate } from \"../../http/fetch_request\"\nimport { FetchResponse } from \"../../http/fetch_response\"\nimport { History } from \"./history\"\nimport { getAnchor } from \"../url\"\nimport { Snapshot } from \"../snapshot\"\nimport { PageSnapshot } from \"./page_snapshot\"\nimport { Action } from \"../types\"\nimport { getHistoryMethodForAction, uuid } from \"../../util\"\nimport { PageView } from \"./page_view\"\n\nexport interface VisitDelegate {\n  readonly adapter: Adapter\n  readonly history: History\n  readonly view: PageView\n\n  visitStarted(visit: Visit): void\n  visitCompleted(visit: Visit): void\n  locationWithActionIsSamePage(location: URL, action: Action): boolean\n  visitScrolledToSamePageLocation(oldURL: URL, newURL: URL): void\n}\n\nexport enum TimingMetric {\n  visitStart = \"visitStart\",\n  requestStart = \"requestStart\",\n  requestEnd = \"requestEnd\",\n  visitEnd = \"visitEnd\",\n}\n\nexport type TimingMetrics = Partial<{ [metric in TimingMetric]: any }>\n\nexport enum VisitState {\n  initialized = \"initialized\",\n  started = \"started\",\n  canceled = \"canceled\",\n  failed = \"failed\",\n  completed = \"completed\",\n}\n\nexport type VisitOptions = {\n  action: Action\n  historyChanged: boolean\n  referrer?: URL\n  snapshotHTML?: string\n  response?: VisitResponse\n  visitCachedSnapshot(snapshot: Snapshot): void\n  willRender: boolean\n  updateHistory: boolean\n  restorationIdentifier?: string\n  shouldCacheSnapshot: boolean\n}\n\nconst defaultOptions: VisitOptions = {\n  action: \"advance\",\n  historyChanged: false,\n  visitCachedSnapshot: () => {},\n  willRender: true,\n  updateHistory: true,\n  shouldCacheSnapshot: true,\n}\n\nexport type VisitResponse = {\n  statusCode: number\n  redirected: boolean\n  responseHTML?: string\n}\n\nexport enum SystemStatusCode {\n  networkFailure = 0,\n  timeoutFailure = -1,\n  contentTypeMismatch = -2,\n}\n\nexport class Visit implements FetchRequestDelegate {\n  readonly delegate: VisitDelegate\n  readonly identifier = uuid()\n  readonly restorationIdentifier: string\n  readonly action: Action\n  readonly referrer?: URL\n  readonly timingMetrics: TimingMetrics = {}\n  readonly visitCachedSnapshot: (snapshot: Snapshot) => void\n  readonly willRender: boolean\n  readonly updateHistory: boolean\n\n  followedRedirect = false\n  frame?: number\n  historyChanged = false\n  location: URL\n  isSamePage: boolean\n  redirectedToLocation?: URL\n  request?: FetchRequest\n  response?: VisitResponse\n  scrolled = false\n  shouldCacheSnapshot = true\n  snapshotHTML?: string\n  snapshotCached = false\n  state = VisitState.initialized\n\n  constructor(\n    delegate: VisitDelegate,\n    location: URL,\n    restorationIdentifier: string | undefined,\n    options: Partial<VisitOptions> = {}\n  ) {\n    this.delegate = delegate\n    this.location = location\n    this.restorationIdentifier = restorationIdentifier || uuid()\n\n    const {\n      action,\n      historyChanged,\n      referrer,\n      snapshotHTML,\n      response,\n      visitCachedSnapshot,\n      willRender,\n      updateHistory,\n      shouldCacheSnapshot,\n    } = {\n      ...defaultOptions,\n      ...options,\n    }\n    this.action = action\n    this.historyChanged = historyChanged\n    this.referrer = referrer\n    this.snapshotHTML = snapshotHTML\n    this.response = response\n    this.isSamePage = this.delegate.locationWithActionIsSamePage(this.location, this.action)\n    this.visitCachedSnapshot = visitCachedSnapshot\n    this.willRender = willRender\n    this.updateHistory = updateHistory\n    this.scrolled = !willRender\n    this.shouldCacheSnapshot = shouldCacheSnapshot\n  }\n\n  get adapter() {\n    return this.delegate.adapter\n  }\n\n  get view() {\n    return this.delegate.view\n  }\n\n  get history() {\n    return this.delegate.history\n  }\n\n  get restorationData() {\n    return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)\n  }\n\n  get silent() {\n    return this.isSamePage\n  }\n\n  start() {\n    if (this.state == VisitState.initialized) {\n      this.recordTimingMetric(TimingMetric.visitStart)\n      this.state = VisitState.started\n      this.adapter.visitStarted(this)\n      this.delegate.visitStarted(this)\n    }\n  }\n\n  cancel() {\n    if (this.state == VisitState.started) {\n      if (this.request) {\n        this.request.cancel()\n      }\n      this.cancelRender()\n      this.state = VisitState.canceled\n    }\n  }\n\n  complete() {\n    if (this.state == VisitState.started) {\n      this.recordTimingMetric(TimingMetric.visitEnd)\n      this.state = VisitState.completed\n      this.followRedirect()\n\n      if (!this.followedRedirect) {\n        this.adapter.visitCompleted(this)\n        this.delegate.visitCompleted(this)\n      }\n    }\n  }\n\n  fail() {\n    if (this.state == VisitState.started) {\n      this.state = VisitState.failed\n      this.adapter.visitFailed(this)\n    }\n  }\n\n  changeHistory() {\n    if (!this.historyChanged && this.updateHistory) {\n      const actionForHistory = this.location.href === this.referrer?.href ? \"replace\" : this.action\n      const method = getHistoryMethodForAction(actionForHistory)\n      this.history.update(method, this.location, this.restorationIdentifier)\n      this.historyChanged = true\n    }\n  }\n\n  issueRequest() {\n    if (this.hasPreloadedResponse()) {\n      this.simulateRequest()\n    } else if (this.shouldIssueRequest() && !this.request) {\n      this.request = new FetchRequest(this, FetchMethod.get, this.location)\n      this.request.perform()\n    }\n  }\n\n  simulateRequest() {\n    if (this.response) {\n      this.startRequest()\n      this.recordResponse()\n      this.finishRequest()\n    }\n  }\n\n  startRequest() {\n    this.recordTimingMetric(TimingMetric.requestStart)\n    this.adapter.visitRequestStarted(this)\n  }\n\n  recordResponse(response = this.response) {\n    this.response = response\n    if (response) {\n      const { statusCode } = response\n      if (isSuccessful(statusCode)) {\n        this.adapter.visitRequestCompleted(this)\n      } else {\n        this.adapter.visitRequestFailedWithStatusCode(this, statusCode)\n      }\n    }\n  }\n\n  finishRequest() {\n    this.recordTimingMetric(TimingMetric.requestEnd)\n    this.adapter.visitRequestFinished(this)\n  }\n\n  loadResponse() {\n    if (this.response) {\n      const { statusCode, responseHTML } = this.response\n      this.render(async () => {\n        if (this.shouldCacheSnapshot) this.cacheSnapshot()\n        if (this.view.renderPromise) await this.view.renderPromise\n        if (isSuccessful(statusCode) && responseHTML != null) {\n          await this.view.renderPage(PageSnapshot.fromHTMLString(responseHTML), false, this.willRender, this)\n          this.adapter.visitRendered(this)\n          this.complete()\n        } else {\n          await this.view.renderError(PageSnapshot.fromHTMLString(responseHTML), this)\n          this.adapter.visitRendered(this)\n          this.fail()\n        }\n      })\n    }\n  }\n\n  getCachedSnapshot() {\n    const snapshot = this.view.getCachedSnapshotForLocation(this.location) || this.getPreloadedSnapshot()\n\n    if (snapshot && (!getAnchor(this.location) || snapshot.hasAnchor(getAnchor(this.location)))) {\n      if (this.action == \"restore\" || snapshot.isPreviewable) {\n        return snapshot\n      }\n    }\n  }\n\n  getPreloadedSnapshot() {\n    if (this.snapshotHTML) {\n      return PageSnapshot.fromHTMLString(this.snapshotHTML)\n    }\n  }\n\n  hasCachedSnapshot() {\n    return this.getCachedSnapshot() != null\n  }\n\n  loadCachedSnapshot() {\n    const snapshot = this.getCachedSnapshot()\n    if (snapshot) {\n      const isPreview = this.shouldIssueRequest()\n      this.render(async () => {\n        this.cacheSnapshot()\n        if (this.isSamePage) {\n          this.adapter.visitRendered(this)\n        } else {\n          if (this.view.renderPromise) await this.view.renderPromise\n          await this.view.renderPage(snapshot, isPreview, this.willRender, this)\n          this.adapter.visitRendered(this)\n          if (!isPreview) {\n            this.complete()\n          }\n        }\n      })\n    }\n  }\n\n  followRedirect() {\n    if (this.redirectedToLocation && !this.followedRedirect && this.response?.redirected) {\n      this.adapter.visitProposedToLocation(this.redirectedToLocation, {\n        action: \"replace\",\n        willRender: false,\n        response: this.response,\n      })\n      this.followedRedirect = true\n    }\n  }\n\n  goToSamePageAnchor() {\n    if (this.isSamePage) {\n      this.render(async () => {\n        this.cacheSnapshot()\n        this.adapter.visitRendered(this)\n      })\n    }\n  }\n\n  // Fetch request delegate\n\n  requestStarted() {\n    this.startRequest()\n  }\n\n  requestPreventedHandlingResponse(_request: FetchRequest, _response: FetchResponse) {}\n\n  async requestSucceededWithResponse(request: FetchRequest, response: FetchResponse) {\n    const responseHTML = await response.responseHTML\n    const { redirected, statusCode } = response\n    if (responseHTML == undefined) {\n      this.recordResponse({\n        statusCode: SystemStatusCode.contentTypeMismatch,\n        redirected,\n      })\n    } else {\n      this.redirectedToLocation = response.redirected ? response.location : undefined\n      this.recordResponse({ statusCode: statusCode, responseHTML, redirected })\n    }\n  }\n\n  async requestFailedWithResponse(request: FetchRequest, response: FetchResponse) {\n    const responseHTML = await response.responseHTML\n    const { redirected, statusCode } = response\n    if (responseHTML == undefined) {\n      this.recordResponse({\n        statusCode: SystemStatusCode.contentTypeMismatch,\n        redirected,\n      })\n    } else {\n      this.recordResponse({ statusCode: statusCode, responseHTML, redirected })\n    }\n  }\n\n  requestErrored(_request: FetchRequest, _error: Error) {\n    this.recordResponse({\n      statusCode: SystemStatusCode.networkFailure,\n      redirected: false,\n    })\n  }\n\n  requestFinished() {\n    this.finishRequest()\n  }\n\n  // Scrolling\n\n  performScroll() {\n    if (!this.scrolled) {\n      if (this.action == \"restore\") {\n        this.scrollToRestoredPosition() || this.scrollToAnchor() || this.view.scrollToTop()\n      } else {\n        this.scrollToAnchor() || this.view.scrollToTop()\n      }\n      if (this.isSamePage) {\n        this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation, this.location)\n      }\n\n      this.scrolled = true\n    }\n  }\n\n  scrollToRestoredPosition() {\n    const { scrollPosition } = this.restorationData\n    if (scrollPosition) {\n      this.view.scrollToPosition(scrollPosition)\n      return true\n    }\n  }\n\n  scrollToAnchor() {\n    const anchor = getAnchor(this.location)\n    if (anchor != null) {\n      this.view.scrollToAnchor(anchor)\n      return true\n    }\n  }\n\n  // Instrumentation\n\n  recordTimingMetric(metric: TimingMetric) {\n    this.timingMetrics[metric] = new Date().getTime()\n  }\n\n  getTimingMetrics(): TimingMetrics {\n    return { ...this.timingMetrics }\n  }\n\n  // Private\n\n  getHistoryMethodForAction(action: Action) {\n    switch (action) {\n      case \"replace\":\n        return history.replaceState\n      case \"advance\":\n      case \"restore\":\n        return history.pushState\n    }\n  }\n\n  hasPreloadedResponse() {\n    return typeof this.response == \"object\"\n  }\n\n  shouldIssueRequest() {\n    if (this.isSamePage) {\n      return false\n    } else if (this.action == \"restore\") {\n      return !this.hasCachedSnapshot()\n    } else {\n      return this.willRender\n    }\n  }\n\n  cacheSnapshot() {\n    if (!this.snapshotCached) {\n      this.view.cacheSnapshot().then((snapshot) => snapshot && this.visitCachedSnapshot(snapshot))\n      this.snapshotCached = true\n    }\n  }\n\n  async render(callback: () => Promise<void>) {\n    this.cancelRender()\n    await new Promise<void>((resolve) => {\n      this.frame = requestAnimationFrame(() => resolve())\n    })\n    await callback()\n    delete this.frame\n    if (!this.view.forceReloaded) {\n      this.performScroll()\n    }\n  }\n\n  cancelRender() {\n    if (this.frame) {\n      cancelAnimationFrame(this.frame)\n      delete this.frame\n    }\n  }\n}\n\nfunction isSuccessful(statusCode: number) {\n  return statusCode >= 200 && statusCode < 300\n}\n","import { Adapter } from \"./adapter\"\nimport { ProgressBar } from \"../drive/progress_bar\"\nimport { SystemStatusCode, Visit, VisitOptions } from \"../drive/visit\"\nimport { FormSubmission } from \"../drive/form_submission\"\nimport { Session } from \"../session\"\nimport { uuid, dispatch } from \"../../util\"\n\nexport type ReloadReason = StructuredReason | undefined\ninterface StructuredReason {\n  reason: string\n  context?: { [key: string]: any }\n}\n\nexport class BrowserAdapter implements Adapter {\n  readonly session: Session\n  readonly progressBar = new ProgressBar()\n\n  visitProgressBarTimeout?: number\n  formProgressBarTimeout?: number\n  location?: URL\n\n  constructor(session: Session) {\n    this.session = session\n  }\n\n  visitProposedToLocation(location: URL, options?: Partial<VisitOptions>) {\n    this.navigator.startVisit(location, options?.restorationIdentifier || uuid(), options)\n  }\n\n  visitStarted(visit: Visit) {\n    this.location = visit.location\n    visit.loadCachedSnapshot()\n    visit.issueRequest()\n    visit.goToSamePageAnchor()\n  }\n\n  visitRequestStarted(visit: Visit) {\n    this.progressBar.setValue(0)\n    if (visit.hasCachedSnapshot() || visit.action != \"restore\") {\n      this.showVisitProgressBarAfterDelay()\n    } else {\n      this.showProgressBar()\n    }\n  }\n\n  visitRequestCompleted(visit: Visit) {\n    visit.loadResponse()\n  }\n\n  visitRequestFailedWithStatusCode(visit: Visit, statusCode: number) {\n    switch (statusCode) {\n      case SystemStatusCode.networkFailure:\n      case SystemStatusCode.timeoutFailure:\n      case SystemStatusCode.contentTypeMismatch:\n        return this.reload({\n          reason: \"request_failed\",\n          context: {\n            statusCode,\n          },\n        })\n      default:\n        return visit.loadResponse()\n    }\n  }\n\n  visitRequestFinished(_visit: Visit) {\n    this.progressBar.setValue(1)\n    this.hideVisitProgressBar()\n  }\n\n  visitCompleted(_visit: Visit) {}\n\n  pageInvalidated(reason: ReloadReason) {\n    this.reload(reason)\n  }\n\n  visitFailed(_visit: Visit) {}\n\n  visitRendered(_visit: Visit) {}\n\n  formSubmissionStarted(_formSubmission: FormSubmission) {\n    this.progressBar.setValue(0)\n    this.showFormProgressBarAfterDelay()\n  }\n\n  formSubmissionFinished(_formSubmission: FormSubmission) {\n    this.progressBar.setValue(1)\n    this.hideFormProgressBar()\n  }\n\n  // Private\n\n  showVisitProgressBarAfterDelay() {\n    this.visitProgressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay)\n  }\n\n  hideVisitProgressBar() {\n    this.progressBar.hide()\n    if (this.visitProgressBarTimeout != null) {\n      window.clearTimeout(this.visitProgressBarTimeout)\n      delete this.visitProgressBarTimeout\n    }\n  }\n\n  showFormProgressBarAfterDelay() {\n    if (this.formProgressBarTimeout == null) {\n      this.formProgressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay)\n    }\n  }\n\n  hideFormProgressBar() {\n    this.progressBar.hide()\n    if (this.formProgressBarTimeout != null) {\n      window.clearTimeout(this.formProgressBarTimeout)\n      delete this.formProgressBarTimeout\n    }\n  }\n\n  showProgressBar = () => {\n    this.progressBar.show()\n  }\n\n  reload(reason: ReloadReason) {\n    dispatch(\"turbo:reload\", { detail: reason })\n\n    if (!this.location) return\n\n    window.location.href = this.location.toString()\n  }\n\n  get navigator() {\n    return this.session.navigator\n  }\n}\n","import { TurboBeforeCacheEvent } from \"../core/session\"\n\nexport class CacheObserver {\n  started = false\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      addEventListener(\"turbo:before-cache\", this.removeStaleElements, false)\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false\n      removeEventListener(\"turbo:before-cache\", this.removeStaleElements, false)\n    }\n  }\n\n  removeStaleElements = <EventListener>((_event: TurboBeforeCacheEvent) => {\n    const staleElements = [...document.querySelectorAll('[data-turbo-cache=\"false\"]')]\n\n    for (const element of staleElements) {\n      element.remove()\n    }\n  })\n}\n","import { FormSubmitObserver, FormSubmitObserverDelegate } from \"../../observers/form_submit_observer\"\nimport { FrameElement } from \"../../elements/frame_element\"\nimport { LinkInterceptor, LinkInterceptorDelegate } from \"./link_interceptor\"\nimport { expandURL, getAction, locationIsVisitable } from \"../url\"\n\nexport class FrameRedirector implements LinkInterceptorDelegate, FormSubmitObserverDelegate {\n  readonly element: Element\n  readonly linkInterceptor: LinkInterceptor\n  readonly formSubmitObserver: FormSubmitObserver\n\n  constructor(element: Element) {\n    this.element = element\n    this.linkInterceptor = new LinkInterceptor(this, element)\n    this.formSubmitObserver = new FormSubmitObserver(this, element)\n  }\n\n  start() {\n    this.linkInterceptor.start()\n    this.formSubmitObserver.start()\n  }\n\n  stop() {\n    this.linkInterceptor.stop()\n    this.formSubmitObserver.stop()\n  }\n\n  shouldInterceptLinkClick(element: Element, _url: string) {\n    return this.shouldRedirect(element)\n  }\n\n  linkClickIntercepted(element: Element, url: string) {\n    const frame = this.findFrameElement(element)\n    if (frame) {\n      frame.delegate.linkClickIntercepted(element, url)\n    }\n  }\n\n  willSubmitForm(element: HTMLFormElement, submitter?: HTMLElement) {\n    return (\n      element.closest(\"turbo-frame\") == null &&\n      this.shouldSubmit(element, submitter) &&\n      this.shouldRedirect(element, submitter)\n    )\n  }\n\n  formSubmitted(element: HTMLFormElement, submitter?: HTMLElement) {\n    const frame = this.findFrameElement(element, submitter)\n    if (frame) {\n      frame.delegate.formSubmitted(element, submitter)\n    }\n  }\n\n  private shouldSubmit(form: HTMLFormElement, submitter?: HTMLElement) {\n    const action = getAction(form, submitter)\n    const meta = this.element.ownerDocument.querySelector<HTMLMetaElement>(`meta[name=\"turbo-root\"]`)\n    const rootLocation = expandURL(meta?.content ?? \"/\")\n\n    return this.shouldRedirect(form, submitter) && locationIsVisitable(action, rootLocation)\n  }\n\n  private shouldRedirect(element: Element, submitter?: HTMLElement) {\n    const frame = this.findFrameElement(element, submitter)\n    return frame ? frame != element.closest(\"turbo-frame\") : false\n  }\n\n  private findFrameElement(element: Element, submitter?: HTMLElement) {\n    const id = submitter?.getAttribute(\"data-turbo-frame\") || element.getAttribute(\"data-turbo-frame\")\n    if (id && id != \"_top\") {\n      const frame = this.element.querySelector(`#${id}:not([disabled])`)\n      if (frame instanceof FrameElement) {\n        return frame\n      }\n    }\n  }\n}\n","import { Position } from \"../types\"\nimport { nextMicrotask, uuid } from \"../../util\"\n\nexport interface HistoryDelegate {\n  historyPoppedToLocationWithRestorationIdentifier(location: URL, restorationIdentifier: string): void\n}\n\ntype HistoryMethod = (this: typeof history, state: any, title: string, url?: string | null | undefined) => void\n\nexport type RestorationData = { scrollPosition?: Position }\n\nexport type RestorationDataMap = {\n  [restorationIdentifier: string]: RestorationData\n}\n\nexport class History {\n  readonly delegate: HistoryDelegate\n  location!: URL\n  restorationIdentifier = uuid()\n  restorationData: RestorationDataMap = {}\n  started = false\n  pageLoaded = false\n  previousScrollRestoration?: ScrollRestoration\n\n  constructor(delegate: HistoryDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"popstate\", this.onPopState, false)\n      addEventListener(\"load\", this.onPageLoad, false)\n      this.started = true\n      this.replace(new URL(window.location.href))\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"popstate\", this.onPopState, false)\n      removeEventListener(\"load\", this.onPageLoad, false)\n      this.started = false\n    }\n  }\n\n  push(location: URL, restorationIdentifier?: string) {\n    this.update(history.pushState, location, restorationIdentifier)\n  }\n\n  replace(location: URL, restorationIdentifier?: string) {\n    this.update(history.replaceState, location, restorationIdentifier)\n  }\n\n  update(method: HistoryMethod, location: URL, restorationIdentifier = uuid()) {\n    const state = { turbo: { restorationIdentifier } }\n    method.call(history, state, \"\", location.href)\n    this.location = location\n    this.restorationIdentifier = restorationIdentifier\n  }\n\n  // Restoration data\n\n  getRestorationDataForIdentifier(restorationIdentifier: string): RestorationData {\n    return this.restorationData[restorationIdentifier] || {}\n  }\n\n  updateRestorationData(additionalData: Partial<RestorationData>) {\n    const { restorationIdentifier } = this\n    const restorationData = this.restorationData[restorationIdentifier]\n    this.restorationData[restorationIdentifier] = {\n      ...restorationData,\n      ...additionalData,\n    }\n  }\n\n  // Scroll restoration\n\n  assumeControlOfScrollRestoration() {\n    if (!this.previousScrollRestoration) {\n      this.previousScrollRestoration = history.scrollRestoration ?? \"auto\"\n      history.scrollRestoration = \"manual\"\n    }\n  }\n\n  relinquishControlOfScrollRestoration() {\n    if (this.previousScrollRestoration) {\n      history.scrollRestoration = this.previousScrollRestoration\n      delete this.previousScrollRestoration\n    }\n  }\n\n  // Event handlers\n\n  onPopState = (event: PopStateEvent) => {\n    if (this.shouldHandlePopState()) {\n      const { turbo } = event.state || {}\n      if (turbo) {\n        this.location = new URL(window.location.href)\n        const { restorationIdentifier } = turbo\n        this.restorationIdentifier = restorationIdentifier\n        this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location, restorationIdentifier)\n      }\n    }\n  }\n\n  onPageLoad = async (_event: Event) => {\n    await nextMicrotask()\n    this.pageLoaded = true\n  }\n\n  // Private\n\n  shouldHandlePopState() {\n    // Safari dispatches a popstate event after window's load event, ignore it\n    return this.pageIsLoaded()\n  }\n\n  pageIsLoaded() {\n    return this.pageLoaded || document.readyState == \"complete\"\n  }\n}\n","import { expandURL } from \"../core/url\"\n\nexport interface LinkClickObserverDelegate {\n  willFollowLinkToLocation(link: Element, location: URL, event: MouseEvent): boolean\n  followedLinkToLocation(link: Element, location: URL): void\n}\n\nexport class LinkClickObserver {\n  readonly delegate: LinkClickObserverDelegate\n  started = false\n\n  constructor(delegate: LinkClickObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"click\", this.clickCaptured, true)\n      this.started = true\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"click\", this.clickCaptured, true)\n      this.started = false\n    }\n  }\n\n  clickCaptured = () => {\n    removeEventListener(\"click\", this.clickBubbled, false)\n    addEventListener(\"click\", this.clickBubbled, false)\n  }\n\n  clickBubbled = (event: MouseEvent) => {\n    if (this.clickEventIsSignificant(event)) {\n      const target = (event.composedPath && event.composedPath()[0]) || event.target\n      const link = this.findLinkFromClickTarget(target)\n      if (link && doesNotTargetIFrame(link)) {\n        const location = this.getLocationForLink(link)\n        if (this.delegate.willFollowLinkToLocation(link, location, event)) {\n          event.preventDefault()\n          this.delegate.followedLinkToLocation(link, location)\n        }\n      }\n    }\n  }\n\n  clickEventIsSignificant(event: MouseEvent) {\n    return !(\n      (event.target && (event.target as any).isContentEditable) ||\n      event.defaultPrevented ||\n      event.which > 1 ||\n      event.altKey ||\n      event.ctrlKey ||\n      event.metaKey ||\n      event.shiftKey\n    )\n  }\n\n  findLinkFromClickTarget(target: EventTarget | null) {\n    if (target instanceof Element) {\n      return target.closest<HTMLAnchorElement>(\"a[href]:not([target^=_]):not([download])\")\n    }\n  }\n\n  getLocationForLink(link: Element): URL {\n    return expandURL(link.getAttribute(\"href\") || \"\")\n  }\n}\n\nfunction doesNotTargetIFrame(anchor: HTMLAnchorElement): boolean {\n  for (const element of document.getElementsByName(anchor.target)) {\n    if (element instanceof HTMLIFrameElement) return false\n  }\n\n  return true\n}\n","import { Action, isAction } from \"../types\"\nimport { FetchMethod } from \"../../http/fetch_request\"\nimport { FetchResponse } from \"../../http/fetch_response\"\nimport { FormSubmission } from \"./form_submission\"\nimport { expandURL, getAnchor, getRequestURL, Locatable, locationIsVisitable } from \"../url\"\nimport { getAttribute } from \"../../util\"\nimport { Visit, VisitDelegate, VisitOptions } from \"./visit\"\nimport { PageSnapshot } from \"./page_snapshot\"\n\nexport type NavigatorDelegate = VisitDelegate & {\n  allowsVisitingLocationWithAction(location: URL, action?: Action): boolean\n  visitProposedToLocation(location: URL, options: Partial<VisitOptions>): void\n  notifyApplicationAfterVisitingSamePageLocation(oldURL: URL, newURL: URL): void\n}\n\nexport class Navigator {\n  readonly delegate: NavigatorDelegate\n  formSubmission?: FormSubmission\n  currentVisit?: Visit\n  lastVisit?: Visit\n\n  constructor(delegate: NavigatorDelegate) {\n    this.delegate = delegate\n  }\n\n  proposeVisit(location: URL, options: Partial<VisitOptions> = {}) {\n    if (this.delegate.allowsVisitingLocationWithAction(location, options.action)) {\n      if (locationIsVisitable(location, this.view.snapshot.rootLocation)) {\n        this.delegate.visitProposedToLocation(location, options)\n      } else {\n        window.location.href = location.toString()\n      }\n    }\n  }\n\n  startVisit(locatable: Locatable, restorationIdentifier: string, options: Partial<VisitOptions> = {}) {\n    this.lastVisit = this.currentVisit\n    this.stop()\n    this.currentVisit = new Visit(this, expandURL(locatable), restorationIdentifier, {\n      referrer: this.location,\n      ...options,\n    })\n    this.currentVisit.start()\n  }\n\n  submitForm(form: HTMLFormElement, submitter?: HTMLElement) {\n    this.stop()\n    this.formSubmission = new FormSubmission(this, form, submitter, true)\n\n    this.formSubmission.start()\n  }\n\n  stop() {\n    if (this.formSubmission) {\n      this.formSubmission.stop()\n      delete this.formSubmission\n    }\n\n    if (this.currentVisit) {\n      this.currentVisit.cancel()\n      delete this.currentVisit\n    }\n  }\n\n  get adapter() {\n    return this.delegate.adapter\n  }\n\n  get view() {\n    return this.delegate.view\n  }\n\n  get history() {\n    return this.delegate.history\n  }\n\n  // Form submission delegate\n\n  formSubmissionStarted(formSubmission: FormSubmission) {\n    // Not all adapters implement formSubmissionStarted\n    if (typeof this.adapter.formSubmissionStarted === \"function\") {\n      this.adapter.formSubmissionStarted(formSubmission)\n    }\n  }\n\n  async formSubmissionSucceededWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse) {\n    if (formSubmission == this.formSubmission) {\n      const responseHTML = await fetchResponse.responseHTML\n      if (responseHTML) {\n        const shouldCacheSnapshot = formSubmission.method == FetchMethod.get\n        if (!shouldCacheSnapshot) {\n          this.view.clearSnapshotCache()\n        }\n\n        const { statusCode, redirected } = fetchResponse\n        const action = this.getActionForFormSubmission(formSubmission)\n        const visitOptions = {\n          action,\n          shouldCacheSnapshot,\n          response: { statusCode, responseHTML, redirected },\n        }\n        this.proposeVisit(fetchResponse.location, visitOptions)\n      }\n    }\n  }\n\n  async formSubmissionFailedWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse) {\n    const responseHTML = await fetchResponse.responseHTML\n\n    if (responseHTML) {\n      const snapshot = PageSnapshot.fromHTMLString(responseHTML)\n      if (fetchResponse.serverError) {\n        await this.view.renderError(snapshot, this.currentVisit)\n      } else {\n        await this.view.renderPage(snapshot, false, true, this.currentVisit)\n      }\n      this.view.scrollToTop()\n      this.view.clearSnapshotCache()\n    }\n  }\n\n  formSubmissionErrored(formSubmission: FormSubmission, error: Error) {\n    console.error(error)\n  }\n\n  formSubmissionFinished(formSubmission: FormSubmission) {\n    // Not all adapters implement formSubmissionFinished\n    if (typeof this.adapter.formSubmissionFinished === \"function\") {\n      this.adapter.formSubmissionFinished(formSubmission)\n    }\n  }\n\n  // Visit delegate\n\n  visitStarted(visit: Visit) {\n    this.delegate.visitStarted(visit)\n  }\n\n  visitCompleted(visit: Visit) {\n    this.delegate.visitCompleted(visit)\n  }\n\n  locationWithActionIsSamePage(location: URL, action?: Action): boolean {\n    const anchor = getAnchor(location)\n    const lastLocation = this.lastVisit?.location || this.view.lastRenderedLocation\n    const currentAnchor = getAnchor(lastLocation)\n    const isRestorationToTop = action === \"restore\" && typeof anchor === \"undefined\"\n\n    return (\n      action !== \"replace\" &&\n      getRequestURL(location) === getRequestURL(lastLocation) &&\n      (isRestorationToTop || (anchor != null && anchor !== currentAnchor))\n    )\n  }\n\n  visitScrolledToSamePageLocation(oldURL: URL, newURL: URL) {\n    this.delegate.visitScrolledToSamePageLocation(oldURL, newURL)\n  }\n\n  // Visits\n\n  get location() {\n    return this.history.location\n  }\n\n  get restorationIdentifier() {\n    return this.history.restorationIdentifier\n  }\n\n  getActionForFormSubmission(formSubmission: FormSubmission): Action {\n    const { formElement, submitter } = formSubmission\n    const action = getAttribute(\"data-turbo-action\", submitter, formElement)\n    return isAction(action) ? action : \"advance\"\n  }\n}\n","export interface PageObserverDelegate {\n  pageBecameInteractive(): void\n  pageLoaded(): void\n  pageWillUnload(): void\n}\n\nexport enum PageStage {\n  initial,\n  loading,\n  interactive,\n  complete,\n}\n\nexport class PageObserver {\n  readonly delegate: PageObserverDelegate\n  stage = PageStage.initial\n  started = false\n\n  constructor(delegate: PageObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      if (this.stage == PageStage.initial) {\n        this.stage = PageStage.loading\n      }\n      document.addEventListener(\"readystatechange\", this.interpretReadyState, false)\n      addEventListener(\"pagehide\", this.pageWillUnload, false)\n      this.started = true\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      document.removeEventListener(\"readystatechange\", this.interpretReadyState, false)\n      removeEventListener(\"pagehide\", this.pageWillUnload, false)\n      this.started = false\n    }\n  }\n\n  interpretReadyState = () => {\n    const { readyState } = this\n    if (readyState == \"interactive\") {\n      this.pageIsInteractive()\n    } else if (readyState == \"complete\") {\n      this.pageIsComplete()\n    }\n  }\n\n  pageIsInteractive() {\n    if (this.stage == PageStage.loading) {\n      this.stage = PageStage.interactive\n      this.delegate.pageBecameInteractive()\n    }\n  }\n\n  pageIsComplete() {\n    this.pageIsInteractive()\n    if (this.stage == PageStage.interactive) {\n      this.stage = PageStage.complete\n      this.delegate.pageLoaded()\n    }\n  }\n\n  pageWillUnload = () => {\n    this.delegate.pageWillUnload()\n  }\n\n  get readyState() {\n    return document.readyState\n  }\n}\n","import { Position } from \"../core/types\"\n\nexport interface ScrollObserverDelegate {\n  scrollPositionChanged(position: Position): void\n}\n\nexport class ScrollObserver {\n  readonly delegate: ScrollObserverDelegate\n  started = false\n\n  constructor(delegate: ScrollObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"scroll\", this.onScroll, false)\n      this.onScroll()\n      this.started = true\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"scroll\", this.onScroll, false)\n      this.started = false\n    }\n  }\n\n  onScroll = () => {\n    this.updatePosition({ x: window.pageXOffset, y: window.pageYOffset })\n  }\n\n  // Private\n\n  updatePosition(position: Position) {\n    this.delegate.scrollPositionChanged(position)\n  }\n}\n","import { TurboBeforeFetchResponseEvent } from \"../http/fetch_request\"\nimport { FetchResponse } from \"../http/fetch_response\"\nimport { StreamMessage } from \"../core/streams/stream_message\"\nimport { StreamSource } from \"../core/types\"\n\nexport interface StreamObserverDelegate {\n  receivedMessageFromStream(message: StreamMessage): void\n}\n\nexport class StreamObserver {\n  readonly delegate: StreamObserverDelegate\n  readonly sources: Set<StreamSource> = new Set()\n  private started = false\n\n  constructor(delegate: StreamObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      addEventListener(\"turbo:before-fetch-response\", this.inspectFetchResponse, false)\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false\n      removeEventListener(\"turbo:before-fetch-response\", this.inspectFetchResponse, false)\n    }\n  }\n\n  connectStreamSource(source: StreamSource) {\n    if (!this.streamSourceIsConnected(source)) {\n      this.sources.add(source)\n      source.addEventListener(\"message\", this.receiveMessageEvent, false)\n    }\n  }\n\n  disconnectStreamSource(source: StreamSource) {\n    if (this.streamSourceIsConnected(source)) {\n      this.sources.delete(source)\n      source.removeEventListener(\"message\", this.receiveMessageEvent, false)\n    }\n  }\n\n  streamSourceIsConnected(source: StreamSource) {\n    return this.sources.has(source)\n  }\n\n  inspectFetchResponse = <EventListener>((event: TurboBeforeFetchResponseEvent) => {\n    const response = fetchResponseFromEvent(event)\n    if (response && fetchResponseIsStream(response)) {\n      event.preventDefault()\n      this.receiveMessageResponse(response)\n    }\n  })\n\n  receiveMessageEvent = (event: MessageEvent) => {\n    if (this.started && typeof event.data == \"string\") {\n      this.receiveMessageHTML(event.data)\n    }\n  }\n\n  async receiveMessageResponse(response: FetchResponse) {\n    const html = await response.responseHTML\n    if (html) {\n      this.receiveMessageHTML(html)\n    }\n  }\n\n  receiveMessageHTML(html: string) {\n    this.delegate.receivedMessageFromStream(new StreamMessage(html))\n  }\n}\n\nfunction fetchResponseFromEvent(event: TurboBeforeFetchResponseEvent) {\n  const fetchResponse = event.detail?.fetchResponse\n  if (fetchResponse instanceof FetchResponse) {\n    return fetchResponse\n  }\n}\n\nfunction fetchResponseIsStream(response: FetchResponse) {\n  const contentType = response.contentType ?? \"\"\n  return contentType.startsWith(StreamMessage.contentType)\n}\n","import { PageSnapshot } from \"./page_snapshot\"\nimport { Renderer } from \"../renderer\"\n\nexport class ErrorRenderer extends Renderer<HTMLBodyElement, PageSnapshot> {\n  static renderElement(currentElement: HTMLBodyElement, newElement: HTMLBodyElement) {\n    const { documentElement, body } = document\n\n    documentElement.replaceChild(newElement, body)\n  }\n\n  async render() {\n    this.replaceHeadAndBody()\n    this.activateScriptElements()\n  }\n\n  replaceHeadAndBody() {\n    const { documentElement, head } = document\n    documentElement.replaceChild(this.newHead, head)\n    this.renderElement(this.currentElement, this.newElement)\n  }\n\n  activateScriptElements() {\n    for (const replaceableElement of this.scriptElements) {\n      const parentNode = replaceableElement.parentNode\n      if (parentNode) {\n        const element = this.createScriptElement(replaceableElement)\n        parentNode.replaceChild(element, replaceableElement)\n      }\n    }\n  }\n\n  get newHead() {\n    return this.newSnapshot.headSnapshot.element\n  }\n\n  get scriptElements() {\n    return [...document.documentElement.querySelectorAll(\"script\")]\n  }\n}\n","import { Renderer } from \"../renderer\"\nimport { PageSnapshot } from \"./page_snapshot\"\nimport { ReloadReason } from \"../native/browser_adapter\"\n\nexport class PageRenderer extends Renderer<HTMLBodyElement, PageSnapshot> {\n  static renderElement(currentElement: HTMLBodyElement, newElement: HTMLBodyElement) {\n    if (document.body && newElement instanceof HTMLBodyElement) {\n      document.body.replaceWith(newElement)\n    } else {\n      document.documentElement.appendChild(newElement)\n    }\n  }\n\n  get shouldRender() {\n    return this.newSnapshot.isVisitable && this.trackedElementsAreIdentical\n  }\n\n  get reloadReason(): ReloadReason {\n    if (!this.newSnapshot.isVisitable) {\n      return {\n        reason: \"turbo_visit_control_is_reload\",\n      }\n    }\n\n    if (!this.trackedElementsAreIdentical) {\n      return {\n        reason: \"tracked_element_mismatch\",\n      }\n    }\n  }\n\n  prepareToRender() {\n    this.mergeHead()\n  }\n\n  async render() {\n    if (this.willRender) {\n      this.replaceBody()\n    }\n  }\n\n  finishRendering() {\n    super.finishRendering()\n    if (!this.isPreview) {\n      this.focusFirstAutofocusableElement()\n    }\n  }\n\n  get currentHeadSnapshot() {\n    return this.currentSnapshot.headSnapshot\n  }\n\n  get newHeadSnapshot() {\n    return this.newSnapshot.headSnapshot\n  }\n\n  get newElement() {\n    return this.newSnapshot.element\n  }\n\n  mergeHead() {\n    this.copyNewHeadStylesheetElements()\n    this.copyNewHeadScriptElements()\n    this.removeCurrentHeadProvisionalElements()\n    this.copyNewHeadProvisionalElements()\n  }\n\n  replaceBody() {\n    this.preservingPermanentElements(() => {\n      this.activateNewBody()\n      this.assignNewBody()\n    })\n  }\n\n  get trackedElementsAreIdentical() {\n    return this.currentHeadSnapshot.trackedElementSignature == this.newHeadSnapshot.trackedElementSignature\n  }\n\n  copyNewHeadStylesheetElements() {\n    for (const element of this.newHeadStylesheetElements) {\n      document.head.appendChild(element)\n    }\n  }\n\n  copyNewHeadScriptElements() {\n    for (const element of this.newHeadScriptElements) {\n      document.head.appendChild(this.createScriptElement(element))\n    }\n  }\n\n  removeCurrentHeadProvisionalElements() {\n    for (const element of this.currentHeadProvisionalElements) {\n      document.head.removeChild(element)\n    }\n  }\n\n  copyNewHeadProvisionalElements() {\n    for (const element of this.newHeadProvisionalElements) {\n      document.head.appendChild(element)\n    }\n  }\n\n  activateNewBody() {\n    document.adoptNode(this.newElement)\n    this.activateNewBodyScriptElements()\n  }\n\n  activateNewBodyScriptElements() {\n    for (const inertScriptElement of this.newBodyScriptElements) {\n      const activatedScriptElement = this.createScriptElement(inertScriptElement)\n      inertScriptElement.replaceWith(activatedScriptElement)\n    }\n  }\n\n  assignNewBody() {\n    this.renderElement(this.currentElement, this.newElement)\n  }\n\n  get newHeadStylesheetElements() {\n    return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)\n  }\n\n  get newHeadScriptElements() {\n    return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)\n  }\n\n  get currentHeadProvisionalElements() {\n    return this.currentHeadSnapshot.provisionalElements\n  }\n\n  get newHeadProvisionalElements() {\n    return this.newHeadSnapshot.provisionalElements\n  }\n\n  get newBodyScriptElements() {\n    return this.newElement.querySelectorAll(\"script\")\n  }\n}\n","import { toCacheKey } from \"../url\"\nimport { PageSnapshot } from \"./page_snapshot\"\n\nexport class SnapshotCache {\n  readonly keys: string[] = []\n  readonly size: number\n  snapshots: { [url: string]: PageSnapshot } = {}\n\n  constructor(size: number) {\n    this.size = size\n  }\n\n  has(location: URL) {\n    return toCacheKey(location) in this.snapshots\n  }\n\n  get(location: URL): PageSnapshot | undefined {\n    if (this.has(location)) {\n      const snapshot = this.read(location)\n      this.touch(location)\n      return snapshot\n    }\n  }\n\n  put(location: URL, snapshot: PageSnapshot) {\n    this.write(location, snapshot)\n    this.touch(location)\n    return snapshot\n  }\n\n  clear() {\n    this.snapshots = {}\n  }\n\n  // Private\n\n  read(location: URL) {\n    return this.snapshots[toCacheKey(location)]\n  }\n\n  write(location: URL, snapshot: PageSnapshot) {\n    this.snapshots[toCacheKey(location)] = snapshot\n  }\n\n  touch(location: URL) {\n    const key = toCacheKey(location)\n    const index = this.keys.indexOf(key)\n    if (index > -1) this.keys.splice(index, 1)\n    this.keys.unshift(key)\n    this.trim()\n  }\n\n  trim() {\n    for (const key of this.keys.splice(this.size)) {\n      delete this.snapshots[key]\n    }\n  }\n}\n","import { nextEventLoopTick } from \"../../util\"\nimport { View, ViewDelegate, ViewRenderOptions } from \"../view\"\nimport { ErrorRenderer } from \"./error_renderer\"\nimport { PageRenderer } from \"./page_renderer\"\nimport { PageSnapshot } from \"./page_snapshot\"\nimport { SnapshotCache } from \"./snapshot_cache\"\nimport { Visit } from \"./visit\"\n\nexport type PageViewRenderOptions = ViewRenderOptions<HTMLBodyElement>\n\nexport interface PageViewDelegate extends ViewDelegate<HTMLBodyElement, PageSnapshot> {\n  viewWillCacheSnapshot(): void\n}\n\ntype PageViewRenderer = PageRenderer | ErrorRenderer\n\nexport class PageView extends View<HTMLBodyElement, PageSnapshot, PageViewRenderer, PageViewDelegate> {\n  readonly snapshotCache = new SnapshotCache(10)\n  lastRenderedLocation = new URL(location.href)\n  forceReloaded = false\n\n  renderPage(snapshot: PageSnapshot, isPreview = false, willRender = true, visit?: Visit) {\n    const renderer = new PageRenderer(this.snapshot, snapshot, PageRenderer.renderElement, isPreview, willRender)\n    if (!renderer.shouldRender) {\n      this.forceReloaded = true\n    } else {\n      visit?.changeHistory()\n    }\n    return this.render(renderer)\n  }\n\n  renderError(snapshot: PageSnapshot, visit?: Visit) {\n    visit?.changeHistory()\n    const renderer = new ErrorRenderer(this.snapshot, snapshot, ErrorRenderer.renderElement, false)\n    return this.render(renderer)\n  }\n\n  clearSnapshotCache() {\n    this.snapshotCache.clear()\n  }\n\n  async cacheSnapshot() {\n    if (this.shouldCacheSnapshot) {\n      this.delegate.viewWillCacheSnapshot()\n      const { snapshot, lastRenderedLocation: location } = this\n      await nextEventLoopTick()\n      const cachedSnapshot = snapshot.clone()\n      this.snapshotCache.put(location, cachedSnapshot)\n      return cachedSnapshot\n    }\n  }\n\n  getCachedSnapshotForLocation(location: URL) {\n    return this.snapshotCache.get(location)\n  }\n\n  get snapshot() {\n    return PageSnapshot.fromElement(this.element)\n  }\n\n  get shouldCacheSnapshot() {\n    return this.snapshot.isCacheable\n  }\n}\n","import { Navigator } from \"./navigator\"\nimport { PageSnapshot } from \"./page_snapshot\"\nimport { SnapshotCache } from \"./snapshot_cache\"\n\nexport interface PreloaderDelegate {\n  readonly navigator: Navigator\n}\n\nexport class Preloader {\n  readonly delegate: PreloaderDelegate\n  readonly selector: string = \"a[data-turbo-preload]\"\n\n  constructor(delegate: PreloaderDelegate) {\n    this.delegate = delegate\n  }\n\n  get snapshotCache(): SnapshotCache {\n    return this.delegate.navigator.view.snapshotCache\n  }\n\n  start() {\n    if (document.readyState === \"loading\") {\n      return document.addEventListener(\"DOMContentLoaded\", () => {\n        this.preloadOnLoadLinksForView(document.body)\n      })\n    } else {\n      this.preloadOnLoadLinksForView(document.body)\n    }\n  }\n\n  preloadOnLoadLinksForView(element: Element) {\n    for (const link of element.querySelectorAll<HTMLAnchorElement>(this.selector)) {\n      this.preloadURL(link)\n    }\n  }\n\n  async preloadURL(link: HTMLAnchorElement) {\n    const location = new URL(link.href)\n\n    if (this.snapshotCache.has(location)) {\n      return\n    }\n\n    try {\n      const response = await fetch(location.toString(), { headers: { \"VND.PREFETCH\": \"true\", Accept: \"text/html\" } })\n      const responseText = await response.text()\n      const snapshot = PageSnapshot.fromHTMLString(responseText)\n\n      this.snapshotCache.put(location, snapshot)\n    } catch (_) {\n      // If we cannot preload that is ok!\n    }\n  }\n}\n","import { Adapter } from \"./native/adapter\"\nimport { BrowserAdapter, ReloadReason } from \"./native/browser_adapter\"\nimport { CacheObserver } from \"../observers/cache_observer\"\nimport { FormSubmitObserver, FormSubmitObserverDelegate } from \"../observers/form_submit_observer\"\nimport { FrameRedirector } from \"./frames/frame_redirector\"\nimport { History, HistoryDelegate } from \"./drive/history\"\nimport { LinkClickObserver, LinkClickObserverDelegate } from \"../observers/link_click_observer\"\nimport { FormLinkInterceptor, FormLinkInterceptorDelegate } from \"../observers/form_link_interceptor\"\nimport { getAction, expandURL, locationIsVisitable, Locatable } from \"./url\"\nimport { Navigator, NavigatorDelegate } from \"./drive/navigator\"\nimport { PageObserver, PageObserverDelegate } from \"../observers/page_observer\"\nimport { ScrollObserver } from \"../observers/scroll_observer\"\nimport { StreamMessage } from \"./streams/stream_message\"\nimport { StreamObserver } from \"../observers/stream_observer\"\nimport { Action, Position, StreamSource, isAction } from \"./types\"\nimport { clearBusyState, dispatch, markAsBusy } from \"../util\"\nimport { PageView, PageViewDelegate, PageViewRenderOptions } from \"./drive/page_view\"\nimport { Visit, VisitOptions } from \"./drive/visit\"\nimport { PageSnapshot } from \"./drive/page_snapshot\"\nimport { FrameElement } from \"../elements/frame_element\"\nimport { FrameViewRenderOptions } from \"./frames/frame_view\"\nimport { FetchResponse } from \"../http/fetch_response\"\nimport { Preloader, PreloaderDelegate } from \"./drive/preloader\"\n\nexport type TimingData = unknown\nexport type TurboBeforeCacheEvent = CustomEvent\nexport type TurboBeforeRenderEvent = CustomEvent<{ newBody: HTMLBodyElement } & PageViewRenderOptions>\nexport type TurboBeforeVisitEvent = CustomEvent<{ url: string }>\nexport type TurboClickEvent = CustomEvent<{ url: string; originalEvent: MouseEvent }>\nexport type TurboFrameLoadEvent = CustomEvent\nexport type TurboBeforeFrameRenderEvent = CustomEvent<{ newFrame: FrameElement } & FrameViewRenderOptions>\nexport type TurboFrameRenderEvent = CustomEvent<{ fetchResponse: FetchResponse }>\nexport type TurboLoadEvent = CustomEvent<{ url: string; timing: TimingData }>\nexport type TurboRenderEvent = CustomEvent\nexport type TurboVisitEvent = CustomEvent<{ url: string; action: Action }>\n\nexport class Session\n  implements\n    FormSubmitObserverDelegate,\n    HistoryDelegate,\n    FormLinkInterceptorDelegate,\n    LinkClickObserverDelegate,\n    NavigatorDelegate,\n    PageObserverDelegate,\n    PageViewDelegate,\n    PreloaderDelegate\n{\n  readonly navigator = new Navigator(this)\n  readonly history = new History(this)\n  readonly preloader = new Preloader(this)\n  readonly view = new PageView(this, document.documentElement as HTMLBodyElement)\n  adapter: Adapter = new BrowserAdapter(this)\n\n  readonly pageObserver = new PageObserver(this)\n  readonly cacheObserver = new CacheObserver()\n  readonly linkClickObserver = new LinkClickObserver(this)\n  readonly formSubmitObserver = new FormSubmitObserver(this, document)\n  readonly scrollObserver = new ScrollObserver(this)\n  readonly streamObserver = new StreamObserver(this)\n  readonly formLinkInterceptor = new FormLinkInterceptor(this, document.documentElement)\n  readonly frameRedirector = new FrameRedirector(document.documentElement)\n\n  drive = true\n  enabled = true\n  progressBarDelay = 500\n  started = false\n  formMode = \"on\"\n\n  start() {\n    if (!this.started) {\n      this.pageObserver.start()\n      this.cacheObserver.start()\n      this.formLinkInterceptor.start()\n      this.linkClickObserver.start()\n      this.formSubmitObserver.start()\n      this.scrollObserver.start()\n      this.streamObserver.start()\n      this.frameRedirector.start()\n      this.history.start()\n      this.preloader.start()\n      this.started = true\n      this.enabled = true\n    }\n  }\n\n  disable() {\n    this.enabled = false\n  }\n\n  stop() {\n    if (this.started) {\n      this.pageObserver.stop()\n      this.cacheObserver.stop()\n      this.formLinkInterceptor.stop()\n      this.linkClickObserver.stop()\n      this.formSubmitObserver.stop()\n      this.scrollObserver.stop()\n      this.streamObserver.stop()\n      this.frameRedirector.stop()\n      this.history.stop()\n      this.started = false\n    }\n  }\n\n  registerAdapter(adapter: Adapter) {\n    this.adapter = adapter\n  }\n\n  visit(location: Locatable, options: Partial<VisitOptions> = {}) {\n    this.navigator.proposeVisit(expandURL(location), options)\n  }\n\n  connectStreamSource(source: StreamSource) {\n    this.streamObserver.connectStreamSource(source)\n  }\n\n  disconnectStreamSource(source: StreamSource) {\n    this.streamObserver.disconnectStreamSource(source)\n  }\n\n  renderStreamMessage(message: StreamMessage | string) {\n    document.documentElement.appendChild(StreamMessage.wrap(message).fragment)\n  }\n\n  clearCache() {\n    this.view.clearSnapshotCache()\n  }\n\n  setProgressBarDelay(delay: number) {\n    this.progressBarDelay = delay\n  }\n\n  setFormMode(mode: string) {\n    this.formMode = mode\n  }\n\n  get location() {\n    return this.history.location\n  }\n\n  get restorationIdentifier() {\n    return this.history.restorationIdentifier\n  }\n\n  // History delegate\n\n  historyPoppedToLocationWithRestorationIdentifier(location: URL, restorationIdentifier: string) {\n    if (this.enabled) {\n      this.navigator.startVisit(location, restorationIdentifier, {\n        action: \"restore\",\n        historyChanged: true,\n      })\n    } else {\n      this.adapter.pageInvalidated({\n        reason: \"turbo_disabled\",\n      })\n    }\n  }\n\n  // Scroll observer delegate\n\n  scrollPositionChanged(position: Position) {\n    this.history.updateRestorationData({ scrollPosition: position })\n  }\n\n  // Form link interceptor delegate\n\n  shouldInterceptFormLinkClick(_link: Element): boolean {\n    return true\n  }\n\n  formLinkClickIntercepted(_link: Element, _form: HTMLFormElement) {}\n\n  // Link click observer delegate\n\n  willFollowLinkToLocation(link: Element, location: URL, event: MouseEvent) {\n    return (\n      this.elementDriveEnabled(link) &&\n      locationIsVisitable(location, this.snapshot.rootLocation) &&\n      this.applicationAllowsFollowingLinkToLocation(link, location, event)\n    )\n  }\n\n  followedLinkToLocation(link: Element, location: URL) {\n    const action = this.getActionForLink(link)\n    this.visit(location.href, { action })\n  }\n\n  // Navigator delegate\n\n  allowsVisitingLocationWithAction(location: URL, action?: Action) {\n    return this.locationWithActionIsSamePage(location, action) || this.applicationAllowsVisitingLocation(location)\n  }\n\n  visitProposedToLocation(location: URL, options: Partial<VisitOptions>) {\n    extendURLWithDeprecatedProperties(location)\n    this.adapter.visitProposedToLocation(location, options)\n  }\n\n  visitStarted(visit: Visit) {\n    extendURLWithDeprecatedProperties(visit.location)\n    if (!visit.silent) {\n      this.notifyApplicationAfterVisitingLocation(visit.location, visit.action)\n    }\n  }\n\n  visitCompleted(visit: Visit) {\n    this.notifyApplicationAfterPageLoad(visit.getTimingMetrics())\n  }\n\n  locationWithActionIsSamePage(location: URL, action?: Action): boolean {\n    return this.navigator.locationWithActionIsSamePage(location, action)\n  }\n\n  visitScrolledToSamePageLocation(oldURL: URL, newURL: URL) {\n    this.notifyApplicationAfterVisitingSamePageLocation(oldURL, newURL)\n  }\n\n  // Form submit observer delegate\n\n  willSubmitForm(form: HTMLFormElement, submitter?: HTMLElement): boolean {\n    const action = getAction(form, submitter)\n\n    return (\n      this.elementDriveEnabled(form) &&\n      (!submitter || this.formElementDriveEnabled(submitter)) &&\n      locationIsVisitable(expandURL(action), this.snapshot.rootLocation)\n    )\n  }\n\n  formSubmitted(form: HTMLFormElement, submitter?: HTMLElement) {\n    this.navigator.submitForm(form, submitter)\n  }\n\n  // Page observer delegate\n\n  pageBecameInteractive() {\n    this.view.lastRenderedLocation = this.location\n    this.notifyApplicationAfterPageLoad()\n  }\n\n  pageLoaded() {\n    this.history.assumeControlOfScrollRestoration()\n  }\n\n  pageWillUnload() {\n    this.history.relinquishControlOfScrollRestoration()\n  }\n\n  // Stream observer delegate\n\n  receivedMessageFromStream(message: StreamMessage) {\n    this.renderStreamMessage(message)\n  }\n\n  // Page view delegate\n\n  viewWillCacheSnapshot() {\n    if (!this.navigator.currentVisit?.silent) {\n      this.notifyApplicationBeforeCachingSnapshot()\n    }\n  }\n\n  allowsImmediateRender({ element }: PageSnapshot, options: PageViewRenderOptions) {\n    const event = this.notifyApplicationBeforeRender(element, options)\n    const {\n      defaultPrevented,\n      detail: { render },\n    } = event\n\n    if (this.view.renderer && render) {\n      this.view.renderer.renderElement = render\n    }\n\n    return !defaultPrevented\n  }\n\n  viewRenderedSnapshot(_snapshot: PageSnapshot, _isPreview: boolean) {\n    this.view.lastRenderedLocation = this.history.location\n    this.notifyApplicationAfterRender()\n  }\n\n  preloadOnLoadLinksForView(element: Element) {\n    this.preloader.preloadOnLoadLinksForView(element)\n  }\n\n  viewInvalidated(reason: ReloadReason) {\n    this.adapter.pageInvalidated(reason)\n  }\n\n  // Frame element\n\n  frameLoaded(frame: FrameElement) {\n    this.notifyApplicationAfterFrameLoad(frame)\n  }\n\n  frameRendered(fetchResponse: FetchResponse, frame: FrameElement) {\n    this.notifyApplicationAfterFrameRender(fetchResponse, frame)\n  }\n\n  // Application events\n\n  applicationAllowsFollowingLinkToLocation(link: Element, location: URL, ev: MouseEvent) {\n    const event = this.notifyApplicationAfterClickingLinkToLocation(link, location, ev)\n    return !event.defaultPrevented\n  }\n\n  applicationAllowsVisitingLocation(location: URL) {\n    const event = this.notifyApplicationBeforeVisitingLocation(location)\n    return !event.defaultPrevented\n  }\n\n  notifyApplicationAfterClickingLinkToLocation(link: Element, location: URL, event: MouseEvent) {\n    return dispatch<TurboClickEvent>(\"turbo:click\", {\n      target: link,\n      detail: { url: location.href, originalEvent: event },\n      cancelable: true,\n    })\n  }\n\n  notifyApplicationBeforeVisitingLocation(location: URL) {\n    return dispatch<TurboBeforeVisitEvent>(\"turbo:before-visit\", {\n      detail: { url: location.href },\n      cancelable: true,\n    })\n  }\n\n  notifyApplicationAfterVisitingLocation(location: URL, action: Action) {\n    markAsBusy(document.documentElement)\n    return dispatch<TurboVisitEvent>(\"turbo:visit\", { detail: { url: location.href, action } })\n  }\n\n  notifyApplicationBeforeCachingSnapshot() {\n    return dispatch<TurboBeforeCacheEvent>(\"turbo:before-cache\")\n  }\n\n  notifyApplicationBeforeRender(newBody: HTMLBodyElement, options: PageViewRenderOptions) {\n    return dispatch<TurboBeforeRenderEvent>(\"turbo:before-render\", {\n      detail: { newBody, ...options },\n      cancelable: true,\n    })\n  }\n\n  notifyApplicationAfterRender() {\n    return dispatch<TurboRenderEvent>(\"turbo:render\")\n  }\n\n  notifyApplicationAfterPageLoad(timing: TimingData = {}) {\n    clearBusyState(document.documentElement)\n    return dispatch<TurboLoadEvent>(\"turbo:load\", {\n      detail: { url: this.location.href, timing },\n    })\n  }\n\n  notifyApplicationAfterVisitingSamePageLocation(oldURL: URL, newURL: URL) {\n    dispatchEvent(\n      new HashChangeEvent(\"hashchange\", {\n        oldURL: oldURL.toString(),\n        newURL: newURL.toString(),\n      })\n    )\n  }\n\n  notifyApplicationAfterFrameLoad(frame: FrameElement) {\n    return dispatch<TurboFrameLoadEvent>(\"turbo:frame-load\", { target: frame })\n  }\n\n  notifyApplicationAfterFrameRender(fetchResponse: FetchResponse, frame: FrameElement) {\n    return dispatch<TurboFrameRenderEvent>(\"turbo:frame-render\", {\n      detail: { fetchResponse },\n      target: frame,\n      cancelable: true,\n    })\n  }\n\n  // Helpers\n\n  formElementDriveEnabled(element?: Element) {\n    if (this.formMode == \"off\") {\n      return false\n    }\n    if (this.formMode == \"optin\") {\n      const form = element?.closest(\"form[data-turbo]\")\n      return form?.getAttribute(\"data-turbo\") == \"true\"\n    }\n    return this.elementDriveEnabled(element)\n  }\n\n  elementDriveEnabled(element?: Element) {\n    const container = element?.closest(\"[data-turbo]\")\n\n    // Check if Drive is enabled on the session.\n    if (this.drive) {\n      // Drive should be enabled by default, unless `data-turbo=\"false\"`.\n      if (container) {\n        return container.getAttribute(\"data-turbo\") != \"false\"\n      } else {\n        return true\n      }\n    } else {\n      // Drive should be disabled by default, unless `data-turbo=\"true\"`.\n      if (container) {\n        return container.getAttribute(\"data-turbo\") == \"true\"\n      } else {\n        return false\n      }\n    }\n  }\n\n  // Private\n\n  getActionForLink(link: Element): Action {\n    const action = link.getAttribute(\"data-turbo-action\")\n    return isAction(action) ? action : \"advance\"\n  }\n\n  get snapshot() {\n    return this.view.snapshot\n  }\n}\n\n// Older versions of the Turbo Native adapters referenced the\n// `Location#absoluteURL` property in their implementations of\n// the `Adapter#visitProposedToLocation()` and `#visitStarted()`\n// methods. The Location class has since been removed in favor\n// of the DOM URL API, and accordingly all Adapter methods now\n// receive URL objects.\n//\n// We alias #absoluteURL to #toString() here to avoid crashing\n// older adapters which do not expect URL objects. We should\n// consider removing this support at some point in the future.\n\nfunction extendURLWithDeprecatedProperties(url: URL) {\n  Object.defineProperties(url, deprecatedLocationPropertyDescriptors)\n}\n\nconst deprecatedLocationPropertyDescriptors = {\n  absoluteURL: {\n    get() {\n      return this.toString()\n    },\n  },\n}\n","import { Session } from \"./session\"\nimport { setMetaContent } from \"../util\"\n\nexport class Cache {\n  readonly session: Session\n\n  constructor(session: Session) {\n    this.session = session\n  }\n\n  clear() {\n    this.session.clearCache()\n  }\n\n  resetCacheControl() {\n    this.setCacheControl(\"\")\n  }\n\n  exemptPageFromCache() {\n    this.setCacheControl(\"no-cache\")\n  }\n\n  exemptPageFromPreview() {\n    this.setCacheControl(\"no-preview\")\n  }\n\n  private setCacheControl(value: string) {\n    setMetaContent(\"turbo-cache-control\", value)\n  }\n}\n","import { StreamElement } from \"../../elements/stream_element\"\n\nexport const StreamActions: {\n  [action: string]: (this: StreamElement) => void\n} = {\n  after() {\n    this.targetElements.forEach((e) => e.parentElement?.insertBefore(this.templateContent, e.nextSibling))\n  },\n\n  append() {\n    this.removeDuplicateTargetChildren()\n    this.targetElements.forEach((e) => e.append(this.templateContent))\n  },\n\n  before() {\n    this.targetElements.forEach((e) => e.parentElement?.insertBefore(this.templateContent, e))\n  },\n\n  prepend() {\n    this.removeDuplicateTargetChildren()\n    this.targetElements.forEach((e) => e.prepend(this.templateContent))\n  },\n\n  remove() {\n    this.targetElements.forEach((e) => e.remove())\n  },\n\n  replace() {\n    this.targetElements.forEach((e) => e.replaceWith(this.templateContent))\n  },\n\n  update() {\n    this.targetElements.forEach((e) => e.replaceChildren(this.templateContent))\n  },\n}\n","import { Adapter } from \"./native/adapter\"\nimport { Session } from \"./session\"\nimport { Cache } from \"./cache\"\nimport { Locatable } from \"./url\"\nimport { StreamMessage } from \"./streams/stream_message\"\nimport { StreamSource } from \"./types\"\nimport { VisitOptions } from \"./drive/visit\"\nimport { PageRenderer } from \"./drive/page_renderer\"\nimport { PageSnapshot } from \"./drive/page_snapshot\"\nimport { FrameRenderer } from \"./frames/frame_renderer\"\nimport { FormSubmission } from \"./drive/form_submission\"\n\nconst session = new Session()\nconst cache = new Cache(session)\nconst { navigator } = session\nexport { navigator, session, cache, PageRenderer, PageSnapshot, FrameRenderer }\nexport {\n  TurboBeforeCacheEvent,\n  TurboBeforeRenderEvent,\n  TurboBeforeVisitEvent,\n  TurboClickEvent,\n  TurboFrameLoadEvent,\n  TurboFrameRenderEvent,\n  TurboLoadEvent,\n  TurboRenderEvent,\n  TurboVisitEvent,\n} from \"./session\"\n\nexport { TurboSubmitStartEvent, TurboSubmitEndEvent } from \"./drive/form_submission\"\nexport { TurboBeforeFetchRequestEvent, TurboBeforeFetchResponseEvent } from \"../http/fetch_request\"\nexport { TurboBeforeStreamRenderEvent } from \"../elements/stream_element\"\n\nexport { StreamActions } from \"./streams/stream_actions\"\n\n/**\n * Starts the main session.\n * This initialises any necessary observers such as those to monitor\n * link interactions.\n */\nexport function start() {\n  session.start()\n}\n\n/**\n * Registers an adapter for the main session.\n *\n * @param adapter Adapter to register\n */\nexport function registerAdapter(adapter: Adapter) {\n  session.registerAdapter(adapter)\n}\n\n/**\n * Performs an application visit to the given location.\n *\n * @param location Location to visit (a URL or path)\n * @param options Options to apply\n * @param options.action Type of history navigation to apply (\"restore\",\n * \"replace\" or \"advance\")\n * @param options.historyChanged Specifies whether the browser history has\n * already been changed for this visit or not\n * @param options.referrer Specifies the referrer of this visit such that\n * navigations to the same page will not result in a new history entry.\n * @param options.snapshotHTML Cached snapshot to render\n * @param options.response Response of the specified location\n */\nexport function visit(location: Locatable, options?: Partial<VisitOptions>) {\n  session.visit(location, options)\n}\n\n/**\n * Connects a stream source to the main session.\n *\n * @param source Stream source to connect\n */\nexport function connectStreamSource(source: StreamSource) {\n  session.connectStreamSource(source)\n}\n\n/**\n * Disconnects a stream source from the main session.\n *\n * @param source Stream source to disconnect\n */\nexport function disconnectStreamSource(source: StreamSource) {\n  session.disconnectStreamSource(source)\n}\n\n/**\n * Renders a stream message to the main session by appending it to the\n * current document.\n *\n * @param message Message to render\n */\nexport function renderStreamMessage(message: StreamMessage | string) {\n  session.renderStreamMessage(message)\n}\n\n/**\n * Removes all entries from the Turbo Drive page cache.\n * Call this when state has changed on the server that may affect cached pages.\n *\n * @deprecated since version 7.2.0 in favor of `Turbo.cache.clear()`\n */\nexport function clearCache() {\n  console.warn(\n    \"Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`\"\n  )\n  session.clearCache()\n}\n\n/**\n * Sets the delay after which the progress bar will appear during navigation.\n *\n * The progress bar appears after 500ms by default.\n *\n * Note that this method has no effect when used with the iOS or Android\n * adapters.\n *\n * @param delay Time to delay in milliseconds\n */\nexport function setProgressBarDelay(delay: number) {\n  session.setProgressBarDelay(delay)\n}\n\nexport function setConfirmMethod(confirmMethod: (message: string, element: HTMLFormElement) => Promise<boolean>) {\n  FormSubmission.confirmMethod = confirmMethod\n}\n\nexport function setFormMode(mode: string) {\n  session.setFormMode(mode)\n}\n","import {\n  FrameElement,\n  FrameElementDelegate,\n  FrameLoadingStyle,\n  FrameElementObservedAttribute,\n} from \"../../elements/frame_element\"\nimport { FetchMethod, FetchRequest, FetchRequestDelegate, FetchRequestHeaders } from \"../../http/fetch_request\"\nimport { FetchResponse } from \"../../http/fetch_response\"\nimport { AppearanceObserver, AppearanceObserverDelegate } from \"../../observers/appearance_observer\"\nimport {\n  clearBusyState,\n  dispatch,\n  getAttribute,\n  parseHTMLDocument,\n  markAsBusy,\n  uuid,\n  getHistoryMethodForAction,\n  getVisitAction,\n} from \"../../util\"\nimport { FormSubmission, FormSubmissionDelegate } from \"../drive/form_submission\"\nimport { Snapshot } from \"../snapshot\"\nimport { ViewDelegate, ViewRenderOptions } from \"../view\"\nimport { getAction, expandURL, urlsAreEqual, locationIsVisitable } from \"../url\"\nimport { FormSubmitObserver, FormSubmitObserverDelegate } from \"../../observers/form_submit_observer\"\nimport { FrameView } from \"./frame_view\"\nimport { LinkInterceptor, LinkInterceptorDelegate } from \"./link_interceptor\"\nimport { FormLinkInterceptor, FormLinkInterceptorDelegate } from \"../../observers/form_link_interceptor\"\nimport { FrameRenderer } from \"./frame_renderer\"\nimport { session } from \"../index\"\nimport { isAction, Action } from \"../types\"\nimport { VisitOptions } from \"../drive/visit\"\nimport { TurboBeforeFrameRenderEvent } from \"../session\"\n\nexport class FrameController\n  implements\n    AppearanceObserverDelegate,\n    FetchRequestDelegate,\n    FormSubmitObserverDelegate,\n    FormSubmissionDelegate,\n    FrameElementDelegate,\n    FormLinkInterceptorDelegate,\n    LinkInterceptorDelegate,\n    ViewDelegate<FrameElement, Snapshot<FrameElement>>\n{\n  readonly element: FrameElement\n  readonly view: FrameView\n  readonly appearanceObserver: AppearanceObserver\n  readonly formLinkInterceptor: FormLinkInterceptor\n  readonly linkInterceptor: LinkInterceptor\n  readonly formSubmitObserver: FormSubmitObserver\n  formSubmission?: FormSubmission\n  fetchResponseLoaded = (_fetchResponse: FetchResponse) => {}\n  private currentFetchRequest: FetchRequest | null = null\n  private resolveVisitPromise = () => {}\n  private connected = false\n  private hasBeenLoaded = false\n  private ignoredAttributes: Set<FrameElementObservedAttribute> = new Set()\n  private action: Action | null = null\n  private frame?: FrameElement\n  readonly restorationIdentifier: string\n  private previousFrameElement?: FrameElement\n\n  constructor(element: FrameElement) {\n    this.element = element\n    this.view = new FrameView(this, this.element)\n    this.appearanceObserver = new AppearanceObserver(this, this.element)\n    this.formLinkInterceptor = new FormLinkInterceptor(this, this.element)\n    this.linkInterceptor = new LinkInterceptor(this, this.element)\n    this.restorationIdentifier = uuid()\n    this.formSubmitObserver = new FormSubmitObserver(this, this.element)\n  }\n\n  connect() {\n    if (!this.connected) {\n      this.connected = true\n      if (this.loadingStyle == FrameLoadingStyle.lazy) {\n        this.appearanceObserver.start()\n      } else {\n        this.loadSourceURL()\n      }\n      this.formLinkInterceptor.start()\n      this.linkInterceptor.start()\n      this.formSubmitObserver.start()\n    }\n  }\n\n  disconnect() {\n    if (this.connected) {\n      this.connected = false\n      this.appearanceObserver.stop()\n      this.formLinkInterceptor.stop()\n      this.linkInterceptor.stop()\n      this.formSubmitObserver.stop()\n    }\n  }\n\n  disabledChanged() {\n    if (this.loadingStyle == FrameLoadingStyle.eager) {\n      this.loadSourceURL()\n    }\n  }\n\n  sourceURLChanged() {\n    if (this.isIgnoringChangesTo(\"src\")) return\n\n    if (this.element.isConnected) {\n      this.complete = false\n    }\n\n    if (this.loadingStyle == FrameLoadingStyle.eager || this.hasBeenLoaded) {\n      this.loadSourceURL()\n    }\n  }\n\n  completeChanged() {\n    if (this.isIgnoringChangesTo(\"complete\")) return\n\n    this.loadSourceURL()\n  }\n\n  loadingStyleChanged() {\n    if (this.loadingStyle == FrameLoadingStyle.lazy) {\n      this.appearanceObserver.start()\n    } else {\n      this.appearanceObserver.stop()\n      this.loadSourceURL()\n    }\n  }\n\n  private async loadSourceURL() {\n    if (this.enabled && this.isActive && !this.complete && this.sourceURL) {\n      this.element.loaded = this.visit(expandURL(this.sourceURL))\n      this.appearanceObserver.stop()\n      await this.element.loaded\n      this.hasBeenLoaded = true\n    }\n  }\n\n  async loadResponse(fetchResponse: FetchResponse) {\n    if (fetchResponse.redirected || (fetchResponse.succeeded && fetchResponse.isHTML)) {\n      this.sourceURL = fetchResponse.response.url\n    }\n\n    try {\n      const html = await fetchResponse.responseHTML\n      if (html) {\n        const { body } = parseHTMLDocument(html)\n        const snapshot = new Snapshot(await this.extractForeignFrameElement(body))\n        const renderer = new FrameRenderer(\n          this,\n          this.view.snapshot,\n          snapshot,\n          FrameRenderer.renderElement,\n          false,\n          false\n        )\n        if (this.view.renderPromise) await this.view.renderPromise\n        this.changeHistory()\n\n        await this.view.render(renderer)\n        this.complete = true\n        session.frameRendered(fetchResponse, this.element)\n        session.frameLoaded(this.element)\n        this.fetchResponseLoaded(fetchResponse)\n      }\n    } catch (error) {\n      console.error(error)\n      this.view.invalidate()\n    } finally {\n      this.fetchResponseLoaded = () => {}\n    }\n  }\n\n  // Appearance observer delegate\n\n  elementAppearedInViewport(_element: Element) {\n    this.loadSourceURL()\n  }\n\n  // Form link interceptor delegate\n\n  shouldInterceptFormLinkClick(link: Element): boolean {\n    return this.shouldInterceptNavigation(link)\n  }\n\n  formLinkClickIntercepted(link: Element, form: HTMLFormElement): void {\n    const frame = this.findFrameElement(link)\n    if (frame) form.setAttribute(\"data-turbo-frame\", frame.id)\n  }\n\n  // Link interceptor delegate\n\n  shouldInterceptLinkClick(element: Element, _url: string) {\n    return this.shouldInterceptNavigation(element)\n  }\n\n  linkClickIntercepted(element: Element, url: string) {\n    this.navigateFrame(element, url)\n  }\n\n  // Form interceptor delegate\n\n  willSubmitForm(element: HTMLFormElement, submitter?: HTMLElement) {\n    return element.closest(\"turbo-frame\") == this.element && this.shouldInterceptNavigation(element, submitter)\n  }\n\n  formSubmitted(element: HTMLFormElement, submitter?: HTMLElement) {\n    if (this.formSubmission) {\n      this.formSubmission.stop()\n    }\n\n    this.formSubmission = new FormSubmission(this, element, submitter)\n    const { fetchRequest } = this.formSubmission\n    this.prepareHeadersForRequest(fetchRequest.headers, fetchRequest)\n    this.formSubmission.start()\n  }\n\n  // Fetch request delegate\n\n  prepareHeadersForRequest(headers: FetchRequestHeaders, _request: FetchRequest) {\n    headers[\"Turbo-Frame\"] = this.id\n  }\n\n  requestStarted(_request: FetchRequest) {\n    markAsBusy(this.element)\n  }\n\n  requestPreventedHandlingResponse(_request: FetchRequest, _response: FetchResponse) {\n    this.resolveVisitPromise()\n  }\n\n  async requestSucceededWithResponse(request: FetchRequest, response: FetchResponse) {\n    await this.loadResponse(response)\n    this.resolveVisitPromise()\n  }\n\n  requestFailedWithResponse(request: FetchRequest, response: FetchResponse) {\n    console.error(response)\n    this.resolveVisitPromise()\n  }\n\n  requestErrored(request: FetchRequest, error: Error) {\n    console.error(error)\n    this.resolveVisitPromise()\n  }\n\n  requestFinished(_request: FetchRequest) {\n    clearBusyState(this.element)\n  }\n\n  // Form submission delegate\n\n  formSubmissionStarted({ formElement }: FormSubmission) {\n    markAsBusy(formElement, this.findFrameElement(formElement))\n  }\n\n  formSubmissionSucceededWithResponse(formSubmission: FormSubmission, response: FetchResponse) {\n    const frame = this.findFrameElement(formSubmission.formElement, formSubmission.submitter)\n\n    this.proposeVisitIfNavigatedWithAction(frame, formSubmission.formElement, formSubmission.submitter)\n\n    frame.delegate.loadResponse(response)\n  }\n\n  formSubmissionFailedWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse) {\n    this.element.delegate.loadResponse(fetchResponse)\n  }\n\n  formSubmissionErrored(formSubmission: FormSubmission, error: Error) {\n    console.error(error)\n  }\n\n  formSubmissionFinished({ formElement }: FormSubmission) {\n    clearBusyState(formElement, this.findFrameElement(formElement))\n  }\n\n  // View delegate\n\n  allowsImmediateRender({ element: newFrame }: Snapshot<FrameElement>, options: ViewRenderOptions<FrameElement>) {\n    const event = dispatch<TurboBeforeFrameRenderEvent>(\"turbo:before-frame-render\", {\n      target: this.element,\n      detail: { newFrame, ...options },\n      cancelable: true,\n    })\n    const {\n      defaultPrevented,\n      detail: { render },\n    } = event\n\n    if (this.view.renderer && render) {\n      this.view.renderer.renderElement = render\n    }\n\n    return !defaultPrevented\n  }\n\n  viewRenderedSnapshot(_snapshot: Snapshot, _isPreview: boolean) {}\n\n  preloadOnLoadLinksForView(element: Element) {\n    session.preloadOnLoadLinksForView(element)\n  }\n\n  viewInvalidated() {}\n\n  // Frame renderer delegate\n  frameExtracted(element: FrameElement) {\n    this.previousFrameElement = element\n  }\n\n  visitCachedSnapshot = ({ element }: Snapshot) => {\n    const frame = element.querySelector(\"#\" + this.element.id)\n\n    if (frame && this.previousFrameElement) {\n      frame.replaceChildren(...this.previousFrameElement.children)\n    }\n\n    delete this.previousFrameElement\n  }\n\n  // Private\n\n  private async visit(url: URL) {\n    const request = new FetchRequest(this, FetchMethod.get, url, new URLSearchParams(), this.element)\n\n    this.currentFetchRequest?.cancel()\n    this.currentFetchRequest = request\n\n    return new Promise<void>((resolve) => {\n      this.resolveVisitPromise = () => {\n        this.resolveVisitPromise = () => {}\n        this.currentFetchRequest = null\n        resolve()\n      }\n      request.perform()\n    })\n  }\n\n  private navigateFrame(element: Element, url: string, submitter?: HTMLElement) {\n    const frame = this.findFrameElement(element, submitter)\n\n    this.proposeVisitIfNavigatedWithAction(frame, element, submitter)\n\n    frame.src = url\n  }\n\n  private proposeVisitIfNavigatedWithAction(frame: FrameElement, element: Element, submitter?: HTMLElement) {\n    this.action = getVisitAction(submitter, element, frame)\n    this.frame = frame\n\n    if (isAction(this.action)) {\n      const { visitCachedSnapshot } = frame.delegate\n\n      frame.delegate.fetchResponseLoaded = (fetchResponse: FetchResponse) => {\n        if (frame.src) {\n          const { statusCode, redirected } = fetchResponse\n          const responseHTML = frame.ownerDocument.documentElement.outerHTML\n          const response = { statusCode, redirected, responseHTML }\n          const options: Partial<VisitOptions> = {\n            response,\n            visitCachedSnapshot,\n            willRender: false,\n            updateHistory: false,\n            restorationIdentifier: this.restorationIdentifier,\n          }\n\n          if (this.action) options.action = this.action\n\n          session.visit(frame.src, options)\n        }\n      }\n    }\n  }\n\n  changeHistory() {\n    if (this.action && this.frame) {\n      const method = getHistoryMethodForAction(this.action)\n      session.history.update(method, expandURL(this.frame.src || \"\"), this.restorationIdentifier)\n    }\n  }\n\n  private findFrameElement(element: Element, submitter?: HTMLElement) {\n    const id = getAttribute(\"data-turbo-frame\", submitter, element) || this.element.getAttribute(\"target\")\n    return getFrameElementById(id) ?? this.element\n  }\n\n  async extractForeignFrameElement(container: ParentNode): Promise<FrameElement> {\n    let element\n    const id = CSS.escape(this.id)\n\n    try {\n      element = activateElement(container.querySelector(`turbo-frame#${id}`), this.sourceURL)\n      if (element) {\n        return element\n      }\n\n      element = activateElement(container.querySelector(`turbo-frame[src][recurse~=${id}]`), this.sourceURL)\n      if (element) {\n        await element.loaded\n        return await this.extractForeignFrameElement(element)\n      }\n\n      console.error(`Response has no matching <turbo-frame id=\"${id}\"> element`)\n    } catch (error) {\n      console.error(error)\n    }\n\n    return new FrameElement()\n  }\n\n  private formActionIsVisitable(form: HTMLFormElement, submitter?: HTMLElement) {\n    const action = getAction(form, submitter)\n\n    return locationIsVisitable(expandURL(action), this.rootLocation)\n  }\n\n  private shouldInterceptNavigation(element: Element, submitter?: HTMLElement) {\n    const id = getAttribute(\"data-turbo-frame\", submitter, element) || this.element.getAttribute(\"target\")\n\n    if (element instanceof HTMLFormElement && !this.formActionIsVisitable(element, submitter)) {\n      return false\n    }\n\n    if (!this.enabled || id == \"_top\") {\n      return false\n    }\n\n    if (id) {\n      const frameElement = getFrameElementById(id)\n      if (frameElement) {\n        return !frameElement.disabled\n      }\n    }\n\n    if (!session.elementDriveEnabled(element)) {\n      return false\n    }\n\n    if (submitter && !session.elementDriveEnabled(submitter)) {\n      return false\n    }\n\n    return true\n  }\n\n  // Computed properties\n\n  get id() {\n    return this.element.id\n  }\n\n  get enabled() {\n    return !this.element.disabled\n  }\n\n  get sourceURL() {\n    if (this.element.src) {\n      return this.element.src\n    }\n  }\n\n  set sourceURL(sourceURL: string | undefined) {\n    this.ignoringChangesToAttribute(\"src\", () => {\n      this.element.src = sourceURL ?? null\n    })\n  }\n\n  get loadingStyle() {\n    return this.element.loading\n  }\n\n  get isLoading() {\n    return this.formSubmission !== undefined || this.resolveVisitPromise() !== undefined\n  }\n\n  get complete() {\n    return this.element.hasAttribute(\"complete\")\n  }\n\n  set complete(value: boolean) {\n    this.ignoringChangesToAttribute(\"complete\", () => {\n      if (value) {\n        this.element.setAttribute(\"complete\", \"\")\n      } else {\n        this.element.removeAttribute(\"complete\")\n      }\n    })\n  }\n\n  get isActive() {\n    return this.element.isActive && this.connected\n  }\n\n  get rootLocation() {\n    const meta = this.element.ownerDocument.querySelector<HTMLMetaElement>(`meta[name=\"turbo-root\"]`)\n    const root = meta?.content ?? \"/\"\n    return expandURL(root)\n  }\n\n  private isIgnoringChangesTo(attributeName: FrameElementObservedAttribute): boolean {\n    return this.ignoredAttributes.has(attributeName)\n  }\n\n  private ignoringChangesToAttribute(attributeName: FrameElementObservedAttribute, callback: () => void) {\n    this.ignoredAttributes.add(attributeName)\n    callback()\n    this.ignoredAttributes.delete(attributeName)\n  }\n}\n\nfunction getFrameElementById(id: string | null) {\n  if (id != null) {\n    const element = document.getElementById(id)\n    if (element instanceof FrameElement) {\n      return element\n    }\n  }\n}\n\nfunction activateElement(element: Element | null, currentURL?: string | null) {\n  if (element) {\n    const src = element.getAttribute(\"src\")\n    if (src != null && currentURL != null && urlsAreEqual(src, currentURL)) {\n      throw new Error(`Matching <turbo-frame id=\"${element.id}\"> element has a source URL which references itself`)\n    }\n    if (element.ownerDocument !== document) {\n      element = document.importNode(element, true)\n    }\n\n    if (element instanceof FrameElement) {\n      element.connectedCallback()\n      element.disconnectedCallback()\n      return element\n    }\n  }\n}\n","import { StreamActions } from \"../core/streams/stream_actions\"\nimport { nextAnimationFrame } from \"../util\"\n\nexport type TurboBeforeStreamRenderEvent = CustomEvent\n\n// <turbo-stream action=replace target=id><template>...\n\n/**\n * Renders updates to the page from a stream of messages.\n *\n * Using the `action` attribute, this can be configured one of four ways:\n *\n * - `append` - appends the result to the container\n * - `prepend` - prepends the result to the container\n * - `replace` - replaces the contents of the container\n * - `remove` - removes the container\n * - `before` - inserts the result before the target\n * - `after` - inserts the result after the target\n *\n * @customElement turbo-stream\n * @example\n *   <turbo-stream action=\"append\" target=\"dom_id\">\n *     <template>\n *       Content to append to container designated with the dom_id.\n *     </template>\n *   </turbo-stream>\n */\nexport class StreamElement extends HTMLElement {\n  async connectedCallback() {\n    try {\n      await this.render()\n    } catch (error) {\n      console.error(error)\n    } finally {\n      this.disconnect()\n    }\n  }\n\n  private renderPromise?: Promise<void>\n\n  async render() {\n    return (this.renderPromise ??= (async () => {\n      if (this.dispatchEvent(this.beforeRenderEvent)) {\n        await nextAnimationFrame()\n        this.performAction()\n      }\n    })())\n  }\n\n  disconnect() {\n    try {\n      this.remove()\n      // eslint-disable-next-line no-empty\n    } catch {}\n  }\n\n  /**\n   * Removes duplicate children (by ID)\n   */\n  removeDuplicateTargetChildren() {\n    this.duplicateChildren.forEach((c) => c.remove())\n  }\n\n  /**\n   * Gets the list of duplicate children (i.e. those with the same ID)\n   */\n  get duplicateChildren() {\n    const existingChildren = this.targetElements.flatMap((e) => [...e.children]).filter((c) => !!c.id)\n    const newChildrenIds = [...(this.templateContent?.children || [])].filter((c) => !!c.id).map((c) => c.id)\n\n    return existingChildren.filter((c) => newChildrenIds.includes(c.id))\n  }\n\n  /**\n   * Gets the action function to be performed.\n   */\n  get performAction() {\n    if (this.action) {\n      const actionFunction = StreamActions[this.action]\n      if (actionFunction) {\n        return actionFunction\n      }\n      this.raise(\"unknown action\")\n    }\n    this.raise(\"action attribute is missing\")\n  }\n\n  /**\n   * Gets the target elements which the template will be rendered to.\n   */\n  get targetElements() {\n    if (this.target) {\n      return this.targetElementsById\n    } else if (this.targets) {\n      return this.targetElementsByQuery\n    } else {\n      this.raise(\"target or targets attribute is missing\")\n    }\n  }\n\n  /**\n   * Gets the contents of the main `<template>`.\n   */\n  get templateContent() {\n    return this.templateElement.content.cloneNode(true)\n  }\n\n  /**\n   * Gets the main `<template>` used for rendering\n   */\n  get templateElement() {\n    if (this.firstElementChild instanceof HTMLTemplateElement) {\n      return this.firstElementChild\n    }\n    this.raise(\"first child element must be a <template> element\")\n  }\n\n  /**\n   * Gets the current action.\n   */\n  get action() {\n    return this.getAttribute(\"action\")\n  }\n\n  /**\n   * Gets the current target (an element ID) to which the result will\n   * be rendered.\n   */\n  get target() {\n    return this.getAttribute(\"target\")\n  }\n\n  /**\n   * Gets the current \"targets\" selector (a CSS selector)\n   */\n  get targets() {\n    return this.getAttribute(\"targets\")\n  }\n\n  private raise(message: string): never {\n    throw new Error(`${this.description}: ${message}`)\n  }\n\n  private get description() {\n    return (this.outerHTML.match(/<[^>]+>/) ?? [])[0] ?? \"<turbo-stream>\"\n  }\n\n  private get beforeRenderEvent(): TurboBeforeStreamRenderEvent {\n    return new CustomEvent(\"turbo:before-stream-render\", {\n      bubbles: true,\n      cancelable: true,\n    })\n  }\n\n  private get targetElementsById() {\n    const element = this.ownerDocument?.getElementById(this.target!)\n\n    if (element !== null) {\n      return [element]\n    } else {\n      return []\n    }\n  }\n\n  private get targetElementsByQuery() {\n    const elements = this.ownerDocument?.querySelectorAll(this.targets!)\n\n    if (elements.length !== 0) {\n      return Array.prototype.slice.call(elements)\n    } else {\n      return []\n    }\n  }\n}\n","import { StreamSource } from \"../core/types\"\nimport { connectStreamSource, disconnectStreamSource } from \"../index\"\n\nexport class StreamSourceElement extends HTMLElement {\n  streamSource: StreamSource | null = null\n\n  connectedCallback() {\n    this.streamSource = this.src.match(/^ws{1,2}:/) ? new WebSocket(this.src) : new EventSource(this.src)\n\n    connectStreamSource(this.streamSource)\n  }\n\n  disconnectedCallback() {\n    if (this.streamSource) {\n      disconnectStreamSource(this.streamSource)\n    }\n  }\n\n  get src(): string {\n    return this.getAttribute(\"src\") || \"\"\n  }\n}\n","import { FrameController } from \"../core/frames/frame_controller\"\nimport { FrameElement } from \"./frame_element\"\nimport { StreamElement } from \"./stream_element\"\nimport { StreamSourceElement } from \"./stream_source_element\"\n\nFrameElement.delegateConstructor = FrameController\n\nexport * from \"./frame_element\"\nexport * from \"./stream_element\"\n\nif (customElements.get(\"turbo-frame\") === undefined) {\n  customElements.define(\"turbo-frame\", FrameElement)\n}\n\nif (customElements.get(\"turbo-stream\") === undefined) {\n  customElements.define(\"turbo-stream\", StreamElement)\n}\n\nif (customElements.get(\"turbo-stream-source\") === undefined) {\n  customElements.define(\"turbo-stream-source\", StreamSourceElement)\n}\n","import { unindent } from \"./util\"\n;(() => {\n  let element: Element | null = document.currentScript\n  if (!element) return\n  if (element.hasAttribute(\"data-turbo-suppress-warning\")) return\n\n  element = element.parentElement\n  while (element) {\n    if (element == document.body) {\n      return console.warn(\n        unindent`\n        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!\n\n        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\n\n        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements\n\n        \n        Suppress this warning by adding a \"data-turbo-suppress-warning\" attribute to: %s\n      `,\n        element.outerHTML\n      )\n    }\n\n    element = element.parentElement\n  }\n})()\n","import \"./polyfills\"\nimport \"./elements\"\nimport \"./script_warning\"\n\nimport * as Turbo from \"./core\"\n\nwindow.Turbo = Turbo\nTurbo.start()\n\nexport * from \"./core\"\n","import intern from \"intern\"\nimport Test from \"intern/lib/Test\"\nimport { Tests } from \"intern/lib/interfaces/object\"\n\nexport class InternTestCase {\n  readonly internTest: Test\n\n  static registerSuite() {\n    return intern.getInterface(\"object\").registerSuite(this.name, { tests: this.tests })\n  }\n\n  static get tests(): Tests {\n    return this.testNames.reduce((tests, testName): Tests => {\n      return { ...tests, [testName]: (internTest) => this.runTest(internTest) }\n    }, {} as Tests)\n  }\n\n  static get testNames(): string[] {\n    return this.testKeys.map((key) => key.slice(5))\n  }\n\n  static get testKeys(): string[] {\n    return Object.getOwnPropertyNames(this.prototype).filter((key) => key.match(/^test /))\n  }\n\n  static runTest(internTest: Test): Promise<void> {\n    const testCase = new this(internTest)\n    return testCase.runTest()\n  }\n\n  constructor(internTest: Test) {\n    this.internTest = internTest\n  }\n\n  get testName() {\n    return this.internTest.name\n  }\n\n  async runTest() {\n    try {\n      await this.setup()\n      await this.beforeTest()\n      await this.test()\n      await this.afterTest()\n    } finally {\n      await this.teardown()\n    }\n  }\n\n  get assert() {\n    return intern.getPlugin(\"chai\").assert\n  }\n\n  async setup() {}\n\n  async beforeTest() {}\n\n  get test(): () => Promise<void> {\n    const method = (this as any)[`test ${this.testName}`]\n    if (method != null && typeof method == \"function\") {\n      return method\n    } else {\n      throw new Error(`No such test \"${this.testName}\"`)\n    }\n  }\n\n  async afterTest() {}\n\n  async teardown() {}\n}\n","import { InternTestCase } from \"./intern_test_case\"\n\nexport class DOMTestCase extends InternTestCase {\n  fixtureElement = document.createElement(\"main\")\n\n  async setup() {\n    this.fixtureElement.hidden = true\n    document.body.insertAdjacentElement(\"afterbegin\", this.fixtureElement)\n  }\n\n  async teardown() {\n    this.fixtureElement.innerHTML = \"\"\n    this.fixtureElement.remove()\n  }\n\n  append(node: Node) {\n    this.fixtureElement.appendChild(node)\n  }\n\n  find(selector: string) {\n    return this.fixtureElement.querySelector(selector)\n  }\n\n  get fixtureHTML() {\n    return this.fixtureElement.innerHTML\n  }\n\n  set fixtureHTML(html: string) {\n    this.fixtureElement.innerHTML = html\n  }\n}\n","import { VisitOptions, Visit } from \"../../core/drive/visit\"\nimport { FormSubmission } from \"../../core/drive/form_submission\"\nimport { Adapter } from \"../../core/native/adapter\"\nimport * as Turbo from \"../../index\"\nimport { DOMTestCase } from \"../helpers/dom_test_case\"\n\nexport class DeprecatedAdapterSupportTest extends DOMTestCase implements Adapter {\n  locations: any[] = []\n  originalAdapter = Turbo.navigator.adapter\n\n  async setup() {\n    Turbo.registerAdapter(this)\n  }\n\n  async teardown() {\n    Turbo.registerAdapter(this.originalAdapter)\n  }\n\n  async \"test visit proposal location includes deprecated absoluteURL property\"() {\n    Turbo.navigator.proposeVisit(new URL(window.location.toString()))\n    this.assert.equal(this.locations.length, 1)\n\n    const [location] = this.locations\n    this.assert.equal(location.toString(), location.absoluteURL)\n  }\n\n  async \"test visit start location includes deprecated absoluteURL property\"() {\n    Turbo.navigator.startVisit(window.location.toString(), \"123\")\n    this.assert.equal(this.locations.length, 1)\n\n    const [location] = this.locations\n    this.assert.equal(location.toString(), location.absoluteURL)\n  }\n\n  // Adapter interface\n\n  visitProposedToLocation(location: URL, _options?: Partial<VisitOptions>): void {\n    this.locations.push(location)\n  }\n\n  visitStarted(visit: Visit): void {\n    this.locations.push(visit.location)\n    visit.cancel()\n  }\n\n  visitCompleted(_visit: Visit): void {}\n\n  visitFailed(_visit: Visit): void {}\n\n  visitRequestStarted(_visit: Visit): void {}\n\n  visitRequestCompleted(_visit: Visit): void {}\n\n  visitRequestFailedWithStatusCode(_visit: Visit, _statusCode: number): void {}\n\n  visitRequestFinished(_visit: Visit): void {}\n\n  visitRendered(_visit: Visit): void {}\n\n  formSubmissionStarted(_formSubmission: FormSubmission): void {}\n\n  formSubmissionFinished(_formSubmission: FormSubmission): void {}\n\n  pageInvalidated(): void {}\n}\n\nDeprecatedAdapterSupportTest.registerSuite()\n","import { StreamElement } from \"../../elements\"\nimport { nextAnimationFrame } from \"../../util\"\nimport { DOMTestCase } from \"../helpers/dom_test_case\"\n\nexport class StreamElementTests extends DOMTestCase {\n  async beforeTest() {\n    this.fixtureHTML = `<div><div id=\"hello\">Hello Turbo</div></div>`\n  }\n\n  async \"test action=append\"() {\n    const element = createStreamElement(\"append\", \"hello\", createTemplateElement(\"<span> Streams</span>\"))\n    const element2 = createStreamElement(\"append\", \"hello\", createTemplateElement(\"<span> and more</span>\"))\n\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo\")\n\n    this.append(element)\n    await nextAnimationFrame()\n\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo Streams\")\n    this.assert.isNull(element.parentElement)\n\n    this.append(element2)\n    await nextAnimationFrame()\n\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo Streams and more\")\n    this.assert.isNull(element2.parentElement)\n  }\n\n  async \"test action=append with children ID already present in target\"() {\n    const element = createStreamElement(\n      \"append\",\n      \"hello\",\n      createTemplateElement(' <div id=\"child_1\">First</div> tail1 ')\n    )\n    const element2 = createStreamElement(\n      \"append\",\n      \"hello\",\n      createTemplateElement('<div id=\"child_1\">New First</div> <div id=\"child_2\">Second</div> tail2 ')\n    )\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo\")\n\n    this.append(element)\n    await nextAnimationFrame()\n\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo First tail1 \")\n    this.assert.isNull(element.parentElement)\n\n    this.append(element2)\n    await nextAnimationFrame()\n\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo  tail1 New First Second tail2 \")\n  }\n\n  async \"test action=prepend\"() {\n    const element = createStreamElement(\"prepend\", \"hello\", createTemplateElement(\"<span>Streams </span>\"))\n    const element2 = createStreamElement(\"prepend\", \"hello\", createTemplateElement(\"<span>and more </span>\"))\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo\")\n\n    this.append(element)\n    await nextAnimationFrame()\n\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Streams Hello Turbo\")\n    this.assert.isNull(element.parentElement)\n\n    this.append(element2)\n    await nextAnimationFrame()\n\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"and more Streams Hello Turbo\")\n    this.assert.isNull(element.parentElement)\n  }\n\n  async \"test action=prepend with children ID already present in target\"() {\n    const element = createStreamElement(\n      \"prepend\",\n      \"hello\",\n      createTemplateElement('<div id=\"child_1\">First</div> tail1 ')\n    )\n    const element2 = createStreamElement(\n      \"prepend\",\n      \"hello\",\n      createTemplateElement('<div id=\"child_1\">New First</div> <div id=\"child_2\">Second</div> tail2 ')\n    )\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo\")\n\n    this.append(element)\n    await nextAnimationFrame()\n\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"First tail1 Hello Turbo\")\n    this.assert.isNull(element.parentElement)\n\n    this.append(element2)\n    await nextAnimationFrame()\n\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"New First Second tail2  tail1 Hello Turbo\")\n  }\n\n  async \"test action=remove\"() {\n    const element = createStreamElement(\"remove\", \"hello\")\n    this.assert.ok(this.find(\"#hello\"))\n\n    this.append(element)\n    await nextAnimationFrame()\n\n    this.assert.notOk(this.find(\"#hello\"))\n    this.assert.isNull(element.parentElement)\n  }\n\n  async \"test action=replace\"() {\n    const element = createStreamElement(\"replace\", \"hello\", createTemplateElement(`<h1 id=\"hello\">Hello Turbo</h1>`))\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo\")\n    this.assert.ok(this.find(\"div#hello\"))\n\n    this.append(element)\n    await nextAnimationFrame()\n\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo\")\n    this.assert.notOk(this.find(\"div#hello\"))\n    this.assert.ok(this.find(\"h1#hello\"))\n    this.assert.isNull(element.parentElement)\n  }\n\n  async \"test action=update\"() {\n    const element = createStreamElement(\"update\", \"hello\", createTemplateElement(\"Goodbye Turbo\"))\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo\")\n\n    this.append(element)\n    await nextAnimationFrame()\n\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Goodbye Turbo\")\n    this.assert.isNull(element.parentElement)\n  }\n\n  async \"test action=after\"() {\n    const element = createStreamElement(\"after\", \"hello\", createTemplateElement(`<h1 id=\"after\">After Turbo</h1>`))\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo\")\n\n    this.append(element)\n    await nextAnimationFrame()\n\n    this.assert.equal(this.find(\"#hello\")?.nextSibling?.textContent, \"After Turbo\")\n    this.assert.ok(this.find(\"div#hello\"))\n    this.assert.ok(this.find(\"h1#after\"))\n    this.assert.isNull(element.parentElement)\n  }\n\n  async \"test action=before\"() {\n    const element = createStreamElement(\"before\", \"hello\", createTemplateElement(`<h1 id=\"before\">Before Turbo</h1>`))\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo\")\n\n    this.append(element)\n    await nextAnimationFrame()\n\n    this.assert.equal(this.find(\"#hello\")?.previousSibling?.textContent, \"Before Turbo\")\n    this.assert.ok(this.find(\"div#hello\"))\n    this.assert.ok(this.find(\"h1#before\"))\n    this.assert.isNull(element.parentElement)\n  }\n}\n\nfunction createStreamElement(action: string | null, target: string | null, templateElement?: HTMLTemplateElement) {\n  const element = new StreamElement()\n  if (action) element.setAttribute(\"action\", action)\n  if (target) element.setAttribute(\"target\", target)\n  if (templateElement) element.appendChild(templateElement)\n  return element\n}\n\nfunction createTemplateElement(html: string) {\n  const element = document.createElement(\"template\")\n  element.innerHTML = html\n  return element\n}\n\nStreamElementTests.registerSuite()\n"],"names":["navigator","Turbo.start","intern","Turbo.navigator","Turbo.registerAdapter"],"mappings":"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"}