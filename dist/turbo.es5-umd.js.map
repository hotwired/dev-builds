{"version":3,"file":"turbo.es5-umd.js","sources":["../src/polyfills/custom-elements-native-shim.ts","../src/polyfills/submit-event.ts","../node_modules/tslib/tslib.es6.js","../src/elements/frame_element.ts","../src/core/url.ts","../src/http/fetch_response.ts","../src/util.ts","../src/http/fetch_request.ts","../src/observers/appearance_observer.ts","../src/core/streams/stream_message.ts","../src/core/drive/form_submission.ts","../src/core/snapshot.ts","../src/core/frames/form_interceptor.ts","../src/core/view.ts","../src/core/frames/frame_view.ts","../src/core/frames/link_interceptor.ts","../src/core/bardo.ts","../src/core/renderer.ts","../src/core/frames/frame_renderer.ts","../src/core/drive/progress_bar.ts","../src/core/drive/head_snapshot.ts","../src/core/drive/page_snapshot.ts","../src/core/drive/visit.ts","../src/core/native/browser_adapter.ts","../src/observers/cache_observer.ts","../src/observers/form_submit_observer.ts","../src/core/frames/frame_redirector.ts","../src/core/drive/history.ts","../src/observers/link_click_observer.ts","../src/core/types.ts","../src/core/drive/navigator.ts","../src/observers/page_observer.ts","../src/observers/scroll_observer.ts","../src/observers/stream_observer.ts","../src/core/drive/error_renderer.ts","../src/core/drive/page_renderer.ts","../src/core/drive/snapshot_cache.ts","../src/core/drive/page_view.ts","../src/core/session.ts","../src/core/frames/frame_controller.ts","../src/core/streams/stream_actions.ts","../src/elements/stream_element.ts","../src/elements/index.ts","../src/script_warning.ts","../src/core/index.ts","../src/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This shim allows elements written in, or compiled to, ES5 to work on native\n * implementations of Custom Elements v1. It sets new.target to the value of\n * this.constructor so that the native HTMLElement constructor can access the\n * current under-construction element's definition.\n */\n(function() {\n  if (\n      // No Reflect, no classes, no need for shim because native custom elements\n      // require ES2015 classes or Reflect.\n      window.Reflect === undefined || window.customElements === undefined ||\n      // The webcomponentsjs custom elements polyfill doesn't require\n      // ES2015-compatible construction (`super()` or `Reflect.construct`).\n      (window.customElements as any).polyfillWrapFlushCallback) {\n    return;\n  }\n  const BuiltInHTMLElement = HTMLElement;\n\n  /**\n   * With jscompiler's RECOMMENDED_FLAGS the function name will be optimized away.\n   * However, if we declare the function as a property on an object literal, and\n   * use quotes for the property name, then closure will leave that much intact,\n   * which is enough for the JS VM to correctly set Function.prototype.name.\n   */\n  const wrapperForTheName = {\n    'HTMLElement': function HTMLElement(this: HTMLElement) {\n      return Reflect.construct(BuiltInHTMLElement, [], this.constructor);\n    }\n  };\n  window.HTMLElement =\n      wrapperForTheName['HTMLElement'] as unknown as typeof HTMLElement;\n  HTMLElement.prototype = BuiltInHTMLElement.prototype;\n  HTMLElement.prototype.constructor = HTMLElement;\n  Object.setPrototypeOf(HTMLElement, BuiltInHTMLElement);\n  })();\n","type FormSubmitter = HTMLElement & { form?: HTMLFormElement, type?: string }\n\nconst submittersByForm: WeakMap<HTMLFormElement, HTMLElement> = new WeakMap\n\nfunction findSubmitterFromClickTarget(target: EventTarget | null): FormSubmitter | null {\n  const element = target instanceof Element ? target : target instanceof Node ? target.parentElement : null\n  const candidate = element ? element.closest(\"input, button\") as FormSubmitter | null : null\n  return candidate?.type == \"submit\" ? candidate : null\n}\n\nfunction clickCaptured(event: Event) {\n  const submitter = findSubmitterFromClickTarget(event.target)\n\n  if (submitter && submitter.form) {\n    submittersByForm.set(submitter.form, submitter)\n  }\n}\n\n(function() {\n  if (\"SubmitEvent\" in window) return\n\n  addEventListener(\"click\", clickCaptured, true)\n\n  Object.defineProperty(Event.prototype, \"submitter\", {\n    get(): HTMLElement | undefined {\n      if (this.type == \"submit\" && this.target instanceof HTMLFormElement) {\n        return submittersByForm.get(this.target)\n      }\n    }\n  })\n})()\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { FetchResponse } from \"../http/fetch_response\"\n\nexport enum FrameLoadingStyle { eager = \"eager\", lazy = \"lazy\" }\n\nexport interface FrameElementDelegate {\n  connect(): void\n  disconnect(): void\n  loadingStyleChanged(): void\n  sourceURLChanged(): void\n  disabledChanged(): void\n  formSubmissionIntercepted(element: HTMLFormElement, submitter?: HTMLElement): void\n  loadResponse(response: FetchResponse): void\n  isLoading: boolean\n}\n\nexport class FrameElement extends HTMLElement {\n  static delegateConstructor: new (element: FrameElement) => FrameElementDelegate\n\n  loaded: Promise<FetchResponse | void> = Promise.resolve()\n  readonly delegate: FrameElementDelegate\n\n  static get observedAttributes() {\n    return [\"disabled\", \"loading\", \"src\"]\n  }\n\n  constructor() {\n    super()\n    this.delegate = new FrameElement.delegateConstructor(this)\n  }\n\n  connectedCallback() {\n    this.delegate.connect()\n  }\n\n  disconnectedCallback() {\n    this.delegate.disconnect()\n  }\n\n  attributeChangedCallback(name: string) {\n    if (name == \"loading\") {\n      this.delegate.loadingStyleChanged()\n    } else if (name == \"src\") {\n      this.delegate.sourceURLChanged()\n    } else {\n      this.delegate.disabledChanged()\n    }\n  }\n\n  get src() {\n    return this.getAttribute(\"src\")\n  }\n\n  set src(value: string | null) {\n    if (value) {\n      this.setAttribute(\"src\", value)\n    } else {\n      this.removeAttribute(\"src\")\n    }\n  }\n\n  get loading(): FrameLoadingStyle {\n    return frameLoadingStyleFromString(this.getAttribute(\"loading\") || \"\")\n  }\n\n  set loading(value: FrameLoadingStyle) {\n    if (value) {\n      this.setAttribute(\"loading\", value)\n    } else {\n      this.removeAttribute(\"loading\")\n    }\n  }\n\n  get disabled() {\n    return this.hasAttribute(\"disabled\")\n  }\n\n  set disabled(value: boolean) {\n    if (value) {\n      this.setAttribute(\"disabled\", \"\")\n    } else {\n      this.removeAttribute(\"disabled\")\n    }\n  }\n\n  get autoscroll() {\n    return this.hasAttribute(\"autoscroll\")\n  }\n\n  set autoscroll(value: boolean) {\n    if (value) {\n      this.setAttribute(\"autoscroll\", \"\")\n    } else {\n      this.removeAttribute(\"autoscroll\")\n    }\n  }\n\n  get complete() {\n    return !this.delegate.isLoading\n  }\n\n  get isActive() {\n    return this.ownerDocument === document && !this.isPreview\n  }\n\n  get isPreview() {\n    return this.ownerDocument?.documentElement?.hasAttribute(\"data-turbo-preview\")\n  }\n}\n\nfunction frameLoadingStyleFromString(style: string) {\n  switch (style.toLowerCase()) {\n    case \"lazy\":  return FrameLoadingStyle.lazy\n    default:      return FrameLoadingStyle.eager\n  }\n}\n","export type Locatable = URL | string\n\nexport function expandURL(locatable: Locatable) {\n  return new URL(locatable.toString(), document.baseURI)\n}\n\nexport function getAnchor(url: URL) {\n  let anchorMatch\n  if (url.hash) {\n    return url.hash.slice(1)\n  } else if (anchorMatch = url.href.match(/#(.*)$/)) {\n    return anchorMatch[1]\n  } else {\n    return \"\"\n  }\n}\n\nexport function getExtension(url: URL) {\n  return (getLastPathComponent(url).match(/\\.[^.]*$/) || [])[0] || \"\"\n}\n\nexport function isHTML(url: URL) {\n  return !!getExtension(url).match(/^(?:|\\.(?:htm|html|xhtml))$/)\n}\n\nexport function isPrefixedBy(baseURL: URL, url: URL) {\n  const prefix = getPrefix(url)\n  return baseURL.href === expandURL(prefix).href || baseURL.href.startsWith(prefix)\n}\n\nexport function toCacheKey(url: URL) {\n  const anchorLength = url.hash.length\n  if (anchorLength < 2) {\n    return url.href\n  } else {\n    return url.href.slice(0, -anchorLength)\n  }\n}\n\nexport function urlsAreEqual(left: string, right: string) {\n  return expandURL(left).href == expandURL(right).href\n}\n\nfunction getPathComponents(url: URL) {\n  return url.pathname.split(\"/\").slice(1)\n}\n\nfunction getLastPathComponent(url: URL) {\n  return getPathComponents(url).slice(-1)[0]\n}\n\nfunction getPrefix(url: URL) {\n  return addTrailingSlash(url.origin + url.pathname)\n}\n\nfunction addTrailingSlash(value: string) {\n  return value.endsWith(\"/\") ? value : value + \"/\"\n}\n","import { expandURL } from \"../core/url\"\n\nexport class FetchResponse {\n  readonly response: Response\n\n  constructor(response: Response) {\n    this.response = response\n  }\n\n  get succeeded() {\n    return this.response.ok\n  }\n\n  get failed() {\n    return !this.succeeded\n  }\n\n  get clientError() {\n    return this.statusCode >= 400 && this.statusCode <= 499\n  }\n\n  get serverError() {\n    return this.statusCode >= 500 && this.statusCode <= 599\n  }\n\n  get redirected() {\n    return this.response.redirected\n  }\n\n  get location(): URL {\n    return expandURL(this.response.url)\n  }\n\n  get isHTML() {\n    return this.contentType && this.contentType.match(/^(?:text\\/([^\\s;,]+\\b)?html|application\\/xhtml\\+xml)\\b/)\n  }\n\n  get statusCode() {\n    return this.response.status\n  }\n\n  get contentType() {\n    return this.header(\"Content-Type\")\n  }\n\n  get responseText(): Promise<string> {\n    return this.response.text()\n  }\n\n  get responseHTML(): Promise<string | undefined> {\n    if (this.isHTML) {\n      return this.response.text()\n    } else {\n      return Promise.resolve(undefined)\n    }\n  }\n\n  header(name: string) {\n    return this.response.headers.get(name)\n  }\n}\n","export type DispatchOptions = { target: EventTarget, cancelable: boolean, detail: any }\n\nexport function dispatch(eventName: string, { target, cancelable, detail }: Partial<DispatchOptions> = {}) {\n  const event = new CustomEvent(eventName, { cancelable, bubbles: true, detail })\n  void (target || document.documentElement).dispatchEvent(event)\n  return event\n}\n\nexport function nextAnimationFrame() {\n  return new Promise<void>(resolve => requestAnimationFrame(() => resolve()))\n}\n\nexport function nextEventLoopTick() {\n  return new Promise<void>(resolve => setTimeout(() => resolve(), 0))\n}\n\nexport function nextMicrotask() {\n  return Promise.resolve()\n}\n\nexport function parseHTMLDocument(html = \"\") {\n  return new DOMParser().parseFromString(html, \"text/html\")\n}\n\nexport function unindent(strings: TemplateStringsArray, ...values: any[]): string {\n  const lines = interpolate(strings, values).replace(/^\\n/, \"\").split(\"\\n\")\n  const match = lines[0].match(/^\\s+/)\n  const indent = match ? match[0].length : 0\n  return lines.map(line => line.slice(indent)).join(\"\\n\")\n}\n\nfunction interpolate(strings: TemplateStringsArray, values: any[]) {\n  return strings.reduce((result, string, i) => {\n    const value = values[i] == undefined ? \"\" : values[i]\n    return result + string + value\n  }, \"\")\n}\n\nexport function uuid() {\n  return Array.apply(null, { length: 36 } as any).map((_, i) => {\n    if (i == 8 || i == 13 || i == 18 || i == 23) {\n      return \"-\"\n    } else if (i == 14) {\n      return \"4\"\n    } else if (i == 19) {\n      return (Math.floor(Math.random() * 4) + 8).toString(16)\n    } else {\n      return Math.floor(Math.random() * 15).toString(16)\n    }\n  }).join(\"\")\n}\n","import { FetchResponse } from \"./fetch_response\"\nimport { dispatch } from \"../util\"\n\nexport interface FetchRequestDelegate {\n  prepareHeadersForRequest?(headers: FetchRequestHeaders, request: FetchRequest): void\n  requestStarted(request: FetchRequest): void\n  requestPreventedHandlingResponse(request: FetchRequest, response: FetchResponse): void\n  requestSucceededWithResponse(request: FetchRequest, response: FetchResponse): void\n  requestFailedWithResponse(request: FetchRequest, response: FetchResponse): void\n  requestErrored(request: FetchRequest, error: Error): void\n  requestFinished(request: FetchRequest): void\n}\n\nexport enum FetchMethod {\n  get,\n  post,\n  put,\n  patch,\n  delete\n}\n\nexport function fetchMethodFromString(method: string) {\n  switch (method.toLowerCase()) {\n    case \"get\":    return FetchMethod.get\n    case \"post\":   return FetchMethod.post\n    case \"put\":    return FetchMethod.put\n    case \"patch\":  return FetchMethod.patch\n    case \"delete\": return FetchMethod.delete\n  }\n}\n\nexport type FetchRequestBody = FormData | URLSearchParams\n\nexport type FetchRequestHeaders = { [header: string]: string }\n\nexport interface FetchRequestOptions {\n  headers: FetchRequestHeaders\n  body: FetchRequestBody\n  followRedirects: boolean\n}\n\nexport class FetchRequest {\n  readonly delegate: FetchRequestDelegate\n  readonly method: FetchMethod\n  readonly headers: FetchRequestHeaders\n  readonly url: URL\n  readonly body?: FetchRequestBody\n  readonly abortController = new AbortController\n\n  constructor(delegate: FetchRequestDelegate, method: FetchMethod, location: URL, body: FetchRequestBody = new URLSearchParams) {\n    this.delegate = delegate\n    this.method = method\n    this.headers = this.defaultHeaders\n    if (this.isIdempotent) {\n      this.url = mergeFormDataEntries(location, [ ...body.entries() ])\n    } else {\n      this.body = body\n      this.url = location\n    }\n  }\n\n  get location(): URL {\n    return this.url\n  }\n\n  get params(): URLSearchParams {\n    return this.url.searchParams\n  }\n\n  get entries() {\n    return this.body ? Array.from(this.body.entries()) : []\n  }\n\n  cancel() {\n    this.abortController.abort()\n  }\n\n  async perform(): Promise<FetchResponse> {\n    const { fetchOptions } = this\n    this.delegate.prepareHeadersForRequest?.(this.headers, this)\n    dispatch(\"turbo:before-fetch-request\", { detail: { fetchOptions } })\n    try {\n      this.delegate.requestStarted(this)\n      const response = await fetch(this.url.href, fetchOptions)\n      return await this.receive(response)\n    } catch (error) {\n      this.delegate.requestErrored(this, error)\n      throw error\n    } finally {\n      this.delegate.requestFinished(this)\n    }\n  }\n\n  async receive(response: Response): Promise<FetchResponse> {\n    const fetchResponse = new FetchResponse(response)\n    const event = dispatch(\"turbo:before-fetch-response\", { cancelable: true, detail: { fetchResponse } })\n    if (event.defaultPrevented) {\n      this.delegate.requestPreventedHandlingResponse(this, fetchResponse)\n    } else if (fetchResponse.succeeded) {\n      this.delegate.requestSucceededWithResponse(this, fetchResponse)\n    } else {\n      this.delegate.requestFailedWithResponse(this, fetchResponse)\n    }\n    return fetchResponse\n  }\n\n  get fetchOptions(): RequestInit {\n    return {\n      method: FetchMethod[this.method].toUpperCase(),\n      credentials: \"same-origin\",\n      headers: this.headers,\n      redirect: \"follow\",\n      body: this.body,\n      signal: this.abortSignal\n    }\n  }\n\n  get defaultHeaders() {\n    return {\n      \"Accept\": \"text/html, application/xhtml+xml\"\n    }\n  }\n\n  get isIdempotent() {\n    return this.method == FetchMethod.get\n  }\n\n  get abortSignal() {\n    return this.abortController.signal\n  }\n}\n\nfunction mergeFormDataEntries(url: URL, entries: [string, FormDataEntryValue][]): URL {\n  const currentSearchParams = new URLSearchParams(url.search)\n\n  for (const [ name, value ] of entries) {\n    if (value instanceof File) continue\n\n    if (currentSearchParams.has(name)) {\n      currentSearchParams.delete(name)\n      url.searchParams.set(name, value)\n    } else {\n      url.searchParams.append(name, value)\n    }\n  }\n\n  return url\n}\n","export interface AppearanceObserverDelegate {\n  elementAppearedInViewport(element: Element): void\n}\n\nexport class AppearanceObserver {\n  readonly delegate: AppearanceObserverDelegate\n  readonly element: Element\n  readonly intersectionObserver: IntersectionObserver\n  started = false\n\n  constructor(delegate: AppearanceObserverDelegate, element: Element) {\n    this.delegate = delegate\n    this.element = element\n    this.intersectionObserver = new IntersectionObserver(this.intersect)\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      this.intersectionObserver.observe(this.element)\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false\n      this.intersectionObserver.unobserve(this.element)\n    }\n  }\n\n  intersect: IntersectionObserverCallback = entries => {\n    const lastEntry = entries.slice(-1)[0]\n    if (lastEntry?.isIntersecting) {\n      this.delegate.elementAppearedInViewport(this.element)\n    }\n  }\n}\n","import { StreamElement } from \"../../elements/stream_element\"\n\nexport class StreamMessage {\n  static readonly contentType = \"text/vnd.turbo-stream.html\"\n  readonly templateElement = document.createElement(\"template\")\n\n  static wrap(message: StreamMessage | string) {\n    if (typeof message == \"string\") {\n      return new this(message)\n    } else {\n      return message\n    }\n  }\n\n  constructor(html: string) {\n    this.templateElement.innerHTML = html\n  }\n\n  get fragment() {\n    const fragment = document.createDocumentFragment()\n    for (const element of this.foreignElements) {\n      fragment.appendChild(document.importNode(element, true))\n    }\n    return fragment\n  }\n\n  get foreignElements() {\n    return this.templateChildren.reduce((streamElements, child) => {\n      if (child.tagName.toLowerCase() == \"turbo-stream\") {\n        return [ ...streamElements, child as StreamElement ]\n      } else {\n        return streamElements\n      }\n    }, [] as StreamElement[])\n  }\n\n  get templateChildren() {\n    return Array.from(this.templateElement.content.children)\n  }\n}\n","import { FetchRequest, FetchMethod, fetchMethodFromString, FetchRequestHeaders } from \"../../http/fetch_request\"\nimport { FetchResponse } from \"../../http/fetch_response\"\nimport { expandURL } from \"../url\"\nimport { dispatch } from \"../../util\"\nimport { StreamMessage } from \"../streams/stream_message\"\n\nexport interface FormSubmissionDelegate {\n  formSubmissionStarted(formSubmission: FormSubmission): void\n  formSubmissionSucceededWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse): void\n  formSubmissionFailedWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse): void\n  formSubmissionErrored(formSubmission: FormSubmission, error: Error): void\n  formSubmissionFinished(formSubmission: FormSubmission): void\n}\n\nexport type FormSubmissionResult\n  = { success: boolean, fetchResponse: FetchResponse }\n  | { success: false, error: Error }\n\nexport enum FormSubmissionState {\n  initialized,\n  requesting,\n  waiting,\n  receiving,\n  stopping,\n  stopped,\n}\n\nenum FormEnctype {\n  urlEncoded = \"application/x-www-form-urlencoded\",\n  multipart  = \"multipart/form-data\",\n  plain      = \"text/plain\"\n}\n\nfunction formEnctypeFromString(encoding: string): FormEnctype {\n  switch(encoding.toLowerCase()) {\n    case FormEnctype.multipart: return FormEnctype.multipart\n    case FormEnctype.plain:     return FormEnctype.plain\n    default:                    return FormEnctype.urlEncoded\n  }\n}\n\nexport class FormSubmission {\n  readonly delegate: FormSubmissionDelegate\n  readonly formElement: HTMLFormElement\n  readonly submitter?: HTMLElement\n  readonly formData: FormData\n  readonly fetchRequest: FetchRequest\n  readonly mustRedirect: boolean\n  state = FormSubmissionState.initialized\n  result?: FormSubmissionResult\n\n  constructor(delegate: FormSubmissionDelegate, formElement: HTMLFormElement, submitter?: HTMLElement, mustRedirect = false) {\n    this.delegate = delegate\n    this.formElement = formElement\n    this.submitter = submitter\n    this.formData = buildFormData(formElement, submitter)\n    this.fetchRequest = new FetchRequest(this, this.method, this.location, this.body)\n    this.mustRedirect = mustRedirect\n  }\n\n  get method(): FetchMethod {\n    const method = this.submitter?.getAttribute(\"formmethod\") || this.formElement.getAttribute(\"method\") || \"\"\n    return fetchMethodFromString(method.toLowerCase()) || FetchMethod.get\n  }\n\n  get action(): string {\n    return this.submitter?.getAttribute(\"formaction\") || this.formElement.action\n  }\n\n  get location(): URL {\n    return expandURL(this.action)\n  }\n\n  get body() {\n    if (this.enctype == FormEnctype.urlEncoded || this.method == FetchMethod.get) {\n      return new URLSearchParams(this.stringFormData)\n    } else {\n      return this.formData\n    }\n  }\n\n  get enctype(): FormEnctype {\n    return formEnctypeFromString(this.submitter?.getAttribute(\"formenctype\") || this.formElement.enctype)\n  }\n\n  get isIdempotent() {\n    return this.fetchRequest.isIdempotent\n  }\n\n  get stringFormData() {\n    return [ ...this.formData ].reduce((entries, [ name, value ]) => {\n      return entries.concat(typeof value == \"string\" ? [[ name, value ]] : [])\n    }, [] as [string, string][])\n  }\n\n  // The submission process\n\n  async start() {\n    const { initialized, requesting } = FormSubmissionState\n    if (this.state == initialized) {\n      this.state = requesting\n      return this.fetchRequest.perform()\n    }\n  }\n\n  stop() {\n    const { stopping, stopped } = FormSubmissionState\n    if (this.state != stopping && this.state != stopped) {\n      this.state = stopping\n      this.fetchRequest.cancel()\n      return true\n    }\n  }\n\n  // Fetch request delegate\n\n  prepareHeadersForRequest(headers: FetchRequestHeaders, request: FetchRequest) {\n    if (!request.isIdempotent) {\n      const token = getCookieValue(getMetaContent(\"csrf-param\")) || getMetaContent(\"csrf-token\")\n      if (token) {\n        headers[\"X-CSRF-Token\"] = token\n      }\n      headers[\"Accept\"] = [ StreamMessage.contentType, headers[\"Accept\"] ].join(\", \")\n    }\n  }\n\n  requestStarted(request: FetchRequest) {\n    this.state = FormSubmissionState.waiting\n    dispatch(\"turbo:submit-start\", { target: this.formElement, detail: { formSubmission: this } })\n    this.delegate.formSubmissionStarted(this)\n  }\n\n  requestPreventedHandlingResponse(request: FetchRequest, response: FetchResponse) {\n    this.result = { success: response.succeeded, fetchResponse: response }\n  }\n\n  requestSucceededWithResponse(request: FetchRequest, response: FetchResponse) {\n    if (response.clientError || response.serverError) {\n      this.delegate.formSubmissionFailedWithResponse(this, response)\n    } else if (this.requestMustRedirect(request) && responseSucceededWithoutRedirect(response)) {\n      const error = new Error(\"Form responses must redirect to another location\")\n      this.delegate.formSubmissionErrored(this, error)\n    } else {\n      this.state = FormSubmissionState.receiving\n      this.result = { success: true, fetchResponse: response }\n      this.delegate.formSubmissionSucceededWithResponse(this, response)\n    }\n  }\n\n  requestFailedWithResponse(request: FetchRequest, response: FetchResponse) {\n    this.result = { success: false, fetchResponse: response }\n    this.delegate.formSubmissionFailedWithResponse(this, response)\n  }\n\n  requestErrored(request: FetchRequest, error: Error) {\n    this.result = { success: false, error }\n    this.delegate.formSubmissionErrored(this, error)\n  }\n\n  requestFinished(request: FetchRequest) {\n    this.state = FormSubmissionState.stopped\n    dispatch(\"turbo:submit-end\", { target: this.formElement, detail: { formSubmission: this, ...this.result }})\n    this.delegate.formSubmissionFinished(this)\n  }\n\n  requestMustRedirect(request: FetchRequest) {\n    return !request.isIdempotent && this.mustRedirect\n  }\n}\n\nfunction buildFormData(formElement: HTMLFormElement, submitter?: HTMLElement): FormData {\n  const formData = new FormData(formElement)\n  const name = submitter?.getAttribute(\"name\")\n  const value = submitter?.getAttribute(\"value\")\n\n  if (name && value != null && formData.get(name) != value) {\n    formData.append(name, value)\n  }\n\n  return formData\n}\n\nfunction getCookieValue(cookieName: string | null) {\n  if (cookieName != null) {\n    const cookies = document.cookie ? document.cookie.split(\"; \") : []\n    const cookie = cookies.find((cookie) => cookie.startsWith(cookieName))\n    if (cookie) {\n      const value = cookie.split(\"=\").slice(1).join(\"=\")\n      return value ? decodeURIComponent(value) : undefined\n    }\n  }\n}\n\nfunction getMetaContent(name: string) {\n  const element: HTMLMetaElement | null = document.querySelector(`meta[name=\"${name}\"]`)\n  return element && element.content\n}\n\nfunction responseSucceededWithoutRedirect(response: FetchResponse) {\n  return response.statusCode == 200 && !response.redirected\n}\n","export class Snapshot<E extends Element = Element> {\n  readonly element: E\n\n  constructor(element: E) {\n    this.element = element\n  }\n\n  get children() {\n    return [ ...this.element.children ]\n  }\n\n  hasAnchor(anchor: string) {\n    return this.getElementForAnchor(anchor) != null\n  }\n\n  getElementForAnchor(anchor: string) {\n    try {\n      return this.element.querySelector(`[id='${anchor}'], a[name='${anchor}']`)\n    } catch {\n      return null\n    }\n  }\n\n  get isConnected() {\n    return this.element.isConnected\n  }\n\n  get firstAutofocusableElement() {\n    return this.element.querySelector(\"[autofocus]\")\n  }\n\n  get permanentElements() {\n    return [ ...this.element.querySelectorAll(\"[id][data-turbo-permanent]\") ]\n  }\n\n  getPermanentElementById(id: string) {\n    return this.element.querySelector(`#${id}[data-turbo-permanent]`)\n  }\n\n  getPermanentElementMapForSnapshot(snapshot: Snapshot) {\n    const permanentElementMap: PermanentElementMap = {}\n\n    for (const currentPermanentElement of this.permanentElements) {\n      const { id } = currentPermanentElement\n      const newPermanentElement = snapshot.getPermanentElementById(id)\n      if (newPermanentElement) {\n        permanentElementMap[id] = [ currentPermanentElement, newPermanentElement ]\n      }\n    }\n\n    return permanentElementMap\n  }\n}\n\nexport type PermanentElementMap = Record<string, [Element, Element]>\n","export interface FormInterceptorDelegate {\n  shouldInterceptFormSubmission(element: HTMLFormElement, submitter?: HTMLElement): boolean\n  formSubmissionIntercepted(element: HTMLFormElement, submitter?: HTMLElement): void\n}\n\nexport class FormInterceptor {\n  readonly delegate: FormInterceptorDelegate\n  readonly element: Element\n\n  constructor(delegate: FormInterceptorDelegate, element: Element) {\n    this.delegate = delegate\n    this.element = element\n  }\n\n  start() {\n    this.element.addEventListener(\"submit\", this.submitBubbled)\n  }\n\n  stop() {\n    this.element.removeEventListener(\"submit\", this.submitBubbled)\n  }\n\n  submitBubbled = <EventListener>((event: SubmitEvent) => {\n    if (event.target instanceof HTMLFormElement) {\n      const form = event.target\n      const submitter = event.submitter || undefined\n      if (this.delegate.shouldInterceptFormSubmission(form, submitter)) {\n        event.preventDefault()\n        event.stopImmediatePropagation()\n        this.delegate.formSubmissionIntercepted(form, submitter)\n      }\n    }\n  })\n}\n","import { Renderer } from \"./renderer\"\nimport { Snapshot } from \"./snapshot\"\nimport { Position } from \"./types\"\n\nexport interface ViewDelegate<S extends Snapshot> {\n  viewWillRenderSnapshot(snapshot: S, isPreview: boolean): void\n  viewRenderedSnapshot(snapshot: S, isPreview: boolean): void\n  viewInvalidated(): void\n}\n\nexport abstract class View<E extends Element, S extends Snapshot<E> = Snapshot<E>, R extends Renderer<E, S> = Renderer<E, S>, D extends ViewDelegate<S> = ViewDelegate<S>> {\n  readonly delegate: D\n  readonly element: E\n  renderer?: R\n  abstract readonly snapshot: S\n\n  constructor(delegate: D, element: E) {\n    this.delegate = delegate\n    this.element = element\n  }\n\n  // Scrolling\n\n  scrollToAnchor(anchor: string) {\n    const element = this.snapshot.getElementForAnchor(anchor)\n    if (element) {\n      this.scrollToElement(element)\n    } else {\n      this.scrollToPosition({ x: 0, y: 0 })\n    }\n  }\n\n  scrollToElement(element: Element) {\n    element.scrollIntoView()\n  }\n\n  scrollToPosition({ x, y }: Position) {\n    this.scrollRoot.scrollTo(x, y)\n  }\n\n  get scrollRoot(): { scrollTo(x: number, y: number): void } {\n    return window\n  }\n\n  // Rendering\n\n  async render(renderer: R) {\n    if (this.renderer) {\n      throw new Error(\"rendering is already in progress\")\n    }\n\n    const { isPreview, shouldRender, newSnapshot: snapshot } = renderer\n    if (shouldRender) {\n      try {\n        this.renderer = renderer\n        this.prepareToRenderSnapshot(renderer)\n        this.delegate.viewWillRenderSnapshot(snapshot, isPreview)\n        await this.renderSnapshot(renderer)\n        this.delegate.viewRenderedSnapshot(snapshot, isPreview)\n        this.finishRenderingSnapshot(renderer)\n      } finally {\n        delete this.renderer\n      }\n    } else {\n      this.invalidate()\n    }\n  }\n\n  invalidate() {\n    this.delegate.viewInvalidated()\n  }\n\n  prepareToRenderSnapshot(renderer: R) {\n    this.markAsPreview(renderer.isPreview)\n    renderer.prepareToRender()\n  }\n\n  markAsPreview(isPreview: boolean) {\n    if (isPreview) {\n      this.element.setAttribute(\"data-turbo-preview\", \"\")\n    } else {\n      this.element.removeAttribute(\"data-turbo-preview\")\n    }\n  }\n\n  async renderSnapshot(renderer: R) {\n    await renderer.render()\n  }\n\n  finishRenderingSnapshot(renderer: R) {\n    renderer.finishRendering()\n  }\n}\n","import { FrameElement } from \"../../elements\"\nimport { Snapshot } from \"../snapshot\"\nimport { View } from \"../view\"\n\nexport class FrameView extends View<FrameElement> {\n  invalidate() {\n    this.element.innerHTML = \"\"\n  }\n\n  get snapshot() {\n    return new Snapshot(this.element)\n  }\n}\n","import { dispatch } from \"../../util\"\n\nexport interface LinkInterceptorDelegate {\n  shouldInterceptLinkClick(element: Element, url: string): boolean\n  linkClickIntercepted(element: Element, url: string): void\n}\n\nexport class LinkInterceptor {\n  readonly delegate: LinkInterceptorDelegate\n  readonly element: Element\n  private clickEvent?: Event\n\n  constructor(delegate: LinkInterceptorDelegate, element: Element) {\n    this.delegate = delegate\n    this.element = element\n  }\n\n  start() {\n    this.element.addEventListener(\"click\", this.clickBubbled)\n    document.addEventListener(\"turbo:click\", this.linkClicked)\n    document.addEventListener(\"turbo:before-visit\", this.willVisit)\n  }\n\n  stop() {\n    this.element.removeEventListener(\"click\", this.clickBubbled)\n    document.removeEventListener(\"turbo:click\", this.linkClicked)\n    document.removeEventListener(\"turbo:before-visit\", this.willVisit)\n  }\n\n  clickBubbled = (event: Event) => {\n    if (this.respondsToEventTarget(event.target)) {\n      this.clickEvent = event\n    } else {\n      delete this.clickEvent\n    }\n  }\n\n  linkClicked = <EventListener>((event: CustomEvent) => {\n    if (this.clickEvent && this.respondsToEventTarget(event.target) && event.target instanceof Element) {\n      if (this.delegate.shouldInterceptLinkClick(event.target, event.detail.url)) {\n        this.clickEvent.preventDefault()\n        event.preventDefault()\n        \n        this.convertLinkWithMethodClickToFormSubmission(event.target) || \n          this.delegate.linkClickIntercepted(event.target, event.detail.url)\n      }\n    }\n    delete this.clickEvent\n  })\n\n  willVisit = () => {\n    delete this.clickEvent\n  }\n\n  convertLinkWithMethodClickToFormSubmission(link: Element) {\n    const linkMethod = link.getAttribute(\"data-turbo-method\") || link.getAttribute(\"data-method\")\n\n    if (linkMethod) {\n      const form = document.createElement(\"form\")\n      form.method = linkMethod\n      form.action = link.getAttribute(\"href\") || \"undefined\"\n\n      link.parentNode?.insertBefore(form, link)\n      return dispatch(\"submit\", { target: form })\n    } else {\n      return false\n    }\n  }\n\n  respondsToEventTarget(target: EventTarget | null) {\n    const element\n      = target instanceof Element\n      ? target\n        : target instanceof Node\n        ? target.parentElement\n          : null\n    return element && element.closest(\"turbo-frame, html\") == this.element\n  }\n}\n","import { PermanentElementMap } from \"./snapshot\"\n\nexport class Bardo {\n  readonly permanentElementMap: PermanentElementMap\n\n  static preservingPermanentElements(permanentElementMap: PermanentElementMap, callback: () => void) {\n    const bardo = new this(permanentElementMap)\n    bardo.enter()\n    callback()\n    bardo.leave()\n  }\n\n  constructor(permanentElementMap: PermanentElementMap) {\n    this.permanentElementMap = permanentElementMap\n  }\n\n  enter() {\n    for (const id in this.permanentElementMap) {\n      const [, newPermanentElement ] = this.permanentElementMap[id]\n      this.replaceNewPermanentElementWithPlaceholder(newPermanentElement)\n    }\n  }\n\n  leave() {\n    for (const id in this.permanentElementMap) {\n      const [ currentPermanentElement ] = this.permanentElementMap[id]\n      this.replaceCurrentPermanentElementWithClone(currentPermanentElement)\n      this.replacePlaceholderWithPermanentElement(currentPermanentElement)\n    }\n  }\n\n  replaceNewPermanentElementWithPlaceholder(permanentElement: Element) {\n    const placeholder = createPlaceholderForPermanentElement(permanentElement)\n    permanentElement.replaceWith(placeholder)\n  }\n\n  replaceCurrentPermanentElementWithClone(permanentElement: Element) {\n    const clone = permanentElement.cloneNode(true)\n    permanentElement.replaceWith(clone)\n  }\n\n  replacePlaceholderWithPermanentElement(permanentElement: Element) {\n    const placeholder = this.getPlaceholderById(permanentElement.id)\n    placeholder?.replaceWith(permanentElement)\n  }\n\n  getPlaceholderById(id: string) {\n    return this.placeholders.find(element => element.content == id)\n  }\n\n  get placeholders(): HTMLMetaElement[] {\n    return [ ...document.querySelectorAll(\"meta[name=turbo-permanent-placeholder][content]\") ] as any\n  }\n}\n\nfunction createPlaceholderForPermanentElement(permanentElement: Element) {\n  const element = document.createElement(\"meta\")\n  element.setAttribute(\"name\", \"turbo-permanent-placeholder\")\n  element.setAttribute(\"content\", permanentElement.id)\n  return element\n}\n","import { Bardo } from \"./bardo\"\nimport { Snapshot } from \"./snapshot\"\n\ntype ResolvingFunctions<T = unknown> = {\n  resolve(value: T | PromiseLike<T>): void\n  reject(reason?: any): void\n}\n\nexport abstract class Renderer<E extends Element, S extends Snapshot<E> = Snapshot<E>> {\n  readonly currentSnapshot: S\n  readonly newSnapshot: S\n  readonly isPreview: boolean\n  readonly promise: Promise<void>\n  private resolvingFunctions?: ResolvingFunctions<void>\n\n  constructor(currentSnapshot: S, newSnapshot: S, isPreview: boolean) {\n    this.currentSnapshot = currentSnapshot\n    this.newSnapshot = newSnapshot\n    this.isPreview = isPreview\n    this.promise = new Promise((resolve, reject) => this.resolvingFunctions = { resolve, reject })\n  }\n\n  get shouldRender() {\n    return true\n  }\n\n  prepareToRender() {\n    return\n  }\n\n  abstract render(): Promise<void>\n\n  finishRendering() {\n    if (this.resolvingFunctions) {\n      this.resolvingFunctions.resolve()\n      delete this.resolvingFunctions\n    }\n  }\n\n  createScriptElement(element: Element) {\n    if (element.getAttribute(\"data-turbo-eval\") == \"false\") {\n      return element\n    } else {\n      const createdScriptElement = document.createElement(\"script\")\n      createdScriptElement.textContent = element.textContent\n      createdScriptElement.async = false\n      copyElementAttributes(createdScriptElement, element)\n      return createdScriptElement\n    }\n  }\n\n  preservingPermanentElements(callback: () => void) {\n    Bardo.preservingPermanentElements(this.permanentElementMap, callback)\n  }\n\n  focusFirstAutofocusableElement() {\n    const element = this.connectedSnapshot.firstAutofocusableElement\n    if (elementIsFocusable(element)) {\n      element.focus()\n    }\n  }\n\n  get connectedSnapshot() {\n    return this.newSnapshot.isConnected ? this.newSnapshot : this.currentSnapshot\n  }\n\n  get currentElement() {\n    return this.currentSnapshot.element\n  }\n\n  get newElement() {\n    return this.newSnapshot.element\n  }\n\n  get permanentElementMap() {\n    return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)\n  }\n}\n\nfunction copyElementAttributes(destinationElement: Element, sourceElement: Element) {\n  for (const { name, value } of [ ...sourceElement.attributes ]) {\n    destinationElement.setAttribute(name, value)\n  }\n}\n\nfunction elementIsFocusable(element: any): element is { focus: () => void } {\n  return element && typeof element.focus == \"function\"\n}\n","import { FrameElement } from \"../../elements/frame_element\"\nimport { nextAnimationFrame } from \"../../util\"\nimport { Renderer } from \"../renderer\"\n\nexport class FrameRenderer extends Renderer<FrameElement> {\n  get shouldRender() {\n    return true\n  }\n\n  async render() {\n    await nextAnimationFrame()\n    this.preservingPermanentElements(() => {\n      this.loadFrameElement()\n    })\n    this.scrollFrameIntoView()\n    await nextAnimationFrame()\n    this.focusFirstAutofocusableElement()\n  }\n\n  loadFrameElement() {\n    const destinationRange = document.createRange()\n    destinationRange.selectNodeContents(this.currentElement)\n    destinationRange.deleteContents()\n\n    const frameElement = this.newElement\n    const sourceRange = frameElement.ownerDocument?.createRange()\n    if (sourceRange) {\n      sourceRange.selectNodeContents(frameElement)\n      this.currentElement.appendChild(sourceRange.extractContents())\n    }\n  }\n\n  scrollFrameIntoView() {\n    if (this.currentElement.autoscroll || this.newElement.autoscroll) {\n      const element = this.currentElement.firstElementChild\n      const block = readScrollLogicalPosition(this.currentElement.getAttribute(\"data-autoscroll-block\"), \"end\")\n\n      if (element) {\n        element.scrollIntoView({ block })\n        return true\n      }\n    }\n    return false\n  }\n}\n\nfunction readScrollLogicalPosition(value: string | null, defaultValue: ScrollLogicalPosition): ScrollLogicalPosition {\n  if (value == \"end\" || value == \"start\" || value == \"center\" || value == \"nearest\") {\n    return value\n  } else {\n    return defaultValue\n  }\n}\n","import { unindent } from \"../../util\"\n\nexport class ProgressBar {\n  static animationDuration = 300/*ms*/\n\n  static get defaultCSS() {\n    return unindent`\n      .turbo-progress-bar {\n        position: fixed;\n        display: block;\n        top: 0;\n        left: 0;\n        height: 3px;\n        background: #0076ff;\n        z-index: 9999;\n        transition:\n          width ${ProgressBar.animationDuration}ms ease-out,\n          opacity ${ProgressBar.animationDuration / 2}ms ${ProgressBar.animationDuration / 2}ms ease-in;\n        transform: translate3d(0, 0, 0);\n      }\n    `\n  }\n\n  readonly stylesheetElement: HTMLStyleElement\n  readonly progressElement: HTMLDivElement\n\n  hiding = false\n  trickleInterval?: number\n  value = 0\n  visible = false\n\n  constructor() {\n    this.stylesheetElement = this.createStylesheetElement()\n    this.progressElement = this.createProgressElement()\n    this.installStylesheetElement()\n    this.setValue(0)\n  }\n\n  show() {\n    if (!this.visible) {\n      this.visible = true\n      this.installProgressElement()\n      this.startTrickling()\n    }\n  }\n\n  hide() {\n    if (this.visible && !this.hiding) {\n      this.hiding = true\n      this.fadeProgressElement(() => {\n        this.uninstallProgressElement()\n        this.stopTrickling()\n        this.visible = false\n        this.hiding = false\n      })\n    }\n  }\n\n  setValue(value: number) {\n    this.value = value\n    this.refresh()\n  }\n\n  // Private\n\n  installStylesheetElement() {\n    document.head.insertBefore(this.stylesheetElement, document.head.firstChild)\n  }\n\n  installProgressElement() {\n    this.progressElement.style.width = \"0\"\n    this.progressElement.style.opacity = \"1\"\n    document.documentElement.insertBefore(this.progressElement, document.body)\n    this.refresh()\n  }\n\n  fadeProgressElement(callback: () => void) {\n    this.progressElement.style.opacity = \"0\"\n    setTimeout(callback, ProgressBar.animationDuration * 1.5)\n  }\n\n  uninstallProgressElement() {\n    if (this.progressElement.parentNode) {\n      document.documentElement.removeChild(this.progressElement)\n    }\n  }\n\n  startTrickling() {\n    if (!this.trickleInterval) {\n      this.trickleInterval = window.setInterval(this.trickle, ProgressBar.animationDuration)\n    }\n  }\n\n  stopTrickling() {\n    window.clearInterval(this.trickleInterval)\n    delete this.trickleInterval\n  }\n\n  trickle = () => {\n    this.setValue(this.value + Math.random() / 100)\n  }\n\n  refresh() {\n    requestAnimationFrame(() => {\n      this.progressElement.style.width = `${10 + (this.value * 90)}%`\n    })\n  }\n\n  createStylesheetElement() {\n    const element = document.createElement(\"style\")\n    element.type = \"text/css\"\n    element.textContent = ProgressBar.defaultCSS\n    return element\n  }\n\n  createProgressElement() {\n    const element = document.createElement(\"div\")\n    element.className = \"turbo-progress-bar\"\n    return element\n  }\n}\n","import { Snapshot } from \"../snapshot\"\n\ntype ElementDetailMap = { [outerHTML: string]: ElementDetails }\n\ntype ElementDetails = { type?: ElementType, tracked: boolean, elements: Element[] }\n\ntype ElementType = \"script\" | \"stylesheet\"\n\nexport class HeadSnapshot extends Snapshot<HTMLHeadElement> {\n  readonly detailsByOuterHTML = this.children.reduce((result, element) => {\n    const { outerHTML } = element\n    const details: ElementDetails\n      = outerHTML in result\n      ? result[outerHTML]\n      : {\n        type: elementType(element),\n        tracked: elementIsTracked(element),\n        elements: []\n      }\n    return {\n      ...result,\n      [outerHTML]: {\n        ...details,\n        elements: [ ...details.elements, element ]\n      }\n    }\n  }, {} as ElementDetailMap)\n\n  get trackedElementSignature(): string {\n    return Object.keys(this.detailsByOuterHTML)\n      .filter(outerHTML => this.detailsByOuterHTML[outerHTML].tracked)\n      .join(\"\")\n  }\n\n  getScriptElementsNotInSnapshot(snapshot: HeadSnapshot) {\n    return this.getElementsMatchingTypeNotInSnapshot(\"script\", snapshot)\n  }\n\n  getStylesheetElementsNotInSnapshot(snapshot: HeadSnapshot) {\n    return this.getElementsMatchingTypeNotInSnapshot(\"stylesheet\", snapshot)\n  }\n\n  getElementsMatchingTypeNotInSnapshot(matchedType: ElementType, snapshot: HeadSnapshot) {\n    return Object.keys(this.detailsByOuterHTML)\n      .filter(outerHTML => !(outerHTML in snapshot.detailsByOuterHTML))\n      .map(outerHTML => this.detailsByOuterHTML[outerHTML])\n      .filter(({ type }) => type == matchedType)\n      .map(({ elements: [element] }) => element)\n  }\n\n  get provisionalElements(): Element[] {\n    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {\n      const { type, tracked, elements } = this.detailsByOuterHTML[outerHTML]\n      if (type == null && !tracked) {\n        return [ ...result, ...elements ]\n      } else if (elements.length > 1) {\n        return [ ...result, ...elements.slice(1) ]\n      } else {\n        return result\n      }\n    }, [] as Element[])\n  }\n\n  getMetaValue(name: string): string | null {\n    const element = this.findMetaElementByName(name)\n    return element\n      ? element.getAttribute(\"content\")\n      : null\n  }\n\n  findMetaElementByName(name: string) {\n    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {\n      const { elements: [element] } = this.detailsByOuterHTML[outerHTML]\n      return elementIsMetaElementWithName(element, name) ? element : result\n    }, undefined as Element | undefined)\n  }\n}\n\nfunction elementType(element: Element) {\n  if (elementIsScript(element)) {\n    return \"script\"\n  } else if (elementIsStylesheet(element)) {\n    return \"stylesheet\"\n  }\n}\n\nfunction elementIsTracked(element: Element) {\n  return element.getAttribute(\"data-turbo-track\") == \"reload\"\n}\n\nfunction elementIsScript(element: Element) {\n  const tagName = element.tagName.toLowerCase()\n  return tagName == \"script\"\n}\n\nfunction elementIsStylesheet(element: Element) {\n  const tagName = element.tagName.toLowerCase()\n  return tagName == \"style\" || (tagName == \"link\" && element.getAttribute(\"rel\") == \"stylesheet\")\n}\n\nfunction elementIsMetaElementWithName(element: Element, name: string) {\n  const tagName = element.tagName.toLowerCase()\n  return tagName == \"meta\" && element.getAttribute(\"name\") == name\n}\n","import { parseHTMLDocument } from \"../../util\"\nimport { Snapshot } from \"../snapshot\"\nimport { expandURL } from \"../url\"\nimport { HeadSnapshot } from \"./head_snapshot\"\n\nexport class PageSnapshot extends Snapshot<HTMLBodyElement> {\n  static fromHTMLString(html = \"\") {\n    return this.fromDocument(parseHTMLDocument(html))\n  }\n\n  static fromElement(element: Element) {\n    return this.fromDocument(element.ownerDocument)\n  }\n\n  static fromDocument({ head, body }: Document) {\n    return new this(body as HTMLBodyElement, new HeadSnapshot(head))\n  }\n\n  readonly headSnapshot: HeadSnapshot\n\n  constructor(element: HTMLBodyElement, headSnapshot: HeadSnapshot) {\n    super(element)\n    this.headSnapshot = headSnapshot\n  }\n\n  clone() {\n    return new PageSnapshot(this.element.cloneNode(true), this.headSnapshot)\n  }\n\n  get headElement() {\n    return this.headSnapshot.element\n  }\n\n  get rootLocation() {\n    const root = this.getSetting(\"root\") ?? \"/\"\n    return expandURL(root)\n  }\n\n  get cacheControlValue() {\n    return this.getSetting(\"cache-control\")\n  }\n\n  get isPreviewable() {\n    return this.cacheControlValue != \"no-preview\"\n  }\n\n  get isCacheable() {\n    return this.cacheControlValue != \"no-cache\"\n  }\n\n  get isVisitable() {\n    return this.getSetting(\"visit-control\") != \"reload\"\n  }\n\n  // Private\n\n  getSetting(name: string) {\n    return this.headSnapshot.getMetaValue(`turbo-${name}`)\n  }\n}\n","import { Adapter } from \"../native/adapter\"\nimport { FetchMethod, FetchRequest, FetchRequestDelegate } from \"../../http/fetch_request\"\nimport { FetchResponse } from \"../../http/fetch_response\"\nimport { History } from \"./history\"\nimport { getAnchor } from \"../url\"\nimport { PageSnapshot } from \"./page_snapshot\"\nimport { Action } from \"../types\"\nimport { uuid } from \"../../util\"\nimport { PageView } from \"./page_view\"\n\nexport interface VisitDelegate {\n  readonly adapter: Adapter\n  readonly history: History\n  readonly view: PageView\n\n  visitStarted(visit: Visit): void\n  visitCompleted(visit: Visit): void\n}\n\nexport enum TimingMetric {\n  visitStart = \"visitStart\",\n  requestStart = \"requestStart\",\n  requestEnd = \"requestEnd\",\n  visitEnd = \"visitEnd\"\n}\n\nexport type TimingMetrics = Partial<{ [metric in TimingMetric]: any }>\n\nexport enum VisitState {\n  initialized = \"initialized\",\n  started = \"started\",\n  canceled = \"canceled\",\n  failed = \"failed\",\n  completed = \"completed\"\n}\n\nexport type VisitOptions = {\n  action: Action,\n  historyChanged: boolean,\n  referrer?: URL,\n  snapshotHTML?: string,\n  response?: VisitResponse\n}\n\nconst defaultOptions: VisitOptions = {\n  action: \"advance\",\n  historyChanged: false\n}\n\nexport type VisitResponse = {\n  statusCode: number,\n  responseHTML?: string\n}\n\nexport enum SystemStatusCode {\n  networkFailure = 0,\n  timeoutFailure = -1,\n  contentTypeMismatch = -2\n}\n\nexport class Visit implements FetchRequestDelegate {\n  readonly delegate: VisitDelegate\n  readonly identifier = uuid()\n  readonly restorationIdentifier: string\n  readonly action: Action\n  readonly referrer?: URL\n  readonly timingMetrics: TimingMetrics = {}\n\n  followedRedirect = false\n  frame?: number\n  historyChanged = false\n  location: URL\n  redirectedToLocation?: URL\n  request?: FetchRequest\n  response?: VisitResponse\n  scrolled = false\n  snapshotHTML?: string\n  snapshotCached = false\n  state = VisitState.initialized\n\n  constructor(delegate: VisitDelegate, location: URL, restorationIdentifier: string | undefined, options: Partial<VisitOptions> = {}) {\n    this.delegate = delegate\n    this.location = location\n    this.restorationIdentifier = restorationIdentifier || uuid()\n\n    const { action, historyChanged, referrer, snapshotHTML, response } = { ...defaultOptions, ...options }\n    this.action = action\n    this.historyChanged = historyChanged\n    this.referrer = referrer\n    this.snapshotHTML = snapshotHTML\n    this.response = response\n  }\n\n  get adapter() {\n    return this.delegate.adapter\n  }\n\n  get view() {\n    return this.delegate.view\n  }\n\n  get history() {\n    return this.delegate.history\n  }\n\n  get restorationData() {\n    return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)\n  }\n\n  start() {\n    if (this.state == VisitState.initialized) {\n      this.recordTimingMetric(TimingMetric.visitStart)\n      this.state = VisitState.started\n      this.adapter.visitStarted(this)\n      this.delegate.visitStarted(this)\n    }\n  }\n\n  cancel() {\n    if (this.state == VisitState.started) {\n      if (this.request) {\n        this.request.cancel()\n      }\n      this.cancelRender()\n      this.state = VisitState.canceled\n    }\n  }\n\n  complete() {\n    if (this.state == VisitState.started) {\n      this.recordTimingMetric(TimingMetric.visitEnd)\n      this.state = VisitState.completed\n      this.adapter.visitCompleted(this)\n      this.delegate.visitCompleted(this)\n    }\n  }\n\n  fail() {\n    if (this.state == VisitState.started) {\n      this.state = VisitState.failed\n      this.adapter.visitFailed(this)\n    }\n  }\n\n  changeHistory() {\n    if (!this.historyChanged) {\n      const actionForHistory = this.location.href === this.referrer?.href ? \"replace\" : this.action\n      const method = this.getHistoryMethodForAction(actionForHistory)\n      this.history.update(method, this.location, this.restorationIdentifier)\n      this.historyChanged = true\n    }\n  }\n\n  issueRequest() {\n    if (this.hasPreloadedResponse()) {\n      this.simulateRequest()\n    } else if (this.shouldIssueRequest() && !this.request) {\n      this.request = new FetchRequest(this, FetchMethod.get, this.location)\n      this.request.perform()\n    }\n  }\n\n  simulateRequest() {\n    if (this.response) {\n      this.startRequest()\n      this.recordResponse()\n      this.finishRequest()\n    }\n  }\n\n  startRequest() {\n    this.recordTimingMetric(TimingMetric.requestStart)\n    this.adapter.visitRequestStarted(this)\n  }\n\n  recordResponse(response = this.response) {\n    this.response = response\n    if (response) {\n      const { statusCode } = response\n      if (isSuccessful(statusCode)) {\n        this.adapter.visitRequestCompleted(this)\n      } else {\n        this.adapter.visitRequestFailedWithStatusCode(this, statusCode)\n      }\n    }\n  }\n\n  finishRequest() {\n    this.recordTimingMetric(TimingMetric.requestEnd)\n    this.adapter.visitRequestFinished(this)\n  }\n\n  loadResponse() {\n    if (this.response) {\n      const { statusCode, responseHTML } = this.response\n      this.render(async () => {\n        this.cacheSnapshot()\n        if (isSuccessful(statusCode) && responseHTML != null) {\n          await this.view.renderPage(PageSnapshot.fromHTMLString(responseHTML))\n          this.adapter.visitRendered(this)\n          this.complete()\n        } else {\n          await this.view.renderError(PageSnapshot.fromHTMLString(responseHTML))\n          this.adapter.visitRendered(this)\n          this.fail()\n        }\n      })\n    }\n  }\n\n  getCachedSnapshot() {\n    const snapshot = this.view.getCachedSnapshotForLocation(this.location) || this.getPreloadedSnapshot()\n\n    if (snapshot && (!getAnchor(this.location) || snapshot.hasAnchor(getAnchor(this.location)))) {\n      if (this.action == \"restore\" || snapshot.isPreviewable) {\n        return snapshot\n      }\n    }\n  }\n\n  getPreloadedSnapshot() {\n    if (this.snapshotHTML) {\n      return PageSnapshot.fromHTMLString(this.snapshotHTML)\n    }\n  }\n\n  hasCachedSnapshot() {\n    return this.getCachedSnapshot() != null\n  }\n\n  loadCachedSnapshot() {\n    const snapshot = this.getCachedSnapshot()\n    if (snapshot) {\n      const isPreview = this.shouldIssueRequest()\n      this.render(async () => {\n        this.cacheSnapshot()\n        await this.view.renderPage(snapshot, isPreview)\n        this.adapter.visitRendered(this)\n        if (!isPreview) {\n          this.complete()\n        }\n      })\n    }\n  }\n\n  followRedirect() {\n    if (this.redirectedToLocation && !this.followedRedirect) {\n      this.location = this.redirectedToLocation\n      this.history.replace(this.redirectedToLocation, this.restorationIdentifier)\n      this.followedRedirect = true\n    }\n  }\n\n  // Fetch request delegate\n\n  requestStarted() {\n    this.startRequest()\n  }\n\n  requestPreventedHandlingResponse(request: FetchRequest, response: FetchResponse) {\n\n  }\n\n  async requestSucceededWithResponse(request: FetchRequest, response: FetchResponse) {\n    const responseHTML = await response.responseHTML\n    if (responseHTML == undefined) {\n      this.recordResponse({ statusCode: SystemStatusCode.contentTypeMismatch })\n    } else {\n      this.redirectedToLocation = response.redirected ? response.location : undefined\n      this.recordResponse({ statusCode: response.statusCode, responseHTML })\n    }\n  }\n\n  async requestFailedWithResponse(request: FetchRequest, response: FetchResponse) {\n    const responseHTML = await response.responseHTML\n    if (responseHTML == undefined) {\n      this.recordResponse({ statusCode: SystemStatusCode.contentTypeMismatch })\n    } else {\n      this.recordResponse({ statusCode: response.statusCode, responseHTML })\n    }\n  }\n\n  requestErrored(request: FetchRequest, error: Error) {\n    this.recordResponse({ statusCode: SystemStatusCode.networkFailure })\n  }\n\n  requestFinished() {\n    this.finishRequest()\n  }\n\n  // Scrolling\n\n  performScroll() {\n    if (!this.scrolled) {\n      if (this.action == \"restore\") {\n        this.scrollToRestoredPosition() || this.scrollToTop()\n      } else {\n        this.scrollToAnchor() || this.scrollToTop()\n      }\n      this.scrolled = true\n    }\n  }\n\n  scrollToRestoredPosition() {\n    const { scrollPosition } = this.restorationData\n    if (scrollPosition) {\n      this.view.scrollToPosition(scrollPosition)\n      return true\n    }\n  }\n\n  scrollToAnchor() {\n    if (getAnchor(this.location)) {\n      this.view.scrollToAnchor(getAnchor(this.location))\n      return true\n    }\n  }\n\n  scrollToTop() {\n    this.view.scrollToPosition({ x: 0, y: 0 })\n  }\n\n  // Instrumentation\n\n  recordTimingMetric(metric: TimingMetric) {\n    this.timingMetrics[metric] = new Date().getTime()\n  }\n\n  getTimingMetrics(): TimingMetrics {\n    return { ...this.timingMetrics }\n  }\n\n  // Private\n\n  getHistoryMethodForAction(action: Action) {\n    switch (action) {\n      case \"replace\": return history.replaceState\n      case \"advance\":\n      case \"restore\": return history.pushState\n    }\n  }\n\n  hasPreloadedResponse() {\n    return typeof this.response == \"object\"\n  }\n\n  shouldIssueRequest() {\n    return this.action == \"restore\"\n      ? !this.hasCachedSnapshot()\n      : true\n  }\n\n  cacheSnapshot() {\n    if (!this.snapshotCached) {\n      this.view.cacheSnapshot()\n      this.snapshotCached = true\n    }\n  }\n\n  async render(callback: () => Promise<void>) {\n    this.cancelRender()\n    await new Promise<void>(resolve => {\n      this.frame = requestAnimationFrame(() => resolve())\n    })\n    callback()\n    delete this.frame\n    this.performScroll()\n  }\n\n  cancelRender() {\n    if (this.frame) {\n      cancelAnimationFrame(this.frame)\n      delete this.frame\n    }\n  }\n}\n\nfunction isSuccessful(statusCode: number) {\n  return statusCode >= 200 && statusCode < 300\n}\n","import { Adapter } from \"./adapter\"\nimport { ProgressBar } from \"../drive/progress_bar\"\nimport { SystemStatusCode, Visit, VisitOptions } from \"../drive/visit\"\nimport { Session } from \"../session\"\nimport { uuid } from \"../../util\"\n\nexport class BrowserAdapter implements Adapter {\n  readonly session: Session\n  readonly progressBar = new ProgressBar\n\n  progressBarTimeout?: number\n\n  constructor(session: Session) {\n    this.session = session\n  }\n\n  visitProposedToLocation(location: URL, options?: Partial<VisitOptions>) {\n    this.navigator.startVisit(location, uuid(), options)\n  }\n\n  visitStarted(visit: Visit) {\n    visit.issueRequest()\n    visit.changeHistory()\n    visit.loadCachedSnapshot()\n  }\n\n  visitRequestStarted(visit: Visit) {\n    this.progressBar.setValue(0)\n    if (visit.hasCachedSnapshot() || visit.action != \"restore\") {\n      this.showProgressBarAfterDelay()\n    } else {\n      this.showProgressBar()\n    }\n  }\n\n  visitRequestCompleted(visit: Visit) {\n    visit.loadResponse()\n  }\n\n  visitRequestFailedWithStatusCode(visit: Visit, statusCode: number) {\n    switch (statusCode) {\n      case SystemStatusCode.networkFailure:\n      case SystemStatusCode.timeoutFailure:\n      case SystemStatusCode.contentTypeMismatch:\n        return this.reload()\n      default:\n        return visit.loadResponse()\n    }\n  }\n\n  visitRequestFinished(visit: Visit) {\n    this.progressBar.setValue(1)\n    this.hideProgressBar()\n  }\n\n  visitCompleted(visit: Visit) {\n    visit.followRedirect()\n  }\n\n  pageInvalidated() {\n    this.reload()\n  }\n\n  visitFailed(visit: Visit) {\n\n  }\n\n  visitRendered(visit: Visit) {\n\n  }\n\n  // Private\n\n  showProgressBarAfterDelay() {\n    this.progressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay)\n  }\n\n  showProgressBar = () => {\n    this.progressBar.show()\n  }\n\n  hideProgressBar() {\n    this.progressBar.hide()\n    if (this.progressBarTimeout != null) {\n      window.clearTimeout(this.progressBarTimeout)\n      delete this.progressBarTimeout\n    }\n  }\n\n  reload() {\n    window.location.reload()\n  }\n\n  get navigator() {\n    return this.session.navigator\n  }\n}\n","export class CacheObserver {\n  started = false\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      addEventListener(\"turbo:before-cache\", this.removeStaleElements, false)\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false\n      removeEventListener(\"turbo:before-cache\", this.removeStaleElements, false)\n    }\n  }\n\n  removeStaleElements() {\n    const staleElements = [ ...document.querySelectorAll('[data-turbo-cache=\"false\"]') ]\n\n    for (const element of staleElements) {\n       element.remove()\n     }\n  }\n}\n","export interface FormSubmitObserverDelegate {\n  willSubmitForm(form: HTMLFormElement, submitter?: HTMLElement): boolean\n  formSubmitted(form: HTMLFormElement, submitter?: HTMLElement): void\n}\n\nexport class FormSubmitObserver {\n  readonly delegate: FormSubmitObserverDelegate\n  started = false\n\n  constructor(delegate: FormSubmitObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"submit\", this.submitCaptured, true)\n      this.started = true\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"submit\", this.submitCaptured, true)\n      this.started = false\n    }\n  }\n\n  submitCaptured = () => {\n    removeEventListener(\"submit\", this.submitBubbled, false)\n    addEventListener(\"submit\", this.submitBubbled, false)\n  }\n\n  submitBubbled = <EventListener>((event: SubmitEvent) => {\n    if (!event.defaultPrevented) {\n      const form = event.target instanceof HTMLFormElement ? event.target : undefined\n      const submitter = event.submitter || undefined\n\n      if (form) {\n        const method = submitter?.getAttribute(\"formmethod\") || form.method\n\n        if (method != \"dialog\" && this.delegate.willSubmitForm(form, submitter)) {\n          event.preventDefault()\n          this.delegate.formSubmitted(form, submitter)\n        }\n      }\n    }\n  })\n}\n","import { FormInterceptor, FormInterceptorDelegate } from \"./form_interceptor\"\nimport { FrameElement } from \"../../elements/frame_element\"\nimport { LinkInterceptor, LinkInterceptorDelegate } from \"./link_interceptor\"\n\nexport class FrameRedirector implements LinkInterceptorDelegate, FormInterceptorDelegate {\n  readonly element: Element\n  readonly linkInterceptor: LinkInterceptor\n  readonly formInterceptor: FormInterceptor\n\n  constructor(element: Element) {\n    this.element = element\n    this.linkInterceptor = new LinkInterceptor(this, element)\n    this.formInterceptor = new FormInterceptor(this, element)\n  }\n\n  start() {\n    this.linkInterceptor.start()\n    this.formInterceptor.start()\n  }\n\n  stop() {\n    this.linkInterceptor.stop()\n    this.formInterceptor.stop()\n  }\n\n  shouldInterceptLinkClick(element: Element, url: string) {\n    return this.shouldRedirect(element)\n  }\n\n  linkClickIntercepted(element: Element, url: string) {\n    const frame = this.findFrameElement(element)\n    if (frame) {\n      frame.src = url\n    }\n  }\n\n  shouldInterceptFormSubmission(element: HTMLFormElement, submitter?: HTMLElement) {\n    return this.shouldRedirect(element, submitter)\n  }\n\n  formSubmissionIntercepted(element: HTMLFormElement, submitter?: HTMLElement) {\n    const frame = this.findFrameElement(element)\n    if (frame) {\n      frame.delegate.formSubmissionIntercepted(element, submitter)\n    }\n  }\n\n  private shouldRedirect(element: Element, submitter?: HTMLElement) {\n    const frame = this.findFrameElement(element)\n    return frame ? frame != element.closest(\"turbo-frame\") : false\n  }\n\n  private findFrameElement(element: Element) {\n    const id = element.getAttribute(\"data-turbo-frame\")\n    if (id && id != \"_top\") {\n      const frame = this.element.querySelector(`#${id}:not([disabled])`)\n      if (frame instanceof FrameElement) {\n        return frame\n      }\n    }\n  }\n}\n","import { Position } from \"../types\"\nimport { nextMicrotask, uuid } from \"../../util\"\n\nexport interface HistoryDelegate {\n  historyPoppedToLocationWithRestorationIdentifier(location: URL, restorationIdentifier: string): void\n}\n\ntype HistoryMethod = (this: typeof history, state: any, title: string, url?: string | null | undefined) => void\n\nexport type RestorationData = { scrollPosition?: Position }\n\nexport type RestorationDataMap = { [restorationIdentifier: string]: RestorationData }\n\nexport class History {\n  readonly delegate: HistoryDelegate\n  location!: URL\n  restorationIdentifier = uuid()\n  restorationData: RestorationDataMap = {}\n  started = false\n  pageLoaded = false\n  previousScrollRestoration?: ScrollRestoration\n\n  constructor(delegate: HistoryDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"popstate\", this.onPopState, false)\n      addEventListener(\"load\", this.onPageLoad, false)\n      this.started = true\n      this.replace(new URL(window.location.href))\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"popstate\", this.onPopState, false)\n      removeEventListener(\"load\", this.onPageLoad, false)\n      this.started = false\n    }\n  }\n\n  push(location: URL, restorationIdentifier?: string) {\n    this.update(history.pushState, location, restorationIdentifier)\n  }\n\n  replace(location: URL, restorationIdentifier?: string) {\n    this.update(history.replaceState, location, restorationIdentifier)\n  }\n\n  update(method: HistoryMethod, location: URL, restorationIdentifier = uuid()) {\n    const state = { turbo: { restorationIdentifier } }\n    method.call(history, state, \"\", location.href)\n    this.location = location\n    this.restorationIdentifier = restorationIdentifier\n  }\n\n  // Restoration data\n\n  getRestorationDataForIdentifier(restorationIdentifier: string): RestorationData {\n    return this.restorationData[restorationIdentifier] || {}\n  }\n\n  updateRestorationData(additionalData: Partial<RestorationData>) {\n    const { restorationIdentifier } = this\n    const restorationData = this.restorationData[restorationIdentifier]\n    this.restorationData[restorationIdentifier] = { ...restorationData, ...additionalData }\n  }\n\n  // Scroll restoration\n\n  assumeControlOfScrollRestoration() {\n    if (!this.previousScrollRestoration) {\n      this.previousScrollRestoration = history.scrollRestoration ?? \"auto\"\n      history.scrollRestoration = \"manual\"\n    }\n  }\n\n  relinquishControlOfScrollRestoration() {\n    if (this.previousScrollRestoration) {\n      history.scrollRestoration = this.previousScrollRestoration\n      delete this.previousScrollRestoration\n    }\n  }\n\n  // Event handlers\n\n  onPopState = (event: PopStateEvent) => {\n    if (this.shouldHandlePopState()) {\n      const { turbo } = event.state || {}\n      if (turbo) {\n        this.location = new URL(window.location.href)\n        const { restorationIdentifier } = turbo\n        this.restorationIdentifier = restorationIdentifier\n        this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location, restorationIdentifier)\n      }\n    }\n  }\n\n  onPageLoad = async (event: Event) => {\n    await nextMicrotask()\n    this.pageLoaded = true\n  }\n\n  // Private\n\n  shouldHandlePopState() {\n    // Safari dispatches a popstate event after window's load event, ignore it\n    return this.pageIsLoaded()\n  }\n\n  pageIsLoaded() {\n    return this.pageLoaded || document.readyState == \"complete\"\n  }\n}\n","import { expandURL } from \"../core/url\"\n\nexport interface LinkClickObserverDelegate {\n  willFollowLinkToLocation(link: Element, location: URL): boolean\n  followedLinkToLocation(link: Element, location: URL): void\n}\n\nexport class LinkClickObserver {\n  readonly delegate: LinkClickObserverDelegate\n  started = false\n\n  constructor(delegate: LinkClickObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"click\", this.clickCaptured, true)\n      this.started = true\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"click\", this.clickCaptured, true)\n      this.started = false\n    }\n  }\n\n  clickCaptured = () => {\n    removeEventListener(\"click\", this.clickBubbled, false)\n    addEventListener(\"click\", this.clickBubbled, false)\n  }\n\n  clickBubbled = (event: MouseEvent) => {\n    if (this.clickEventIsSignificant(event)) {\n      const link = this.findLinkFromClickTarget(event.target)\n      if (link) {\n        const location = this.getLocationForLink(link)\n        if (this.delegate.willFollowLinkToLocation(link, location)) {\n          event.preventDefault()\n          this.delegate.followedLinkToLocation(link, location)\n        }\n      }\n    }\n  }\n\n  clickEventIsSignificant(event: MouseEvent) {\n    return !(\n      (event.target && (event.target as any).isContentEditable)\n      || event.defaultPrevented\n      || event.which > 1\n      || event.altKey\n      || event.ctrlKey\n      || event.metaKey\n      || event.shiftKey\n    )\n  }\n\n  findLinkFromClickTarget(target: EventTarget | null) {\n    if (target instanceof Element) {\n      return target.closest(\"a[href]:not([target^=_]):not([download])\")\n    }\n  }\n\n  getLocationForLink(link: Element): URL {\n    return expandURL(link.getAttribute(\"href\") || \"\")\n  }\n}\n","export type Action = \"advance\" | \"replace\" | \"restore\"\n\nexport function isAction(action: any): action is Action {\n  return action == \"advance\" || action == \"replace\" || action == \"restore\"\n}\n\nexport type Position = { x: number, y: number }\n\nexport type StreamSource = {\n  addEventListener(type: \"message\", listener: (event: MessageEvent) => void, options?: boolean | AddEventListenerOptions): void\n  removeEventListener(type: \"message\", listener: (event: MessageEvent) => void, options?: boolean | EventListenerOptions): void\n}\n","import { Action, isAction } from \"../types\"\nimport { FetchMethod } from \"../../http/fetch_request\"\nimport { FetchResponse } from \"../../http/fetch_response\"\nimport { FormSubmission } from \"./form_submission\"\nimport { expandURL, Locatable } from \"../url\"\nimport { Visit, VisitDelegate, VisitOptions } from \"./visit\"\nimport { PageSnapshot } from \"./page_snapshot\"\n\nexport type NavigatorDelegate = VisitDelegate & {\n  allowsVisitingLocation(location: URL): boolean\n  visitProposedToLocation(location: URL, options: Partial<VisitOptions>): void\n}\n\nexport class Navigator {\n  readonly delegate: NavigatorDelegate\n  formSubmission?: FormSubmission\n  currentVisit?: Visit\n\n  constructor(delegate: NavigatorDelegate) {\n    this.delegate = delegate\n  }\n\n  proposeVisit(location: URL, options: Partial<VisitOptions> = {}) {\n    if (this.delegate.allowsVisitingLocation(location)) {\n      this.delegate.visitProposedToLocation(location, options)\n    }\n  }\n\n  startVisit(locatable: Locatable, restorationIdentifier: string, options: Partial<VisitOptions> = {}) {\n    this.stop()\n    this.currentVisit = new Visit(this, expandURL(locatable), restorationIdentifier, {\n      referrer: this.location,\n      ...options\n    })\n    this.currentVisit.start()\n  }\n\n  submitForm(form: HTMLFormElement, submitter?: HTMLElement) {\n    this.stop()\n    this.formSubmission = new FormSubmission(this, form, submitter, true)\n\n    if (this.formSubmission.isIdempotent) {\n      this.proposeVisit(this.formSubmission.fetchRequest.url, { action: this.getActionForFormSubmission(this.formSubmission) })\n    } else {\n      this.formSubmission.start()\n    }\n  }\n\n  stop() {\n    if (this.formSubmission) {\n      this.formSubmission.stop()\n      delete this.formSubmission\n    }\n\n    if (this.currentVisit) {\n      this.currentVisit.cancel()\n      delete this.currentVisit\n    }\n  }\n\n  get adapter() {\n    return this.delegate.adapter\n  }\n\n  get view() {\n    return this.delegate.view\n  }\n\n  get history() {\n    return this.delegate.history\n  }\n\n  // Form submission delegate\n\n  formSubmissionStarted(formSubmission: FormSubmission) {\n\n  }\n\n  async formSubmissionSucceededWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse) {\n    if (formSubmission == this.formSubmission) {\n      const responseHTML = await fetchResponse.responseHTML\n      if (responseHTML) {\n        if (formSubmission.method != FetchMethod.get) {\n          this.view.clearSnapshotCache()\n        }\n\n        const { statusCode } = fetchResponse\n        const visitOptions = { response: { statusCode, responseHTML } }\n        this.proposeVisit(fetchResponse.location, visitOptions)\n      }\n    }\n  }\n\n  async formSubmissionFailedWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse) {\n    const responseHTML = await fetchResponse.responseHTML\n\n    if (responseHTML) {\n      const snapshot = PageSnapshot.fromHTMLString(responseHTML)\n      await this.view.renderPage(snapshot)\n      this.view.clearSnapshotCache()\n    }\n  }\n\n  formSubmissionErrored(formSubmission: FormSubmission, error: Error) {\n    console.error(error)\n  }\n\n  formSubmissionFinished(formSubmission: FormSubmission) {\n\n  }\n\n  // Visit delegate\n\n  visitStarted(visit: Visit) {\n    this.delegate.visitStarted(visit)\n  }\n\n  visitCompleted(visit: Visit) {\n    this.delegate.visitCompleted(visit)\n  }\n\n  // Visits\n\n  get location() {\n    return this.history.location\n  }\n\n  get restorationIdentifier() {\n    return this.history.restorationIdentifier\n  }\n\n  getActionForFormSubmission(formSubmission: FormSubmission): Action {\n    const { formElement, submitter } = formSubmission\n    const action = submitter?.getAttribute(\"data-turbo-action\") || formElement.getAttribute(\"data-turbo-action\")\n    return isAction(action) ? action : \"advance\"\n  }\n}\n","export interface PageObserverDelegate {\n  pageBecameInteractive(): void\n  pageLoaded(): void\n  pageWillUnload(): void\n}\n\nexport enum PageStage {\n  initial,\n  loading,\n  interactive,\n  complete\n}\n\nexport class PageObserver {\n  readonly delegate: PageObserverDelegate\n  stage = PageStage.initial\n  started = false\n\n  constructor(delegate: PageObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      if (this.stage == PageStage.initial) {\n        this.stage = PageStage.loading\n      }\n      document.addEventListener(\"readystatechange\", this.interpretReadyState, false)\n      addEventListener(\"pagehide\", this.pageWillUnload, false)\n      this.started = true\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      document.removeEventListener(\"readystatechange\", this.interpretReadyState, false)\n      removeEventListener(\"pagehide\", this.pageWillUnload, false)\n      this.started = false\n    }\n  }\n\n  interpretReadyState = () => {\n    const { readyState } = this\n    if (readyState == \"interactive\") {\n      this.pageIsInteractive()\n    } else if (readyState == \"complete\") {\n      this.pageIsComplete()\n    }\n  }\n\n  pageIsInteractive() {\n    if (this.stage == PageStage.loading) {\n      this.stage = PageStage.interactive\n      this.delegate.pageBecameInteractive()\n    }\n  }\n\n  pageIsComplete() {\n    this.pageIsInteractive()\n    if (this.stage == PageStage.interactive) {\n      this.stage = PageStage.complete\n      this.delegate.pageLoaded()\n    }\n  }\n\n  pageWillUnload = () => {\n    this.delegate.pageWillUnload()\n  }\n\n  get readyState() {\n    return document.readyState\n  }\n}\n","import { Position } from \"../core/types\"\n\nexport interface ScrollObserverDelegate {\n  scrollPositionChanged(position: Position): void\n}\n\nexport class ScrollObserver {\n  readonly delegate: ScrollObserverDelegate\n  started = false\n\n  constructor(delegate: ScrollObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"scroll\", this.onScroll, false)\n      this.onScroll()\n      this.started = true\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"scroll\", this.onScroll, false)\n      this.started = false\n    }\n  }\n\n  onScroll = () => {\n    this.updatePosition({ x: window.pageXOffset, y: window.pageYOffset })\n  }\n\n  // Private\n\n  updatePosition(position: Position) {\n    this.delegate.scrollPositionChanged(position)\n  }\n}\n","import { FetchResponse } from \"../http/fetch_response\"\nimport { StreamMessage } from \"../core/streams/stream_message\"\nimport { StreamSource } from \"../core/types\"\n\nexport interface StreamObserverDelegate {\n  receivedMessageFromStream(message: StreamMessage): void\n}\n\nexport class StreamObserver {\n  readonly delegate: StreamObserverDelegate\n  readonly sources: Set<StreamSource> = new Set\n  private started = false\n\n  constructor(delegate: StreamObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      addEventListener(\"turbo:before-fetch-response\", this.inspectFetchResponse, false)\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false\n      removeEventListener(\"turbo:before-fetch-response\", this.inspectFetchResponse, false)\n    }\n  }\n\n  connectStreamSource(source: StreamSource) {\n    if (!this.streamSourceIsConnected(source)) {\n      this.sources.add(source)\n      source.addEventListener(\"message\", this.receiveMessageEvent, false)\n    }\n  }\n\n  disconnectStreamSource(source: StreamSource) {\n    if (this.streamSourceIsConnected(source)) {\n      this.sources.delete(source)\n      source.removeEventListener(\"message\", this.receiveMessageEvent, false)\n    }\n  }\n\n  streamSourceIsConnected(source: StreamSource) {\n    return this.sources.has(source)\n  }\n\n  inspectFetchResponse = <EventListener>((event: CustomEvent) => {\n    const response = fetchResponseFromEvent(event)\n    if (response && fetchResponseIsStream(response)) {\n      event.preventDefault()\n      this.receiveMessageResponse(response)\n    }\n  })\n\n  receiveMessageEvent = (event: MessageEvent) => {\n    if (this.started && typeof event.data == \"string\") {\n      this.receiveMessageHTML(event.data)\n    }\n  }\n\n  async receiveMessageResponse(response: FetchResponse) {\n    const html = await response.responseHTML\n    if (html) {\n      this.receiveMessageHTML(html)\n    }\n  }\n\n  receiveMessageHTML(html: string) {\n    this.delegate.receivedMessageFromStream(new StreamMessage(html))\n  }\n}\n\nfunction fetchResponseFromEvent(event: CustomEvent) {\n  const fetchResponse = event.detail?.fetchResponse\n  if (fetchResponse instanceof FetchResponse) {\n    return fetchResponse\n  }\n}\n\nfunction fetchResponseIsStream(response: FetchResponse) {\n  const contentType = response.contentType ?? \"\"\n  return contentType.startsWith(StreamMessage.contentType)\n}\n","import { PageSnapshot } from \"./page_snapshot\"\nimport { Renderer } from \"../renderer\"\n\nexport class ErrorRenderer extends Renderer<HTMLBodyElement, PageSnapshot> {\n  async render() {\n    this.replaceHeadAndBody()\n    this.activateScriptElements()\n  }\n\n  replaceHeadAndBody() {\n    const { documentElement, head, body } = document\n    documentElement.replaceChild(this.newHead, head)\n    documentElement.replaceChild(this.newElement, body)\n  }\n\n  activateScriptElements() {\n    for (const replaceableElement of this.scriptElements) {\n      const parentNode = replaceableElement.parentNode\n      if (parentNode) {\n        const element = this.createScriptElement(replaceableElement)\n        parentNode.replaceChild(element, replaceableElement)\n      }\n    }\n  }\n\n  get newHead() {\n    return this.newSnapshot.headSnapshot.element\n  }\n\n  get scriptElements() {\n    return [ ...document.documentElement.querySelectorAll(\"script\") ]\n  }\n}\n","import { Renderer } from \"../renderer\"\nimport { PageSnapshot } from \"./page_snapshot\"\n\nexport class PageRenderer extends Renderer<HTMLBodyElement, PageSnapshot> {\n  get shouldRender() {\n    return this.newSnapshot.isVisitable && this.trackedElementsAreIdentical\n  }\n\n  prepareToRender() {\n    this.mergeHead()\n  }\n\n  async render() {\n    this.replaceBody()\n  }\n\n  finishRendering() {\n    super.finishRendering()\n    if (!this.isPreview) {\n      this.focusFirstAutofocusableElement()\n    }\n  }\n\n  get currentHeadSnapshot() {\n    return this.currentSnapshot.headSnapshot\n  }\n\n  get newHeadSnapshot() {\n    return this.newSnapshot.headSnapshot\n  }\n\n  get newElement() {\n    return this.newSnapshot.element\n  }\n\n  mergeHead() {\n    this.copyNewHeadStylesheetElements()\n    this.copyNewHeadScriptElements()\n    this.removeCurrentHeadProvisionalElements()\n    this.copyNewHeadProvisionalElements()\n  }\n\n  replaceBody() {\n    this.preservingPermanentElements(() => {\n      this.activateNewBody()\n      this.assignNewBody()\n    })\n  }\n\n  get trackedElementsAreIdentical() {\n    return this.currentHeadSnapshot.trackedElementSignature == this.newHeadSnapshot.trackedElementSignature\n  }\n\n  copyNewHeadStylesheetElements() {\n    for (const element of this.newHeadStylesheetElements) {\n      document.head.appendChild(element)\n    }\n  }\n\n  copyNewHeadScriptElements() {\n    for (const element of this.newHeadScriptElements) {\n      document.head.appendChild(this.createScriptElement(element))\n    }\n  }\n\n  removeCurrentHeadProvisionalElements() {\n    for (const element of this.currentHeadProvisionalElements) {\n      document.head.removeChild(element)\n    }\n  }\n\n  copyNewHeadProvisionalElements() {\n    for (const element of this.newHeadProvisionalElements) {\n      document.head.appendChild(element)\n    }\n  }\n\n  activateNewBody() {\n    document.adoptNode(this.newElement)\n    this.activateNewBodyScriptElements()\n  }\n\n  activateNewBodyScriptElements() {\n    for (const inertScriptElement of this.newBodyScriptElements) {\n      const activatedScriptElement = this.createScriptElement(inertScriptElement)\n      inertScriptElement.replaceWith(activatedScriptElement)\n    }\n  }\n\n  assignNewBody() {\n    if (document.body && this.newElement instanceof HTMLBodyElement) {\n      document.body.replaceWith(this.newElement)\n    } else {\n      document.documentElement.appendChild(this.newElement)\n    }\n  }\n\n  get newHeadStylesheetElements() {\n    return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)\n  }\n\n  get newHeadScriptElements() {\n    return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)\n  }\n\n  get currentHeadProvisionalElements() {\n    return this.currentHeadSnapshot.provisionalElements\n  }\n\n  get newHeadProvisionalElements() {\n    return this.newHeadSnapshot.provisionalElements\n  }\n\n  get newBodyScriptElements() {\n    return [ ...this.newElement.querySelectorAll(\"script\") ]\n  }\n}\n","import { toCacheKey } from \"../url\"\nimport { PageSnapshot } from \"./page_snapshot\"\n\nexport class SnapshotCache {\n  readonly keys: string[] = []\n  readonly size: number\n  snapshots: { [url: string]: PageSnapshot } = {}\n\n  constructor(size: number) {\n    this.size = size\n  }\n\n  has(location: URL) {\n    return toCacheKey(location) in this.snapshots\n  }\n\n  get(location: URL): PageSnapshot | undefined {\n    if (this.has(location)) {\n      const snapshot = this.read(location)\n      this.touch(location)\n      return snapshot\n    }\n  }\n\n  put(location: URL, snapshot: PageSnapshot) {\n    this.write(location, snapshot)\n    this.touch(location)\n    return snapshot\n  }\n\n  clear() {\n    this.snapshots = {}\n  }\n\n  // Private\n\n  read(location: URL) {\n    return this.snapshots[toCacheKey(location)]\n  }\n\n  write(location: URL, snapshot: PageSnapshot) {\n    this.snapshots[toCacheKey(location)] = snapshot\n  }\n\n  touch(location: URL) {\n    const key = toCacheKey(location)\n    const index = this.keys.indexOf(key)\n    if (index > -1) this.keys.splice(index, 1)\n    this.keys.unshift(key)\n    this.trim()\n  }\n\n  trim() {\n    for (const key of this.keys.splice(this.size)) {\n      delete this.snapshots[key]\n    }\n  }\n}\n","import { nextEventLoopTick } from \"../../util\"\nimport { View, ViewDelegate } from \"../view\"\nimport { ErrorRenderer } from \"./error_renderer\"\nimport { PageRenderer } from \"./page_renderer\"\nimport { PageSnapshot } from \"./page_snapshot\"\nimport { SnapshotCache } from \"./snapshot_cache\"\n\nexport interface PageViewDelegate extends ViewDelegate<PageSnapshot> {\n  viewWillCacheSnapshot(): void\n}\n\ntype PageViewRenderer = PageRenderer | ErrorRenderer\n\nexport class PageView extends View<Element, PageSnapshot, PageViewRenderer, PageViewDelegate> {\n  readonly snapshotCache = new SnapshotCache(10)\n  lastRenderedLocation = new URL(location.href)\n\n  renderPage(snapshot: PageSnapshot, isPreview = false) {\n    const renderer = new PageRenderer(this.snapshot, snapshot, isPreview)\n    return this.render(renderer)\n  }\n\n  renderError(snapshot: PageSnapshot) {\n    const renderer = new ErrorRenderer(this.snapshot, snapshot, false)\n    this.render(renderer)\n  }\n\n  clearSnapshotCache() {\n    this.snapshotCache.clear()\n  }\n\n  async cacheSnapshot() {\n    if (this.shouldCacheSnapshot) {\n      this.delegate.viewWillCacheSnapshot()\n      const { snapshot, lastRenderedLocation: location } = this\n      await nextEventLoopTick()\n      this.snapshotCache.put(location, snapshot.clone())\n    }\n  }\n\n  getCachedSnapshotForLocation(location: URL) {\n    return this.snapshotCache.get(location)\n  }\n\n  get snapshot() {\n    return PageSnapshot.fromElement(this.element)\n  }\n\n  get shouldCacheSnapshot() {\n    return this.snapshot.isCacheable\n  }\n}\n","import { Adapter } from \"./native/adapter\"\nimport { BrowserAdapter } from \"./native/browser_adapter\"\nimport { CacheObserver } from \"../observers/cache_observer\"\nimport { FormSubmitObserver, FormSubmitObserverDelegate } from \"../observers/form_submit_observer\"\nimport { FrameRedirector } from \"./frames/frame_redirector\"\nimport { History, HistoryDelegate } from \"./drive/history\"\nimport { LinkClickObserver, LinkClickObserverDelegate } from \"../observers/link_click_observer\"\nimport { expandURL, isPrefixedBy, isHTML, Locatable } from \"./url\"\nimport { Navigator, NavigatorDelegate } from \"./drive/navigator\"\nimport { PageObserver, PageObserverDelegate } from \"../observers/page_observer\"\nimport { ScrollObserver } from \"../observers/scroll_observer\"\nimport { StreamMessage } from \"./streams/stream_message\"\nimport { StreamObserver } from \"../observers/stream_observer\"\nimport { Action, Position, StreamSource, isAction } from \"./types\"\nimport { dispatch } from \"../util\"\nimport { PageView, PageViewDelegate } from \"./drive/page_view\"\nimport { Visit, VisitOptions } from \"./drive/visit\"\nimport { PageSnapshot } from \"./drive/page_snapshot\"\n\nexport type TimingData = {}\n\nexport class Session implements FormSubmitObserverDelegate, HistoryDelegate, LinkClickObserverDelegate, NavigatorDelegate, PageObserverDelegate, PageViewDelegate {\n  readonly navigator = new Navigator(this)\n  readonly history = new History(this)\n  readonly view = new PageView(this, document.documentElement)\n  adapter: Adapter = new BrowserAdapter(this)\n\n  readonly pageObserver = new PageObserver(this)\n  readonly cacheObserver = new CacheObserver()\n  readonly linkClickObserver = new LinkClickObserver(this)\n  readonly formSubmitObserver = new FormSubmitObserver(this)\n  readonly scrollObserver = new ScrollObserver(this)\n  readonly streamObserver = new StreamObserver(this)\n\n  readonly frameRedirector = new FrameRedirector(document.documentElement)\n\n  enabled = true\n  progressBarDelay = 500\n  started = false\n\n  start() {\n    if (!this.started) {\n      this.pageObserver.start()\n      this.cacheObserver.start()\n      this.linkClickObserver.start()\n      this.formSubmitObserver.start()\n      this.scrollObserver.start()\n      this.streamObserver.start()\n      this.frameRedirector.start()\n      this.history.start()\n      this.started = true\n      this.enabled = true\n    }\n  }\n\n  disable() {\n    this.enabled = false\n  }\n\n  stop() {\n    if (this.started) {\n      this.pageObserver.stop()\n      this.cacheObserver.stop()\n      this.linkClickObserver.stop()\n      this.formSubmitObserver.stop()\n      this.scrollObserver.stop()\n      this.streamObserver.stop()\n      this.frameRedirector.stop()\n      this.history.stop()\n      this.started = false\n    }\n  }\n\n  registerAdapter(adapter: Adapter) {\n    this.adapter = adapter\n  }\n\n  visit(location: Locatable, options: Partial<VisitOptions> = {}) {\n    this.navigator.proposeVisit(expandURL(location), options)\n  }\n\n  connectStreamSource(source: StreamSource) {\n    this.streamObserver.connectStreamSource(source)\n  }\n\n  disconnectStreamSource(source: StreamSource) {\n    this.streamObserver.disconnectStreamSource(source)\n  }\n\n  renderStreamMessage(message: StreamMessage | string) {\n    document.documentElement.appendChild(StreamMessage.wrap(message).fragment)\n  }\n\n  clearCache() {\n    this.view.clearSnapshotCache()\n  }\n\n  setProgressBarDelay(delay: number) {\n    this.progressBarDelay = delay\n  }\n\n  get location() {\n    return this.history.location\n  }\n\n  get restorationIdentifier() {\n    return this.history.restorationIdentifier\n  }\n\n  // History delegate\n\n  historyPoppedToLocationWithRestorationIdentifier(location: URL) {\n    if (this.enabled) {\n      this.navigator.proposeVisit(location, { action: \"restore\", historyChanged: true })\n    } else {\n      this.adapter.pageInvalidated()\n    }\n  }\n\n  // Scroll observer delegate\n\n  scrollPositionChanged(position: Position) {\n    this.history.updateRestorationData({ scrollPosition: position })\n  }\n\n  // Link click observer delegate\n\n  willFollowLinkToLocation(link: Element, location: URL) {\n    return elementIsNavigable(link)\n      && this.locationIsVisitable(location)\n      && this.applicationAllowsFollowingLinkToLocation(link, location)\n  }\n\n  followedLinkToLocation(link: Element, location: URL) {\n    const action = this.getActionForLink(link)\n    this.visit(location.href, { action })\n  }\n\n  // Navigator delegate\n\n  allowsVisitingLocation(location: URL) {\n    return this.applicationAllowsVisitingLocation(location)\n  }\n\n  visitProposedToLocation(location: URL, options: Partial<VisitOptions>) {\n    extendURLWithDeprecatedProperties(location)\n    this.adapter.visitProposedToLocation(location, options)\n  }\n\n  visitStarted(visit: Visit) {\n    extendURLWithDeprecatedProperties(visit.location)\n    this.notifyApplicationAfterVisitingLocation(visit.location)\n  }\n\n  visitCompleted(visit: Visit) {\n    this.notifyApplicationAfterPageLoad(visit.getTimingMetrics())\n  }\n\n  // Form submit observer delegate\n\n  willSubmitForm(form: HTMLFormElement, submitter?: HTMLElement): boolean {\n    return elementIsNavigable(form) && elementIsNavigable(submitter)\n  }\n\n  formSubmitted(form: HTMLFormElement, submitter?: HTMLElement) {\n    this.navigator.submitForm(form, submitter)\n  }\n\n  // Page observer delegate\n\n  pageBecameInteractive() {\n    this.view.lastRenderedLocation = this.location\n    this.notifyApplicationAfterPageLoad()\n  }\n\n  pageLoaded() {\n    this.history.assumeControlOfScrollRestoration()\n  }\n\n  pageWillUnload() {\n    this.history.relinquishControlOfScrollRestoration()\n  }\n\n  // Stream observer delegate\n\n  receivedMessageFromStream(message: StreamMessage) {\n    this.renderStreamMessage(message)\n  }\n\n  // Page view delegate\n\n  viewWillCacheSnapshot() {\n    this.notifyApplicationBeforeCachingSnapshot()\n  }\n\n  viewWillRenderSnapshot({ element }: PageSnapshot, isPreview: boolean) {\n    this.notifyApplicationBeforeRender(element)\n  }\n\n  viewRenderedSnapshot(snapshot: PageSnapshot, isPreview: boolean) {\n    this.view.lastRenderedLocation = this.history.location\n    this.notifyApplicationAfterRender()\n  }\n\n  viewInvalidated() {\n    this.adapter.pageInvalidated()\n  }\n\n  // Application events\n\n  applicationAllowsFollowingLinkToLocation(link: Element, location: URL) {\n    const event = this.notifyApplicationAfterClickingLinkToLocation(link, location)\n    return !event.defaultPrevented\n  }\n\n  applicationAllowsVisitingLocation(location: URL) {\n    const event = this.notifyApplicationBeforeVisitingLocation(location)\n    return !event.defaultPrevented\n  }\n\n  notifyApplicationAfterClickingLinkToLocation(link: Element, location: URL) {\n    return dispatch(\"turbo:click\", { target: link, detail: { url: location.href }, cancelable: true })\n  }\n\n  notifyApplicationBeforeVisitingLocation(location: URL) {\n    return dispatch(\"turbo:before-visit\", { detail: { url: location.href }, cancelable: true })\n  }\n\n  notifyApplicationAfterVisitingLocation(location: URL) {\n    return dispatch(\"turbo:visit\", { detail: { url: location.href } })\n  }\n\n  notifyApplicationBeforeCachingSnapshot() {\n    return dispatch(\"turbo:before-cache\")\n  }\n\n  notifyApplicationBeforeRender(newBody: HTMLBodyElement) {\n    return dispatch(\"turbo:before-render\", { detail: { newBody }})\n  }\n\n  notifyApplicationAfterRender() {\n    return dispatch(\"turbo:render\")\n  }\n\n  notifyApplicationAfterPageLoad(timing: TimingData = {}) {\n    return dispatch(\"turbo:load\", { detail: { url: this.location.href, timing }})\n  }\n\n  // Private\n\n  getActionForLink(link: Element): Action {\n    const action = link.getAttribute(\"data-turbo-action\")\n    return isAction(action) ? action : \"advance\"\n  }\n\n  locationIsVisitable(location: URL) {\n    return isPrefixedBy(location, this.snapshot.rootLocation) && isHTML(location)\n  }\n\n  get snapshot() {\n    return this.view.snapshot\n  }\n}\n\nexport function elementIsNavigable(element?: Element) {\n  const container = element?.closest(\"[data-turbo]\")\n  if (container) {\n    return container.getAttribute(\"data-turbo\") != \"false\"\n  } else {\n    return true\n  }\n}\n\n// Older versions of the Turbo Native adapters referenced the\n// `Location#absoluteURL` property in their implementations of\n// the `Adapter#visitProposedToLocation()` and `#visitStarted()`\n// methods. The Location class has since been removed in favor\n// of the DOM URL API, and accordingly all Adapter methods now\n// receive URL objects.\n//\n// We alias #absoluteURL to #toString() here to avoid crashing\n// older adapters which do not expect URL objects. We should\n// consider removing this support at some point in the future.\n\nfunction extendURLWithDeprecatedProperties(url: URL) {\n  Object.defineProperties(url, deprecatedLocationPropertyDescriptors)\n}\n\nconst deprecatedLocationPropertyDescriptors = {\n  absoluteURL: {\n    get() {\n      return this.toString()\n    }\n  }\n}\n","import { FrameElement, FrameElementDelegate, FrameLoadingStyle } from \"../../elements/frame_element\"\nimport { FetchMethod, FetchRequest, FetchRequestDelegate, FetchRequestHeaders } from \"../../http/fetch_request\"\nimport { FetchResponse } from \"../../http/fetch_response\"\nimport { AppearanceObserver, AppearanceObserverDelegate } from \"../../observers/appearance_observer\"\nimport { parseHTMLDocument } from \"../../util\"\nimport { FormSubmission, FormSubmissionDelegate } from \"../drive/form_submission\"\nimport { Snapshot } from \"../snapshot\"\nimport { ViewDelegate } from \"../view\"\nimport { expandURL, urlsAreEqual, Locatable } from \"../url\"\nimport { FormInterceptor, FormInterceptorDelegate } from \"./form_interceptor\"\nimport { FrameView } from \"./frame_view\"\nimport { LinkInterceptor, LinkInterceptorDelegate } from \"./link_interceptor\"\nimport { FrameRenderer } from \"./frame_renderer\"\nimport { elementIsNavigable } from \"../session\"\n\nexport class FrameController implements AppearanceObserverDelegate, FetchRequestDelegate, FormInterceptorDelegate, FormSubmissionDelegate, FrameElementDelegate, LinkInterceptorDelegate, ViewDelegate<Snapshot<FrameElement>> {\n  readonly element: FrameElement\n  readonly view: FrameView\n  readonly appearanceObserver: AppearanceObserver\n  readonly linkInterceptor: LinkInterceptor\n  readonly formInterceptor: FormInterceptor\n  currentURL?: string | null\n  formSubmission?: FormSubmission\n  private resolveVisitPromise = () => {}\n  private connected = false\n  private hasBeenLoaded = false\n  private settingSourceURL = false\n\n  constructor(element: FrameElement) {\n    this.element = element\n    this.view = new FrameView(this, this.element)\n    this.appearanceObserver = new AppearanceObserver(this, this.element)\n    this.linkInterceptor = new LinkInterceptor(this, this.element)\n    this.formInterceptor = new FormInterceptor(this, this.element)\n  }\n\n  connect() {\n    if (!this.connected) {\n      this.connected = true\n      if (this.loadingStyle == FrameLoadingStyle.lazy) {\n        this.appearanceObserver.start()\n      }\n      this.linkInterceptor.start()\n      this.formInterceptor.start()\n      this.sourceURLChanged()\n    }\n  }\n\n  disconnect() {\n    if (this.connected) {\n      this.connected = false\n      this.appearanceObserver.stop()\n      this.linkInterceptor.stop()\n      this.formInterceptor.stop()\n    }\n  }\n\n  disabledChanged() {\n    if (this.loadingStyle == FrameLoadingStyle.eager) {\n      this.loadSourceURL()\n    }\n  }\n\n  sourceURLChanged() {\n    if (this.loadingStyle == FrameLoadingStyle.eager || this.hasBeenLoaded) {\n      this.loadSourceURL()\n    }\n  }\n\n  loadingStyleChanged() {\n    if (this.loadingStyle == FrameLoadingStyle.lazy) {\n      this.appearanceObserver.start()\n    } else {\n      this.appearanceObserver.stop()\n      this.loadSourceURL()\n    }\n  }\n\n  async loadSourceURL() {\n    if (!this.settingSourceURL && this.enabled && this.isActive && this.sourceURL != this.currentURL) {\n      const previousURL = this.currentURL\n      this.currentURL = this.sourceURL\n      if (this.sourceURL) {\n        try {\n          this.element.loaded = this.visit(this.sourceURL)\n          this.appearanceObserver.stop()\n          await this.element.loaded\n          this.hasBeenLoaded = true\n        } catch (error) {\n          this.currentURL = previousURL\n          throw error\n        }\n      }\n    }\n  }\n\n  async loadResponse(fetchResponse: FetchResponse) {\n    if (fetchResponse.redirected) {\n      this.sourceURL = fetchResponse.response.url\n    }\n\n    try {\n      const html = await fetchResponse.responseHTML\n      if (html) {\n        const { body } = parseHTMLDocument(html)\n        const snapshot = new Snapshot(await this.extractForeignFrameElement(body))\n        const renderer = new FrameRenderer(this.view.snapshot, snapshot, false)\n        await this.view.render(renderer)\n      }\n    } catch (error) {\n      console.error(error)\n      this.view.invalidate()\n    }\n  }\n\n  // Appearance observer delegate\n\n  elementAppearedInViewport(element: Element) {\n    this.loadSourceURL()\n  }\n\n  // Link interceptor delegate\n\n  shouldInterceptLinkClick(element: Element, url: string) {\n    return this.shouldInterceptNavigation(element)\n  }\n\n  linkClickIntercepted(element: Element, url: string) {\n    this.navigateFrame(element, url)\n  }\n\n  // Form interceptor delegate\n\n  shouldInterceptFormSubmission(element: HTMLFormElement, submitter?: Element) {\n    return this.shouldInterceptNavigation(element, submitter)\n  }\n\n  formSubmissionIntercepted(element: HTMLFormElement, submitter?: HTMLElement) {\n    if (this.formSubmission) {\n      this.formSubmission.stop()\n    }\n\n    this.formSubmission = new FormSubmission(this, element, submitter)\n    if (this.formSubmission.fetchRequest.isIdempotent) {\n      this.navigateFrame(element, this.formSubmission.fetchRequest.url.href)\n    } else {\n      const { fetchRequest } = this.formSubmission\n      this.prepareHeadersForRequest(fetchRequest.headers, fetchRequest)\n      this.formSubmission.start()\n    }\n  }\n\n  // Fetch request delegate\n\n  prepareHeadersForRequest(headers: FetchRequestHeaders, request: FetchRequest) {\n    headers[\"Turbo-Frame\"] = this.id\n  }\n\n  requestStarted(request: FetchRequest) {\n    this.element.setAttribute(\"busy\", \"\")\n  }\n\n  requestPreventedHandlingResponse(request: FetchRequest, response: FetchResponse) {\n    this.resolveVisitPromise()\n  }\n\n  async requestSucceededWithResponse(request: FetchRequest, response: FetchResponse) {\n    await this.loadResponse(response)\n    this.resolveVisitPromise()\n  }\n\n  requestFailedWithResponse(request: FetchRequest, response: FetchResponse) {\n    console.error(response)\n    this.resolveVisitPromise()\n  }\n\n  requestErrored(request: FetchRequest, error: Error) {\n    console.error(error)\n    this.resolveVisitPromise()\n  }\n\n  requestFinished(request: FetchRequest) {\n    this.element.removeAttribute(\"busy\")\n  }\n\n  // Form submission delegate\n\n  formSubmissionStarted(formSubmission: FormSubmission) {\n    const frame = this.findFrameElement(formSubmission.formElement)\n    frame.setAttribute(\"busy\", \"\")\n  }\n\n  formSubmissionSucceededWithResponse(formSubmission: FormSubmission, response: FetchResponse) {\n    const frame = this.findFrameElement(formSubmission.formElement)\n    frame.delegate.loadResponse(response)\n  }\n\n  formSubmissionFailedWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse) {\n    this.element.delegate.loadResponse(fetchResponse)\n  }\n\n  formSubmissionErrored(formSubmission: FormSubmission, error: Error) {\n    console.error(error)\n  }\n\n  formSubmissionFinished(formSubmission: FormSubmission) {\n    const frame = this.findFrameElement(formSubmission.formElement)\n    frame.removeAttribute(\"busy\")\n  }\n\n  // View delegate\n\n  viewWillRenderSnapshot(snapshot: Snapshot, isPreview: boolean) {\n\n  }\n\n  viewRenderedSnapshot(snapshot: Snapshot, isPreview: boolean) {\n\n  }\n\n  viewInvalidated() {\n\n  }\n\n  // Private\n\n  private async visit(url: Locatable) {\n    const request = new FetchRequest(this, FetchMethod.get, expandURL(url))\n\n    return new Promise<void>(resolve => {\n      this.resolveVisitPromise = () => {\n        this.resolveVisitPromise = () => {}\n        resolve()\n      }\n      request.perform()\n    })\n  }\n\n  private navigateFrame(element: Element, url: string) {\n    const frame = this.findFrameElement(element)\n    frame.src = url\n  }\n\n  private findFrameElement(element: Element) {\n    const id = element.getAttribute(\"data-turbo-frame\") || this.element.getAttribute(\"target\")\n    return getFrameElementById(id) ?? this.element\n  }\n\n  async extractForeignFrameElement(container: ParentNode): Promise<FrameElement> {\n    let element\n    const id = CSS.escape(this.id)\n\n    try {\n      if (element = activateElement(container.querySelector(`turbo-frame#${id}`), this.currentURL)) {\n        return element\n      }\n\n      if (element = activateElement(container.querySelector(`turbo-frame[src][recurse~=${id}]`), this.currentURL)) {\n        await element.loaded\n        return await this.extractForeignFrameElement(element)\n      }\n\n      console.error(`Response has no matching <turbo-frame id=\"${id}\"> element`)\n    } catch (error) {\n      console.error(error)\n    }\n\n    return new FrameElement()\n  }\n\n  private shouldInterceptNavigation(element: Element, submitter?: Element) {\n    const id = element.getAttribute(\"data-turbo-frame\") || this.element.getAttribute(\"target\")\n\n    if (!this.enabled || id == \"_top\") {\n      return false\n    }\n\n    if (id) {\n      const frameElement = getFrameElementById(id)\n      if (frameElement) {\n        return !frameElement.disabled\n      }\n    }\n\n    if (!elementIsNavigable(element)) {\n      return false\n    }\n\n    if (submitter && !elementIsNavigable(submitter)) {\n      return false\n    }\n\n    return true\n  }\n\n  // Computed properties\n\n  get id() {\n    return this.element.id\n  }\n\n  get enabled() {\n    return !this.element.disabled\n  }\n\n  get sourceURL() {\n    if (this.element.src) {\n      return this.element.src\n    }\n  }\n\n  set sourceURL(sourceURL: string | undefined) {\n    this.settingSourceURL = true\n    this.element.src = sourceURL ?? null\n    this.currentURL = this.element.src\n    this.settingSourceURL = false\n  }\n\n  get loadingStyle() {\n    return this.element.loading\n  }\n\n  get isLoading() {\n    return this.formSubmission !== undefined || this.resolveVisitPromise() !== undefined\n  }\n\n  get isActive() {\n    return this.element.isActive && this.connected\n  }\n}\n\nfunction getFrameElementById(id: string | null) {\n  if (id != null) {\n    const element = document.getElementById(id)\n    if (element instanceof FrameElement) {\n      return element\n    }\n  }\n}\n\nfunction activateElement(element: Element | null, currentURL?: string | null) {\n  if (element) {\n    const src = element.getAttribute(\"src\")\n    if (src != null && currentURL != null && urlsAreEqual(src, currentURL)) {\n      throw new Error(`Matching <turbo-frame id=\"${element.id}\"> element has a source URL which references itself`)\n    }\n    if (element.ownerDocument !== document) {\n      element = document.importNode(element, true)\n    }\n\n    if (element instanceof FrameElement) {\n      element.connectedCallback()\n      return element\n    }\n  }\n}\n","import { StreamElement } from \"../../elements/stream_element\"\n\nexport const StreamActions: { [action: string]: (this: StreamElement) => void } = {\n  after() {\n    this.targetElements.forEach(e => e.parentElement?.insertBefore(this.templateContent, e.nextSibling))\n  },\n\n  append() {\n    this.removeDuplicateTargetChildren()\n    this.targetElements.forEach(e => e.append(this.templateContent))\n  },\n\n  before() {\n    this.targetElements.forEach(e => e.parentElement?.insertBefore(this.templateContent, e))\n  },\n\n  prepend() {\n    this.removeDuplicateTargetChildren()\n    this.targetElements.forEach(e => e.prepend(this.templateContent))\n  },\n\n  remove() {\n    this.targetElements.forEach(e => e.remove())\n  },\n\n  replace() {\n    this.targetElements.forEach(e => e.replaceWith(this.templateContent))\n  },\n\n  update() {\n    this.targetElements.forEach(e => { \n      e.innerHTML = \"\"\n      e.append(this.templateContent)\n    })\n  }\n}\n","import { StreamActions } from \"../core/streams/stream_actions\"\nimport { nextAnimationFrame } from \"../util\"\n\n// <turbo-stream action=replace target=id><template>...\n\nexport class StreamElement extends HTMLElement {\n  async connectedCallback() {\n    try {\n      await this.render()\n    } catch (error) {\n      console.error(error)\n    } finally {\n      this.disconnect()\n    }\n  }\n\n  private renderPromise?: Promise<void>\n\n  async render() {\n    return this.renderPromise ??= (async () => {\n      if (this.dispatchEvent(this.beforeRenderEvent)) {\n        await nextAnimationFrame()\n        this.performAction()\n      }\n    })()\n  }\n\n  disconnect() {\n    try { this.remove() } catch {}\n  }\n \n  removeDuplicateTargetChildren() {\n    this.duplicateChildren.forEach(c => c.remove())\n  }\n  \n  get duplicateChildren() {\n    const existingChildren = this.targetElements.flatMap(e => [...e.children]).filter(c => !!c.id)\n    const newChildrenIds   = [...this.templateContent?.children].filter(c => !!c.id).map(c => c.id)\n  \n    return existingChildren.filter(c => newChildrenIds.includes(c.id))\n  }\n  \n  get performAction() {\n    if (this.action) {\n      const actionFunction = StreamActions[this.action]\n      if (actionFunction) {\n        return actionFunction\n      }\n      this.raise(\"unknown action\")\n    }\n    this.raise(\"action attribute is missing\")\n  }\n\n  get targetElements() {\n    if (this.target) { \n      return this.targetElementsById\n    } else if (this.targets) {\n      return this.targetElementsByQuery\n    } else {\n      this.raise(\"target or targets attribute is missing\")\n    }\n  }\n\n  get templateContent() {\n    return this.templateElement.content.cloneNode(true)\n  }\n\n  get templateElement() {\n    if (this.firstElementChild instanceof HTMLTemplateElement) {\n      return this.firstElementChild\n    }\n    this.raise(\"first child element must be a <template> element\")\n  }\n\n  get action() {\n    return this.getAttribute(\"action\")\n  }\n\n  get target() {\n    return this.getAttribute(\"target\")\n  }\n\n  get targets() {\n    return this.getAttribute(\"targets\")\n  }\n\n  private raise(message: string): never {\n    throw new Error(`${this.description}: ${message}`)\n  }\n\n  private get description() {\n    return (this.outerHTML.match(/<[^>]+>/) ?? [])[0] ?? \"<turbo-stream>\"\n  }\n\n  private get beforeRenderEvent() {\n    return new CustomEvent(\"turbo:before-stream-render\", { bubbles: true, cancelable: true })\n  }\n\n  private get targetElementsById() {\n    const element = this.ownerDocument?.getElementById(this.target!)\n\n    if (element !== null) {\n      return [ element ]\n    } else {\n      return []\n    }\n  }\n\n  private get targetElementsByQuery() {\n    const elements = this.ownerDocument?.querySelectorAll(this.targets!)\n\n    if (elements.length !== 0) {\n      return Array.prototype.slice.call(elements)\n    } else {\n      return []\n    }\n  }\n}\n","import { FrameController } from \"../core/frames/frame_controller\"\nimport { FrameElement } from \"./frame_element\"\nimport { StreamElement } from \"./stream_element\"\n\nFrameElement.delegateConstructor = FrameController\n\nexport * from \"./frame_element\"\nexport * from \"./stream_element\"\n\ncustomElements.define(\"turbo-frame\", FrameElement)\ncustomElements.define(\"turbo-stream\", StreamElement)\n","import { unindent } from \"./util\"\n\n(() => {\n  let element: Element | null = document.currentScript\n  if (!element) return\n  if (element.hasAttribute(\"data-turbo-suppress-warning\")) return\n\n  while (element = element.parentElement) {\n    if (element == document.body) {\n      return console.warn(unindent`\n        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!\n\n        Load your application’s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\n\n        For more information, see: https://turbo.hotwire.dev/handbook/building#working-with-script-elements\n\n        ——\n        Suppress this warning by adding a \"data-turbo-suppress-warning\" attribute to: %s\n      `, element.outerHTML)\n    }\n  }\n})()\n","import { Adapter } from \"./native/adapter\"\nimport { Session } from \"./session\"\nimport { Locatable } from \"./url\"\nimport { StreamMessage } from \"./streams/stream_message\"\nimport { StreamSource } from \"./types\"\nimport { VisitOptions } from \"./drive/visit\"\n\nconst session = new Session\nconst { navigator } = session\nexport { navigator }\n\nexport function start() {\n  session.start()\n}\n\nexport function registerAdapter(adapter: Adapter) {\n  session.registerAdapter(adapter)\n}\n\nexport function visit(location: Locatable, options?: Partial<VisitOptions>) {\n  session.visit(location, options)\n}\n\nexport function connectStreamSource(source: StreamSource) {\n  session.connectStreamSource(source)\n}\n\nexport function disconnectStreamSource(source: StreamSource) {\n  session.disconnectStreamSource(source)\n}\n\nexport function renderStreamMessage(message: StreamMessage | string) {\n  session.renderStreamMessage(message)\n}\n\nexport function clearCache() {\n  session.clearCache()\n}\n\nexport function setProgressBarDelay(delay: number) {\n  session.setProgressBarDelay(delay)\n}\n","import \"./polyfills\"\nimport \"./elements\"\nimport \"./script_warning\"\n\nexport * from \"./core\"\nimport * as Turbo from \"./core\"\nwindow.Turbo = Turbo\nTurbo.start()\n"],"names":["Turbo.start"],"mappings":"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"}